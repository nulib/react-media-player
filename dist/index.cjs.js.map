{
  "version": 3,
  "sources": ["../src/index.tsx", "../src/context/viewer-context.tsx", "../src/components/Viewer/Viewer.tsx", "../src/hooks/use-iiif/getAccompanyingCanvasImage.ts", "../src/hooks/use-iiif/getCanvasByCriteria.ts", "../src/hooks/use-iiif/getPaintingResource.ts", "../src/hooks/use-iiif/getSupplementingResources.ts", "../src/hooks/use-iiif/getLabel.ts", "../src/hooks/use-iiif/getThumbnail.ts", "../src/stitches.tsx", "../src/components/Viewer/Viewer.styled.tsx", "../src/hooks/useMediaQuery.ts", "../src/hooks/useBodyLocked.ts", "../src/components/Viewer/Header.tsx", "../src/components/Viewer/Header.styled.tsx", "../src/components/Viewer/IIIFBadge.tsx", "../src/components/CopyText.tsx", "../src/hooks/useCopyToClipboard.ts", "../src/components/Viewer/Content.tsx", "../src/components/Media/Media.tsx", "../src/components/Media/Media.styled.tsx", "../src/components/Media/Thumbnail.tsx", "../src/services/utils.ts", "../src/components/Media/Thumbnail.styled.tsx", "../src/hooks/use-iiif/getResourceType.ts", "../src/components/Media/Controls.tsx", "../src/components/Media/Controls.styled.tsx", "../src/hooks/useKeyPress.ts", "../src/components/Navigator/Navigator.tsx", "../src/components/Navigator/Navigator.styled.tsx", "../src/components/Navigator/Resource.tsx", "../src/components/Navigator/Cue.styled.tsx", "../src/hooks/use-webvtt.ts", "../src/components/Navigator/Menu.tsx", "../src/components/Navigator/Cue.tsx", "../src/context/current-time-context.tsx", "../src/components/Navigator/Menu.styled.tsx", "../src/components/Player/Player.tsx", "../src/components/Player/Player.styled.tsx", "../src/components/Player/AudioVisualizer.tsx", "../src/components/Player/AudioVisualizer.styled.tsx", "../src/components/Player/Track.tsx", "../src/components/ImageViewer/ImageViewer.tsx", "../src/components/ImageViewer/ImageViewer.styled.tsx", "../src/components/ImageViewer/Controls.tsx", "../src/components/ImageViewer/Button.tsx", "../src/components/ImageViewer/Button.styled.tsx", "../src/components/ImageViewer/Controls.styled.tsx", "../src/services/iiif.ts", "../src/components/Viewer/ErrorFallback.tsx", "../src/components/Viewer/ErrorFallback.styled.tsx"],
  "sourcesContent": ["import React, { useEffect, useState } from \"react\";\nimport { ManifestNormalized } from \"@iiif/presentation-3\";\nimport {\n  ConfigOptions,\n  ViewerProvider,\n  useViewerState,\n  useViewerDispatch,\n} from \"context/viewer-context\";\nimport Viewer from \"components/Viewer/Viewer\";\nimport { createTheme } from \"@stitches/react\";\n\ninterface Props {\n  manifestId: string;\n  canvasIdCallback?: (arg0: string) => void;\n  customTheme?: any;\n  options?: ConfigOptions;\n}\n\nconst App: React.FC<Props> = ({\n  manifestId,\n  canvasIdCallback = () => {},\n  customTheme,\n  options,\n}) => {\n  return (\n    <ViewerProvider>\n      <RenderViewer\n        manifestId={manifestId}\n        canvasIdCallback={canvasIdCallback}\n        customTheme={customTheme}\n        options={options}\n      />\n    </ViewerProvider>\n  );\n};\n\nconst RenderViewer: React.FC<Props> = ({\n  manifestId,\n  canvasIdCallback,\n  customTheme,\n  options,\n}) => {\n  const dispatch: any = useViewerDispatch();\n\n  /**\n   * Retrieve state set by the wrapping <ViewerProvider/> and make\n   * the normalized manifest available from @iiif/vault.\n   */\n  const store = useViewerState();\n  const { activeCanvas, isLoaded, vault } = store;\n  const [manifest, setManifest] = useState<ManifestNormalized>();\n\n  /**\n   * Overrides the baseline stitches theme when set.\n   */\n  let theme = {};\n  if (customTheme) theme = createTheme(\"custom\", customTheme);\n\n  /**\n   * On change, pass the activeCanvas up to the wrapping `<App/>`\n   * component to be handed off to a consuming application.\n   */\n  useEffect(() => {\n    if (canvasIdCallback) canvasIdCallback(activeCanvas);\n  }, [activeCanvas]);\n\n  useEffect(() => {\n    // Update with user config options\n    dispatch({\n      type: \"updateConfigOptions\",\n      configOptions: options,\n    });\n\n    /**\n     * Loaded manifest and site using @iiif/vault.\n     */\n    vault\n      .loadManifest(manifestId)\n      .then((data: any) => {\n        setManifest(data);\n        dispatch({\n          type: \"updateActiveCanvas\",\n          canvasId: data.items[0] && data.items[0].id,\n        });\n      })\n      .catch((error: any) => {\n        console.error(`Manifest failed to load: ${error}`);\n      })\n      .finally(() => {\n        dispatch({\n          type: \"updateIsLoaded\",\n          isLoaded: true,\n        });\n      });\n  }, []);\n\n  /**\n   * Render loading component while manifest is fetched and\n   * loaded into React.Context as `vault`. Upon completion\n   * (error or not) isLoaded will be set to true.\n   */\n  if (!isLoaded) return <>Loading</>;\n\n  /**\n   * If an error occurs during manifest fetch process used by\n   * @iiif/vault, vault will not return a manifest\n   * that is fully normalized, and be missing the items property.\n   * This being undefined signals that something went wrong and we\n   * will render a user-friendly error as a functional component.\n   */\n\n  if (!manifest || !manifest[\"items\"]) {\n    console.log(`The IIIF manifest ${manifestId} failed to load.`);\n    return <></>;\n  }\n\n  /**\n   * If the manifest returned by @iiif/vault does not\n   * contain any canvases, then we'll show an error to the screen. This\n   * may be required if the viewer is rendered to preview manifests in\n   * repository administration views.\n   */\n  if (manifest[\"items\"].length === 0) {\n    console.log(`The IIIF manifest ${manifestId} does not contain canvases.`);\n    return <></>;\n  }\n\n  /**\n   * If manifest is normalized by @iiif/vault, we know\n   * that the manifest data is retrievable via vault.get() and we\n   * will will set the activeCanvas to the first index and render the\n   * <Viewer/> component.\n   */\n  return <Viewer manifest={manifest} theme={theme} />;\n};\n\nexport default App;\n", "import React from \"react\";\nimport { Vault } from \"@iiif/vault\";\n\nexport type ConfigOptions = {\n  showTitle: boolean;\n  showIIIFBadge: boolean;\n  ignoreCaptionLabels: string[];\n};\n\nconst defaultConfigOptions = {\n  showTitle: true,\n  showIIIFBadge: true,\n  ignoreCaptionLabels: [],\n};\n\ninterface ViewerContextStore {\n  activeCanvas: string;\n  configOptions: ConfigOptions;\n  isLoaded: boolean;\n  vault: Vault;\n}\n\ninterface ViewerAction {\n  type: string;\n  canvasId: string;\n  configOptions: ConfigOptions;\n  isLoaded: boolean;\n}\n\nconst defaultState: ViewerContextStore = {\n  activeCanvas: \"\",\n  configOptions: defaultConfigOptions,\n  isLoaded: false,\n  vault: new Vault(),\n};\n\nconst ViewerStateContext =\n  React.createContext<ViewerContextStore>(defaultState);\nconst ViewerDispatchContext =\n  React.createContext<ViewerContextStore>(defaultState);\n\nfunction viewerReducer(state: ViewerContextStore, action: ViewerAction) {\n  switch (action.type) {\n    case \"updateActiveCanvas\": {\n      /**\n       * Set canvasId to empty string if it comes back undefined.\n       */\n      if (!action.canvasId) action.canvasId = \"\";\n      return {\n        ...state,\n        activeCanvas: action.canvasId,\n      };\n    }\n    case \"updateConfigOptions\": {\n      return {\n        ...state,\n        configOptions: {\n          ...defaultConfigOptions,\n          ...action.configOptions,\n        },\n      };\n    }\n    case \"updateIsLoaded\": {\n      return {\n        ...state,\n        isLoaded: action.isLoaded,\n      };\n    }\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n}\n\ninterface ViewerProviderProps {\n  initialState?: ViewerContextStore;\n  children: React.ReactNode;\n}\n\nconst ViewerProvider: React.FC<ViewerProviderProps> = ({\n  initialState = defaultState,\n  children,\n}) => {\n  const [state, dispatch] = React.useReducer<\n    React.Reducer<ViewerContextStore, ViewerAction>\n  >(viewerReducer, initialState);\n\n  return (\n    <ViewerStateContext.Provider value={state}>\n      <ViewerDispatchContext.Provider\n        value={dispatch as unknown as ViewerContextStore}\n      >\n        {children}\n      </ViewerDispatchContext.Provider>\n    </ViewerStateContext.Provider>\n  );\n};\n\nfunction useViewerState() {\n  const context = React.useContext(ViewerStateContext);\n  if (context === undefined) {\n    throw new Error(\"useViewerState must be used within a ViewerProvider\");\n  }\n  return context;\n}\n\nfunction useViewerDispatch() {\n  const context = React.useContext(ViewerDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useViewerDispatch must be used within a ViewerProvider\");\n  }\n  return context;\n}\n\nexport { ViewerProvider, useViewerState, useViewerDispatch };\n", "import React, { useEffect, useState } from \"react\";\nimport {\n  ExternalResourceTypes,\n  InternationalString,\n  ManifestNormalized,\n} from \"@iiif/presentation-3\";\nimport { getPaintingResource, getSupplementingResources } from \"hooks/use-iiif\";\nimport { useViewerState } from \"context/viewer-context\";\nimport { Wrapper } from \"./Viewer.styled\";\nimport { useMediaQuery } from \"hooks/useMediaQuery\";\nimport { useBodyLocked } from \"hooks/useBodyLocked\";\nimport { media } from \"stitches\";\nimport * as Collapsible from \"@radix-ui/react-collapsible\";\nimport ViewerHeader from \"./Header\";\nimport ViewerContent from \"./Content\";\nimport { LabeledResource } from \"hooks/use-iiif/getSupplementingResources\";\nimport { IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport ErrorFallback from \"components/Viewer/ErrorFallback\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\ninterface ViewerProps {\n  manifest: ManifestNormalized;\n  theme?: any;\n}\n\nconst Viewer: React.FC<ViewerProps> = ({ manifest, theme }) => {\n  /**\n   * Viewer State\n   */\n  const viewerState: any = useViewerState();\n  const { activeCanvas, vault } = viewerState;\n\n  /**\n   * Local state\n   */\n  const [isMedia, setIsMedia] = useState(false);\n  const [isNavigator, setIsNavigator] = useState<boolean>(false);\n  const [isNavigatorOpen, setIsNavigatorOpen] = useState<boolean>(true);\n  const [painting, setPainting] = useState<IIIFExternalWebResource | undefined>(\n    undefined,\n  );\n  const [resources, setResources] = useState<LabeledResource[]>([]);\n\n  /**\n   * Hooks\n   */\n  const [isBodyLocked, setIsBodyLocked] = useBodyLocked(false);\n  const isSmallViewport = useMediaQuery(media.sm);\n\n  useEffect(() => {\n    if (!isSmallViewport) {\n      setIsNavigatorOpen(true);\n      return;\n    }\n    setIsNavigatorOpen(false);\n  }, [isSmallViewport]);\n\n  useEffect(() => {\n    if (!isSmallViewport) {\n      setIsBodyLocked(false);\n      return;\n    }\n    setIsBodyLocked(isNavigatorOpen);\n  }, [isNavigatorOpen]);\n\n  useEffect(() => {\n    const painting = getPaintingResource(vault, activeCanvas);\n    const resources = getSupplementingResources(\n      vault,\n      activeCanvas,\n      \"text/vtt\",\n    );\n    if (painting) {\n      setIsMedia(\n        [\"Sound\", \"Video\"].indexOf(painting.type as ExternalResourceTypes) > -1\n          ? true\n          : false,\n      );\n      setPainting({ ...painting });\n    }\n    setResources(resources);\n    setIsNavigator(resources.length !== 0);\n  }, [activeCanvas]);\n\n  return (\n    <ErrorBoundary FallbackComponent={ErrorFallback}>\n      <Wrapper\n        className={theme}\n        data-body-locked={isBodyLocked}\n        data-navigator={isNavigator}\n        data-navigator-open={isNavigatorOpen}\n      >\n        <Collapsible.Root\n          open={isNavigatorOpen}\n          onOpenChange={setIsNavigatorOpen}\n        >\n          <ViewerHeader\n            manifestLabel={manifest.label as InternationalString}\n            manifestId={manifest.id}\n          />\n          <ViewerContent\n            activeCanvas={activeCanvas}\n            painting={painting as IIIFExternalWebResource}\n            resources={resources}\n            items={manifest.items}\n            isMedia={isMedia}\n            isNavigator={isNavigator}\n            isNavigatorOpen={isNavigatorOpen}\n          />\n        </Collapsible.Root>\n      </Wrapper>\n    </ErrorBoundary>\n  );\n};\n\nexport default Viewer;\n", "import { IIIFExternalWebResource } from \"@iiif/presentation-3\";\n\n// TODO: Fix this type when fixing tests\nfunction getUrl(obj: any) {\n  // No IIIF image service, just return vague id value\n  if (!obj.service) {\n    return obj.id;\n  }\n  // Construct a IIIF Image service url path with params\n  return `${obj.service[0].id}/full/,${obj.height || 500}/0/default.jpg`;\n}\n\n// TODO: Fix this type when fixing all tests\nexport const getAccompanyingCanvasImage = (\n  accompanyingCanvas: any | undefined,\n): string | undefined => {\n  if (!accompanyingCanvas) return;\n  try {\n    /**\n     * Step 1: does a thumbnail item exist on canvas root?\n     */\n    const thumbnail: Array<IIIFExternalWebResource> | undefined =\n      accompanyingCanvas.thumbnail;\n    if (thumbnail && thumbnail.length > 0) {\n      return getUrl(thumbnail[0]);\n    }\n\n    /**\n     * Step 2: Dig into the Annotation Page > Body\n     */\n    return getUrl(accompanyingCanvas.items[0].items[0].body);\n  } catch (e) {\n    console.error(\"Error retrieving accompanying canvas image\", e);\n    return;\n  }\n};\n", "import {\n  Annotation,\n  AnnotationBody,\n  AnnotationPageNormalized,\n  Canvas,\n  CanvasNormalized,\n  ContentResource,\n  ExternalResourceTypes,\n  IIIFExternalWebResource,\n} from \"@iiif/presentation-3\";\n\nexport interface CanvasEntity {\n  canvas: CanvasNormalized | undefined;\n  accompanyingCanvas: Canvas | undefined;\n  annotationPage: AnnotationPageNormalized | undefined;\n  annotations: Array<Annotation | undefined>;\n}\n\nexport const getCanvasByCriteria = (\n  vault: any,\n  item: Canvas,\n  motivation: string,\n  paintingType: Array<ExternalResourceTypes>,\n): CanvasEntity => {\n  const entity: CanvasEntity = {\n    canvas: undefined,\n    accompanyingCanvas: undefined,\n    annotationPage: undefined,\n    annotations: [],\n  };\n\n  const filterAnnotations = (annotation: Annotation) => {\n    if (annotation) {\n      // Handle invalid annotations\n      if (!annotation.body || !annotation.motivation) {\n        console.error(\n          `Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'`,\n          annotation,\n        );\n        return;\n      }\n\n      if (!annotation.body) return;\n\n      let annotationBody = annotation.body as\n        | ContentResource\n        | ContentResource[];\n\n      if (Array.isArray(annotationBody)) annotationBody = annotationBody[0];\n\n      const resource: IIIFExternalWebResource = vault.get(annotationBody.id);\n      if (!resource) return;\n      switch (motivation) {\n        case \"painting\":\n          if (\n            annotation.target === item.id &&\n            annotation.motivation &&\n            annotation.motivation[0] === \"painting\" &&\n            paintingType.includes(resource.type)\n          )\n            annotation.body = resource;\n          return annotation;\n        case \"supplementing\":\n          return;\n        default: {\n          throw new Error(`Invalid annotation motivation.`);\n        }\n      }\n    }\n  };\n\n  entity.canvas = vault.get(item);\n\n  if (entity.canvas) {\n    entity.annotationPage = vault.get(entity.canvas.items[0]);\n    entity.accompanyingCanvas = entity.canvas?.accompanyingCanvas\n      ? vault.get(entity.canvas?.accompanyingCanvas)\n      : undefined;\n  }\n\n  if (entity.annotationPage)\n    entity.annotations = vault\n      .get(entity.annotationPage.items)\n      .filter(filterAnnotations);\n\n  return entity;\n};\n", "import { IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport { getCanvasByCriteria } from \"./index\";\n\nexport const getPaintingResource = (\n  vault: any,\n  id: string,\n): IIIFExternalWebResource | undefined => {\n  const canvasEntity = getCanvasByCriteria(\n    vault,\n    { id, type: \"Canvas\" },\n    \"painting\",\n    [\"Image\", \"Sound\", \"Video\"],\n  );\n\n  if (canvasEntity.annotations.length === 0) return;\n\n  if (canvasEntity.annotations[0] && canvasEntity.annotations[0].body)\n    return canvasEntity.annotations[0].body as IIIFExternalWebResource;\n\n  return;\n};\n", "import {\n  Annotation,\n  AnnotationPage,\n  CanvasNormalized,\n  ContentResource,\n  IIIFExternalWebResource,\n  InternationalString,\n} from \"@iiif/presentation-3\";\n\nexport interface LabeledResource {\n  id?: string;\n  type: \"Dataset\" | \"Image\" | \"Video\" | \"Sound\" | \"Text\";\n  format?: string;\n  label: InternationalString;\n  language?: string | string[];\n  processingLanguage?: string;\n  textDirection?: \"ltr\" | \"rtl\" | \"auto\";\n}\n\n// Get webVtt annotations from activeCanvas\nexport const getSupplementingResources = (\n  vault: any,\n  activeCanvas: string,\n  format: string,\n): Array<LabeledResource> => {\n  const canvas: CanvasNormalized = vault.get({\n    id: activeCanvas,\n    type: \"Canvas\",\n  });\n\n  if (!canvas?.annotations || !canvas.annotations[0]) return [];\n\n  const annotationPage: AnnotationPage = vault.get(canvas.annotations[0]);\n\n  const annotations: Annotation[] = vault.get(annotationPage.items);\n  if (!Array.isArray(annotations)) return [];\n\n  return annotations\n    .filter((annotation) => {\n      if (!annotation.body) return;\n      if (annotation.motivation?.includes(\"supplementing\")) {\n        let annotationBody = annotation.body as\n          | ContentResource\n          | ContentResource[];\n\n        if (Array.isArray(annotationBody)) annotationBody = annotationBody[0];\n\n        const resource: IIIFExternalWebResource = vault.get(annotationBody.id);\n        if (resource.format === format) {\n          annotation.body = resource;\n          return annotation;\n        }\n      }\n    })\n    .map((filtered: Annotation) => {\n      return filtered.body as LabeledResource;\n    });\n};\n", "import { InternationalString } from \"@iiif/presentation-3\";\n\n// Get string from a IIIF pres 3 label by language code\nexport const getLabel = (\n  label: InternationalString,\n  language: string = \"en\",\n) => {\n  /*\n   * If no label exists, return an empty string.\n   */\n  if (!label) return \"\";\n\n  /*\n   * If InternationalString code does not exist on label, then\n   * return what may be there, ex: label.none[0] OR label.fr[0]\n   */\n  if (!label[language]) {\n    const codes: Array<string> = Object.getOwnPropertyNames(label);\n    if (codes.length > 0) return label[codes[0]];\n  }\n\n  /*\n   * Return label value for InternationalString code `en`\n   */\n  return label[language];\n};\n", "import {\n  AnnotationBody,\n  ContentResource,\n  IIIFExternalWebResource,\n} from \"@iiif/presentation-3\";\nimport { CanvasEntity } from \"./getCanvasByCriteria\";\n\nexport const getThumbnail = (\n  vault: any,\n  entity: CanvasEntity,\n  width: number,\n  height: number,\n) => {\n  /*\n   * 1. Initiate empty candidates array.\n   */\n  let candidates: Array<IIIFExternalWebResource> = [];\n\n  /*\n   * 2. Check if canvas has an explicitly assigned IIIF thumbnail.\n   */\n  if (entity.canvas)\n    if (entity.canvas.thumbnail.length > 0) {\n      const canvasThumbnail: IIIFExternalWebResource = vault.get(\n        entity.canvas.thumbnail[0],\n      );\n      candidates.push(canvasThumbnail);\n    }\n\n  if (entity.annotations[0]) {\n    /*\n     * 2. Check if painting annotation has an explicitly assigned IIIF thumbnail.\n     */\n    if (entity.annotations[0].thumbnail)\n      if (entity.annotations[0].thumbnail.length > 0) {\n        const annotationThumbnail: IIIFExternalWebResource = vault.get(\n          entity.annotations[0].thumbnail[0],\n        );\n        candidates.push(annotationThumbnail);\n      }\n\n    /*\n     * 3. Check if painting annotation is of type Image.\n     */\n    if (!entity.annotations[0].body) return;\n    const annotationBody = entity.annotations[0]\n      .body as IIIFExternalWebResource;\n\n    if (annotationBody.type === \"Image\") candidates.push(annotationBody);\n  }\n\n  /*\n   * 4. Validate candidates and make selection.\n   */\n  if (candidates.length === 0) return;\n\n  const selectedCandidate: IIIFExternalWebResource = {\n    id: candidates[0].id,\n    format: candidates[0].format,\n    type: candidates[0].type,\n    width: width,\n    height: height,\n  };\n\n  /*\n   * 5. Return (for time being crudely) constructed image object.\n   */\n  const thumbnailContent = selectedCandidate;\n  //console.log(\"thumbnailContent\", thumbnailContent);\n\n  return thumbnailContent;\n};\n", "import { createStitches } from \"@stitches/react\";\n\nexport const theme = {\n  colors: {\n    /*\n     * Black and dark grays in a light theme.\n     * Must contrast to 4.5 or greater with `secondary`.\n     */\n    primary: \"#1a1d1e\",\n    primaryMuted: \"#26292b\",\n    primaryAlt: \"#151718\",\n\n    /*\n     * Key brand color(s).\n     * Must contrast to 4.5 or greater with `secondary`.\n     */\n    accent: \"#006adc\",\n    accentMuted: \"#5eb0ef\",\n    accentAlt: \"#00254d\",\n\n    /*\n     * White and light grays in a light theme.\n     * Must contrast to 4.5 or greater with `primary` and  `accent`.\n     */\n    secondary: \"#FFFFFF\",\n    secondaryMuted: \"#e6e8eb\",\n    secondaryAlt: \"#c1c8cd\",\n  },\n  fonts: {\n    sans: \"'Inter', Arial, sans-serif\",\n    display: \"'Calistoga', 'Inter', Arial, sans-serif\",\n  },\n  transitions: {\n    all: \"all 500ms cubic-bezier(0.16, 1, 0.3, 1)\",\n  },\n};\n\nexport const media = {\n  xxs: \"(max-width: 349px)\",\n  xs: \"(max-width: 575px)\",\n  sm: \"(max-width: 767px)\",\n  md: \"(max-width: 991px)\",\n  xl: \"(max-width: 1199px)\",\n  lg: \"(min-width: 1200px)\",\n};\n\nexport const { styled, css, keyframes, createTheme } = createStitches({\n  theme,\n  media,\n});\n", "import { styled } from \"stitches\";\nimport * as Collapsible from \"@radix-ui/react-collapsible\";\n\nconst MediaWrapper = styled(\"div\", {\n  position: \"relative\",\n  zIndex: \"0\",\n});\n\nconst Content = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"row\",\n  overflow: \"hidden\",\n\n  \"@sm\": {\n    flexDirection: \"column\",\n  },\n});\n\nconst Main = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: \"1\",\n  flexShrink: \"1\",\n  width: \"61.8%\",\n\n  \"@sm\": {\n    width: \"100%\",\n  },\n});\n\nconst CollapsibleTrigger = styled(Collapsible.Trigger, {\n  display: \"none\",\n  background: \"transparent\",\n  border: \"none\",\n  margin: \"0\",\n  padding: \"0\",\n  transition: \"$all\",\n  opacity: \"1\",\n  marginTop: \"0\",\n\n  \"&[data-navigator='false']\": {\n    opacity: \"0\",\n    marginTop: \"-59px\",\n  },\n\n  \"@sm\": {\n    display: \"flex\",\n\n    \"> span\": {\n      display: \"flex\",\n      flexGrow: \"1\",\n      margin: \"1rem 1rem 0\",\n    },\n  },\n});\n\nconst CollapsibleContent = styled(Collapsible.Content, {\n  width: \"100%\",\n  display: \"flex\",\n});\n\nconst Aside = styled(\"aside\", {\n  display: \"flex\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  width: \"38.2%\",\n\n  \"@sm\": {\n    width: \"100%\",\n  },\n});\n\nconst Wrapper = styled(\"section\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  padding: \"1.618rem\",\n  fontFamily: \"$sans\",\n  backgroundColor: \"$secondary\",\n  fontSmooth: \"auto\",\n  webkitFontSmoothing: \"antialiased\",\n\n  \"> div\": {\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: \"1\",\n    justifyContent: \"flex-start\",\n\n    \"@sm\": {\n      [`& ${Content}`]: {\n        flexGrow: \"1\",\n      },\n\n      [`& ${Main}`]: {\n        flexGrow: \"0\",\n      },\n    },\n  },\n\n  \"@sm\": {\n    padding: \"0\",\n  },\n\n  \"&[data-navigator-open='true']\": {\n    \"@sm\": {\n      position: \"fixed\",\n      height: \"100%\",\n      width: \"100%\",\n      top: \"0\",\n      left: \"0\",\n      zIndex: \"2500000000\",\n\n      [`& ${MediaWrapper}`]: {\n        display: \"none\",\n      },\n\n      [`& ${CollapsibleContent}`]: {\n        height: \"100%\",\n      },\n    },\n  },\n});\n\nexport {\n  Wrapper,\n  Content,\n  Main,\n  MediaWrapper,\n  CollapsibleContent,\n  CollapsibleTrigger,\n  Aside,\n};\n", "import { useEffect, useState } from \"react\";\n\nexport const useMediaQuery = (mediaQuery: string) => {\n  const match = () => {\n    if (!window.matchMedia) {\n      return false;\n    }\n    return window.matchMedia(mediaQuery).matches;\n  };\n\n  const [isMatch, setIsMatch] = useState<boolean>(match);\n\n  useEffect(() => {\n    const handler = () => setIsMatch(match);\n    window.addEventListener(\"resize\", handler);\n    return () => window.removeEventListener(\"resize\", handler);\n  });\n\n  return isMatch;\n};\n", "import { useEffect, useLayoutEffect, useState } from \"react\";\n\ntype ReturnType = [boolean, (locked: boolean) => void];\n\nexport const useBodyLocked = (initialLocked = false): ReturnType => {\n  const [locked, setLocked] = useState(initialLocked);\n\n  useLayoutEffect(() => {\n    if (!locked) {\n      return;\n    }\n\n    const originalOverflow = document.documentElement.style.overflow;\n\n    document.documentElement.style.overflow = \"hidden\";\n\n    return () => {\n      document.documentElement.style.overflow = originalOverflow;\n    };\n  }, [locked]);\n\n  useEffect(() => {\n    if (locked !== initialLocked) {\n      setLocked(initialLocked);\n    }\n  }, [initialLocked]);\n\n  return [locked, setLocked];\n};\n", "import React from \"react\";\nimport { Header, IIIFBadgeButton, IIIFBadgeContent } from \"./Header.styled\";\nimport { InternationalString } from \"@iiif/presentation-3\";\nimport { getLabel } from \"hooks/use-iiif\";\nimport { Popover } from \"@nulib/design-system\";\nimport IIIFBadge from \"./IIIFBadge\";\nimport CopyText from \"components/CopyText\";\nimport { useViewerState } from \"context/viewer-context\";\n\ninterface Props {\n  manifestId: string;\n  manifestLabel: InternationalString;\n}\n\nconst ViewerHeader: React.FC<Props> = ({ manifestId, manifestLabel }) => {\n  const viewerState: any = useViewerState();\n  const { configOptions } = viewerState;\n\n  return (\n    <Header>\n      {configOptions.showTitle && (\n        <span>{getLabel(manifestLabel as InternationalString, \"en\")}</span>\n      )}\n      <p>Is this real</p>\n      {configOptions.showIIIFBadge && (\n        <Popover>\n          <IIIFBadgeButton>\n            <IIIFBadge />\n          </IIIFBadgeButton>\n          <IIIFBadgeContent>\n            <button\n              onClick={(e) => {\n                e.preventDefault();\n                window.open(manifestId, \"_blank\");\n              }}\n            >\n              View Manifest\n            </button>\n            <CopyText textPrompt=\"Copy Manifest URL\" textToCopy={manifestId} />\n          </IIIFBadgeContent>\n        </Popover>\n      )}\n    </Header>\n  );\n};\n\nexport default ViewerHeader;\n", "import { styled } from \"stitches\";\nimport { Popover } from \"@nulib/design-system\";\n\nconst IIIFBadgeButton = styled(Popover.Trigger, {\n  width: \"30px\",\n  padding: \"5px\",\n});\n\nconst IIIFBadgeContent = styled(Popover.Content, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  fontSize: \"0.8333rem\",\n\n  button: {\n    display: \"flex\",\n    textDecoration: \"none\",\n    fontFamily: \"$sans\",\n    marginBottom: \"0.5em\",\n    color: \"$accentAlt\",\n    cursor: \"pointer\",\n    background: \"$secondary\",\n    border: \"none\",\n\n    [\"&:last-child\"]: {\n      marginBottom: \"0\",\n    },\n  },\n});\n\nconst Header = styled(\"header\", {\n  display: \"flex\",\n  backgroundColor: \"transparent !important\",\n  justifyContent: \"space-between\",\n  padding: \"0 0 0.5rem\",\n\n  span: {\n    fontSize: \"1.25rem\",\n    fontWeight: \"700\",\n    fontFamily: \"$display\",\n\n    \"@sm\": {\n      padding: \"1rem\",\n      fontSize: \"1rem\",\n    },\n  },\n});\n\nexport { Header, IIIFBadgeButton, IIIFBadgeContent };\n", "import React from \"react\";\n\nconst IIIFBadge: React.FC = () => {\n  const red = \"#ed1d33\";\n  const blue = \"#2873ab\";\n\n  return (\n    <svg viewBox=\"0 0 493.35999 441.33334\" id=\"iiif-logo\" version=\"1.1\">\n      <title>IIIF Manifest Options</title>\n      <g transform=\"matrix(1.3333333,0,0,-1.3333333,0,441.33333)\">\n        <g transform=\"scale(0.1)\">\n          <path\n            style={{ fill: blue }}\n            d=\"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5\"\n          />\n          <path\n            style={{ fill: blue }}\n            d=\"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18\"\n          />\n          <path\n            style={{ fill: red }}\n            d=\"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5\"\n          />\n          <path\n            style={{ fill: red }}\n            d=\"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18\"\n          />\n          <path\n            style={{ fill: blue }}\n            d=\"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5\"\n          />\n          <path\n            style={{ fill: blue }}\n            d=\"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18\"\n          />\n          <path\n            style={{ fill: red }}\n            d=\"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n};\n\nexport default IIIFBadge;\n", "import React from \"react\";\nimport { styled } from \"stitches\";\nimport { useCopyToClipboard, CopyStatus } from \"hooks/useCopyToClipboard\";\n\nconst Status = styled(\"span\", {\n  display: \"flex\",\n  alignContent: \"center\",\n  alignItems: \"center\",\n  padding: \"0.125rem 0.25rem 0\",\n  marginTop: \"-0.125rem\",\n  marginLeft: \"0.5rem\",\n  backgroundColor: \"$accent\",\n  color: \"$secondary\",\n  borderRadius: \"3px\",\n  fontSize: \"0.6111rem\",\n  textTransform: \"uppercase\",\n  lineHeight: \"1em\",\n});\n\nconst CopyTextStatus: React.FC<{ status: CopyStatus }> = ({ status }) => {\n  if (!status) return null;\n\n  return <Status data-copy-status={status}>{status}</Status>;\n};\n\nexport const CopyText: React.FC<{ textPrompt: string; textToCopy: string }> = ({\n  textPrompt,\n  textToCopy,\n}) => {\n  const [copyStatus, copyText] = useCopyToClipboard(textToCopy);\n  return (\n    <button onClick={copyText}>\n      {textPrompt} <CopyTextStatus status={copyStatus} />\n    </button>\n  );\n};\n\nexport default CopyText;\n", "import { useCallback, useEffect, useState } from \"react\";\n\nexport type CopyStatus = undefined | \"copied\" | \"failed\";\n\nexport const useCopyToClipboard = (\n  text: string,\n  notifyTimeout = 2500,\n): [CopyStatus, () => void] => {\n  const [copyStatus, setCopyStatus] = useState<CopyStatus>();\n  const copy = useCallback(() => {\n    navigator.clipboard.writeText(text).then(\n      () => setCopyStatus(\"copied\"),\n      () => setCopyStatus(\"failed\"),\n    );\n  }, [text]);\n\n  useEffect(() => {\n    if (!copyStatus) {\n      return;\n    }\n\n    const timeoutId = setTimeout(() => setCopyStatus(undefined), notifyTimeout);\n\n    return () => clearTimeout(timeoutId);\n  }, [copyStatus]);\n\n  return [copyStatus, copy];\n};\n", "import React from \"react\";\nimport Media from \"components/Media/Media\";\nimport Navigator from \"components/Navigator/Navigator\";\nimport Player from \"components/Player/Player\";\nimport ImageViewer from \"components/ImageViewer/ImageViewer\";\nimport { Button } from \"@nulib/design-system\";\nimport { Canvas, IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport {\n  Content,\n  Main,\n  CollapsibleTrigger,\n  CollapsibleContent,\n  MediaWrapper,\n  Aside,\n} from \"./Viewer.styled\";\nimport { LabeledResource } from \"hooks/use-iiif/getSupplementingResources\";\nimport { CurrentTimeProvider } from \"context/current-time-context\";\n\ninterface Props {\n  activeCanvas: string;\n  painting: IIIFExternalWebResource;\n  resources: LabeledResource[];\n  items: Canvas[];\n  isMedia: boolean;\n  isNavigator: boolean;\n  isNavigatorOpen: boolean;\n}\n\nconst ViewerContent: React.FC<Props> = ({\n  activeCanvas,\n  painting,\n  resources,\n  items,\n  isMedia,\n  isNavigator,\n  isNavigatorOpen,\n}) => {\n  return (\n    <Content>\n      <CurrentTimeProvider>\n        <Main>\n          {isMedia ? (\n            <Player\n              painting={painting as IIIFExternalWebResource}\n              resources={resources}\n            />\n          ) : (\n            <ImageViewer {...(painting as IIIFExternalWebResource)} />\n          )}\n          <CollapsibleTrigger data-navigator={isNavigator}>\n            <Button as=\"span\">\n              {isNavigatorOpen ? \"View Media Items\" : \"View Navigator\"}\n            </Button>\n          </CollapsibleTrigger>\n          {items.length > 1 && (\n            <MediaWrapper>\n              <Media items={items} activeItem={0} />\n            </MediaWrapper>\n          )}\n        </Main>\n        {isNavigator && (\n          <Aside>\n            <CollapsibleContent>\n              <Navigator\n                activeCanvas={activeCanvas}\n                defaultResource={resources[0].id as string}\n                resources={resources}\n              />\n            </CollapsibleContent>\n          </Aside>\n        )}\n      </CurrentTimeProvider>\n    </Content>\n  );\n};\n\nexport default ViewerContent;\n", "import React, { useEffect, useState } from \"react\";\nimport { Group } from \"./Media.styled\";\nimport { CanvasEntity } from \"hooks/use-iiif/getCanvasByCriteria\";\nimport { getCanvasByCriteria, getLabel, getThumbnail } from \"hooks/use-iiif\";\nimport {\n  Canvas,\n  CanvasNormalized,\n  ExternalResourceTypes,\n} from \"@iiif/presentation-3\";\nimport { useViewerState, useViewerDispatch } from \"context/viewer-context\";\nimport Thumbnail from \"./Thumbnail\";\nimport { getResourceType } from \"hooks/use-iiif/getResourceType\";\nimport Controls from \"./Controls\";\n\ninterface MediaProps {\n  items: Canvas[];\n  activeItem: number;\n}\n\nconst Media: React.FC<MediaProps> = ({ items }) => {\n  const dispatch: any = useViewerDispatch();\n  const state: any = useViewerState();\n  const { activeCanvas, vault } = state;\n\n  const [filter, setFilter] = useState<String>(\"\");\n  const [mediaItems, setMediaItems] = useState<Array<CanvasEntity>>([]);\n  const [activeIndex, setActiveIndex] = useState<number>(0);\n\n  const scrollRef = React.useRef<HTMLDivElement>(null);\n\n  const motivation = \"painting\";\n  // TODO: Type this as an enum\n  const paintingType: ExternalResourceTypes[] = [\"Image\", \"Sound\", \"Video\"];\n\n  const handleChange = (canvasId: string) => {\n    if (activeCanvas !== canvasId)\n      dispatch({\n        type: \"updateActiveCanvas\",\n        canvasId: canvasId,\n      });\n  };\n\n  useEffect(() => {\n    for (const item of items) {\n      const canvasEntity: CanvasEntity = getCanvasByCriteria(\n        vault,\n        item,\n        motivation,\n        paintingType,\n      );\n\n      if (canvasEntity.annotations.length > 0)\n        setMediaItems((mediaItems) => [...mediaItems, canvasEntity]);\n    }\n  }, []);\n\n  useEffect(() => {\n    mediaItems.forEach((item, index) => {\n      if (item?.canvas)\n        if (item.canvas.id === activeCanvas) setActiveIndex(index);\n    });\n  }, [activeCanvas]);\n\n  useEffect(() => {\n    const element = document.querySelector<HTMLElement>(\n      `[data-canvas=\"${activeIndex}\"]`,\n    ) as Element;\n\n    if (element instanceof HTMLElement && scrollRef.current) {\n      const leftPos =\n        element.offsetLeft -\n        scrollRef.current.offsetWidth / 2 +\n        element.offsetWidth / 2;\n      scrollRef.current.scrollTo({ left: leftPos, behavior: \"smooth\" });\n    }\n  }, [activeIndex]);\n\n  const handleFilter = (value: String) => setFilter(value);\n\n  const handleCanvasToggle = (step: -1 | 1) => {\n    const canvasEntity = mediaItems[activeIndex + step];\n    if (canvasEntity?.canvas) handleChange(canvasEntity.canvas.id);\n  };\n\n  return (\n    <>\n      <Controls\n        handleFilter={handleFilter}\n        handleCanvasToggle={handleCanvasToggle}\n        activeIndex={activeIndex}\n        canvasLength={mediaItems.length}\n      />\n      <Group aria-label=\"select item\" data-testid=\"media\" ref={scrollRef}>\n        {mediaItems\n          .filter((item) => {\n            if (item.canvas?.label) {\n              const label = getLabel(item.canvas.label);\n              if (Array.isArray(label))\n                return label[0].toLowerCase().includes(filter.toLowerCase());\n            }\n          })\n          .map((item, index) => (\n            <Thumbnail\n              canvas={item.canvas as CanvasNormalized}\n              canvasIndex={index}\n              handleChange={handleChange}\n              isActive={activeCanvas === item?.canvas?.id ? true : false}\n              key={item?.canvas?.id}\n              thumbnail={getThumbnail(vault, item, 200, 200)}\n              type={getResourceType(item.annotations[0])}\n            />\n          ))}\n      </Group>\n    </>\n  );\n};\n\nexport default Media;\n", "import * as RadioGroup from \"@radix-ui/react-radio-group\";\nimport { styled } from \"stitches\";\n\nconst Group = styled(RadioGroup.Root, {\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexGrow: \"1\",\n  padding: \"1.618rem 0.618rem 1.618rem 0 \",\n  overflowX: \"scroll\",\n  position: \"relative\",\n  zIndex: \"0\",\n\n  \"@sm\": {\n    padding: \"1rem\",\n  },\n});\n\nexport { Group };\n", "import React from \"react\";\nimport { getLabel } from \"hooks/use-iiif\";\nimport { convertTime } from \"services/utils\";\nimport {\n  CanvasNormalized,\n  IIIFExternalWebResource,\n  InternationalString,\n} from \"@iiif/presentation-3\";\nimport { Icon, Tag } from \"@nulib/design-system\";\nimport { Duration, Item, Spacer, Type } from \"./Thumbnail.styled\";\n\n/**\n * Determine appropriate icon by resource type\n */\ninterface IconPathProps {\n  type: string;\n}\n\nconst IconPath: React.FC<IconPathProps> = ({ type }) => {\n  switch (type) {\n    case \"Sound\":\n      return <Icon.Audio />;\n    case \"Image\":\n      return <Icon.Image />;\n    case \"Video\":\n      return <Icon.Video />;\n    default:\n      return <Icon.Image />;\n  }\n};\n\n/**\n * Render thumbnail for IIIF canvas item\n */\nexport interface ThumbnailProps {\n  canvas: CanvasNormalized;\n  canvasIndex: number;\n  isActive: boolean;\n  thumbnail?: IIIFExternalWebResource;\n  type: string;\n  handleChange: (arg0: string) => void;\n}\n\nconst Thumbnail: React.FC<ThumbnailProps> = ({\n  canvas,\n  canvasIndex,\n  isActive,\n  thumbnail,\n  type,\n  handleChange,\n}) => {\n  const label = getLabel(canvas.label as InternationalString, \"en\") as string;\n\n  return (\n    <Item\n      aria-checked={isActive}\n      data-testid=\"media-thumbnail\"\n      data-canvas={canvasIndex}\n      onClick={() => handleChange(canvas.id)}\n      value={canvas.id}\n    >\n      <figure>\n        <div>\n          {thumbnail?.id && <img src={thumbnail.id} alt={label} />}\n\n          <Type>\n            <Tag isIcon data-testid=\"thumbnail-tag\">\n              <Spacer />\n              <Icon aria-label={type}>\n                <IconPath type={type} />\n              </Icon>\n              {[\"Video\", \"Sound\"].includes(type) && (\n                <Duration>{convertTime(canvas.duration as number)}</Duration>\n              )}\n            </Tag>\n          </Type>\n        </div>\n        <figcaption data-testid=\"fig-caption\">{label}</figcaption>\n      </figure>\n    </Item>\n  );\n};\n\nexport default Thumbnail;\n", "export const cleanTime = (standardNotation: string) => {\n  var array = standardNotation.toString().split(\":\");\n  var hours: number = Math.ceil(parseInt(array[0]));\n  var minutes: number = Math.ceil(parseInt(array[1]));\n  var seconds: string = zeroPad(Math.ceil(parseInt(array[2])), 2);\n\n  // Insure time with Hours is formatted as \"HH:MM:SS\"\n  let formattedMinutes =\n    hours !== 0 && minutes < 10 ? (minutes + \"\").padStart(2, \"0\") : minutes;\n\n  let time: string = `${formattedMinutes}:${seconds}`;\n\n  if (hours !== 0) {\n    time = `${hours}:${time}`;\n  }\n\n  return time;\n};\n\nexport const convertTime = (duration: number) => {\n  const standardNotation: string = new Date(duration * 1000)\n    .toISOString()\n    .substr(11, 8);\n  return cleanTime(standardNotation);\n};\n\nexport const convertTimeToSeconds = (standardNotation: string) => {\n  var hms: Array<string> = standardNotation.split(\":\");\n  var seconds: number = +hms[0] * 60 * 60 + +hms[1] * 60 + +hms[2];\n  return seconds;\n};\n\nconst zeroPad = (num: number, places: number) =>\n  String(num).padStart(places, \"0\");\n", "import * as RadioGroup from \"@radix-ui/react-radio-group\";\nimport { styled } from \"stitches\";\nimport { Tag } from \"@nulib/design-system\";\n\nconst Type = styled(\"span\", {\n  display: \"flex\",\n});\n\nconst Spacer = styled(\"span\", {\n  display: \"flex\",\n  width: \"1.2111rem\",\n  height: \"0.7222rem\",\n});\n\nconst Duration = styled(\"span\", {\n  display: \"inline-flex\",\n  marginLeft: \"5px\",\n  marginBottom: \"-1px\",\n});\n\nconst Item = styled(RadioGroup.Item, {\n  display: \"flex\",\n  flexShrink: \"0\",\n  margin: \"0 1.618rem 0 0\",\n  padding: \"0\",\n  cursor: \"pointer\",\n  background: \"none\",\n  border: \"none\",\n  fontFamily: \"inherit\",\n  lineHeight: \"1.25em\",\n  fontSize: \"1rem\",\n  textAlign: \"left\",\n\n  \"&:last-child\": {\n    marginRight: \"1rem\",\n  },\n\n  \"@sm\": {\n    margin: \"0 1rem 0 0\",\n\n    \"&:last-child\": {\n      marginRight: \"0\",\n    },\n  },\n\n  figure: {\n    margin: \"0\",\n    width: \"161.8px\",\n\n    \"@sm\": {\n      width: \"123px\",\n    },\n\n    \"> div\": {\n      position: \"relative\",\n      display: \"flex\",\n      backgroundColor: \"$secondaryAlt\",\n      width: \"inherit\",\n      height: \"100px\",\n      overflow: \"hidden\",\n      borderRadius: \"3px\",\n      transition: \"$all\",\n\n      \"@sm\": {\n        height: \"76px\",\n      },\n\n      img: {\n        width: \"100%\",\n        height: \"100%\",\n        objectFit: \"cover\",\n        filter: \"blur(0)\",\n        transform: \"scale3d(1, 1, 1)\",\n        transition: \"$all\",\n        color: \"transparent\",\n      },\n\n      [`& ${Type}`]: {\n        position: \"absolute\",\n        right: \"0.5rem\",\n        bottom: \"0.5rem\",\n\n        \"@sm\": {\n          right: \"0\",\n          bottom: \"0\",\n        },\n\n        [`& ${Tag}`]: {\n          margin: \"0\",\n          paddingLeft: \"0\",\n          fontSize: \"0.7222rem\",\n          backgroundColor: \"#000d\",\n          color: \"$secondary\",\n          fill: \"$secondary\",\n\n          \"@sm\": {\n            borderBottomLeftRadius: \"0\",\n            borderTopRightRadius: \"0\",\n          },\n        },\n      },\n    },\n\n    figcaption: {\n      marginTop: \"0.5rem\",\n      color: \"$primaryMuted\",\n      fontWeight: \"400\",\n      fontSize: \"0.8333rem\",\n      display: \"-webkit-box\",\n      overflow: \"hidden\",\n      MozBoxOrient: \"vertical\",\n      WebkitLineClamp: \"5\",\n\n      \"@sm\": {\n        fontSize: \"0.8333rem\",\n      },\n    },\n  },\n\n  \"&[aria-checked='true']\": {\n    figure: {\n      \"> div\": {\n        backgroundColor: \"$primaryAlt\",\n\n        \"&::before\": {\n          position: \"absolute\",\n          zIndex: \"1\",\n          color: \"$secondaryMuted\",\n          content: \"Active Item\",\n          textTransform: \"uppercase\",\n          fontWeight: \"700\",\n          fontSize: \"0.6111rem\",\n          letterSpacing: \"0.03rem\",\n          display: \"flex\",\n          width: \"100%\",\n          height: \"100%\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          textAlign: \"center\",\n          textShadow: \"5px 5px 5px #0003\",\n        },\n\n        img: {\n          opacity: \"0.3\",\n          transform: \"scale3d(1.1, 1.1, 1.1)\",\n          filter: \"blur(2px)\",\n        },\n\n        [`& ${Type}`]: {\n          [`& ${Tag}`]: {\n            backgroundColor: \"$accent\",\n          },\n        },\n      },\n    },\n\n    figcaption: {\n      fontWeight: \"700\",\n      color: \"$primary\",\n    },\n  },\n});\n\nexport { Duration, Item, Spacer, Type };\n", "export const getResourceType = (annotation: any): string => {\n  if (!annotation.body) return \"Image\";\n\n  return annotation.body.type;\n};\n", "import React, { useEffect, useState } from \"react\";\nimport { Button, Direction, Form, Input, Wrapper } from \"./Controls.styled\";\nimport useKeyPress from \"hooks/useKeyPress\";\n\ninterface Props {\n  handleCanvasToggle: (arg0: -1 | 1) => void;\n  handleFilter: (arg0: String) => void;\n  activeIndex: number;\n  canvasLength: number;\n}\nconst PreviousIcon: React.FC = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n      <title>Arrow Back</title>\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"45\"\n        d=\"M244 400L100 256l144-144M120 256h292\"\n      />\n    </svg>\n  );\n};\n\nconst NextIcon: React.FC = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n      <title>Arrow Forward</title>\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"45\"\n        d=\"M268 112l144 144-144 144M392 256H100\"\n      />\n    </svg>\n  );\n};\n\nconst CloseIcon: React.FC = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n      <title>Close</title>\n      <path d=\"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z\" />\n    </svg>\n  );\n};\n\nconst SearchIcon: React.FC = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n      <title>Search</title>\n      <path d=\"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z\" />\n    </svg>\n  );\n};\n\nconst Controls: React.FC<Props> = ({\n  handleCanvasToggle,\n  handleFilter,\n  activeIndex,\n  canvasLength,\n}) => {\n  const [toggleFilter, setToggleFilter] = useState<boolean>(false);\n  const [isNextDisabled, setIsNextDisabled] = useState<boolean>(false);\n  const [isPreviousDisabled, setIsPreviousDisabled] = useState<boolean>(false);\n\n  useEffect(() => {\n    activeIndex === 0\n      ? setIsPreviousDisabled(true)\n      : setIsPreviousDisabled(false);\n    activeIndex === canvasLength - 1\n      ? setIsNextDisabled(true)\n      : setIsNextDisabled(false);\n  }, [activeIndex]);\n\n  /**\n   * dismiss filtering if Escape key is pressed\n   */\n  useKeyPress(\"Escape\", () => {\n    setToggleFilter(false);\n    handleFilter(\"\");\n  });\n\n  /**\n   * reset filtering on manual toggle button press\n   */\n  const handleFilterToggle = () => {\n    setToggleFilter((prevToggleFilter) => !prevToggleFilter);\n    handleFilter(\"\");\n  };\n\n  /**\n   * handle value changes on Input\n   */\n  const handleFilterChange = (event: React.ChangeEvent<HTMLInputElement>) =>\n    handleFilter(event.target.value);\n\n  return (\n    <Wrapper isToggle={toggleFilter}>\n      <Form>\n        {toggleFilter && (\n          <Input autoFocus onChange={handleFilterChange} placeholder=\"Search\" />\n        )}\n        {!toggleFilter && (\n          <Direction>\n            <Button\n              onClick={() => handleCanvasToggle(-1)}\n              disabled={isPreviousDisabled}\n              type=\"button\"\n            >\n              <PreviousIcon />\n            </Button>\n            <span>\n              {activeIndex + 1} of {canvasLength}\n            </span>\n            <Button\n              onClick={() => handleCanvasToggle(1)}\n              disabled={isNextDisabled}\n              type=\"button\"\n            >\n              <NextIcon />\n            </Button>\n          </Direction>\n        )}\n        <Button onClick={handleFilterToggle} type=\"button\">\n          {toggleFilter ? <CloseIcon /> : <SearchIcon />}\n        </Button>\n      </Form>\n    </Wrapper>\n  );\n};\n\nexport default Controls;\n", "import { styled } from \"stitches\";\n\nconst Form = styled(\"div\", {\n  position: \"absolute\",\n  right: \"1rem\",\n  top: \"1rem\",\n  display: \"flex\",\n  justifyContent: \"flex-end\",\n  zIndex: \"1\",\n});\n\nconst Input = styled(\"input\", {\n  flexGrow: \"1\",\n  border: \"none\",\n  backgroundColor: \"$secondaryMuted\",\n  color: \"$primary\",\n  marginRight: \"1rem\",\n  height: \"2rem\",\n  padding: \"0 1rem\",\n  borderRadius: \"2rem\",\n  fontFamily: \"$sans\",\n  fontSize: \"1rem\",\n  lineHeight: \"1rem\",\n  boxShadow: \"inset 1px 1px 2px #0003\",\n\n  \"&::placeholder\": {\n    color: \"$primaryMuted\",\n  },\n});\n\nconst Button = styled(\"button\", {\n  display: \"flex\",\n  background: \"none\",\n  border: \"none\",\n  width: \"2rem !important\",\n  height: \"2rem !important\",\n  padding: \"0\",\n  margin: \"0\",\n  fontWeight: \"700\",\n  borderRadius: \"2rem\",\n  backgroundColor: \"$accent\",\n  color: \"$secondary\",\n  cursor: \"pointer\",\n  boxSizing: \"content-box !important\",\n  transition: \"$all\",\n\n  svg: {\n    height: \"60%\",\n    width: \"60%\",\n    padding: \"20%\",\n    fill: \"$secondary\",\n    stroke: \"$secondary\",\n    opacity: \"1\",\n    filter: \"drop-shadow(5px 5px 5px #000D)\",\n    boxSizing: \"inherit\",\n    transition: \"$all\",\n  },\n\n  \"&:disabled\": {\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\",\n    svg: { opacity: \"0.25\" },\n  },\n});\n\nconst Direction = styled(\"div\", {\n  display: \"flex\",\n  marginRight: \"0.618rem\",\n  backgroundColor: \"$accentAlt\",\n  borderRadius: \"2rem\",\n  boxShadow: \"5px 5px 5px #0003\",\n  color: \"$secondary\",\n  alignItems: \"center\",\n\n  \"> span\": {\n    display: \"flex\",\n    margin: \"0 0.5rem\",\n    fontSize: \"0.7222rem\",\n  },\n\n  [`& ${Button}`]: {\n    // boxShadow: \"none\",\n  },\n});\n\nconst Wrapper = styled(\"div\", {\n  display: \"flex\",\n  position: \"relative\",\n  zIndex: \"1\",\n  width: \"100%\",\n  padding: \"0\",\n  transition: \"$all\",\n\n  variants: {\n    isToggle: {\n      true: {\n        paddingTop: \"2.618rem\",\n\n        [`& ${Form}`]: {\n          width: \"calc(100% - 2rem)\",\n\n          \"@sm\": {\n            width: \"calc(100% - 2rem)\",\n          },\n        },\n      },\n    },\n  },\n});\n\nexport { Button, Direction, Form, Input, Wrapper };\n", "import { useEffect } from \"react\";\n/**\n * useKeyPress\n * @param {string} key - the name of the key to respond to, compared against event.key\n * @param {function} action - the action to perform on key press\n */\nconst useKeyPress = (key: string, action: () => void) => {\n  useEffect(() => {\n    function onKeyup(e: KeyboardEvent) {\n      if (e.key === key) action();\n    }\n    window.addEventListener(\"keyup\", onKeyup);\n    return () => window.removeEventListener(\"keyup\", onKeyup);\n  }, []);\n};\n\nexport default useKeyPress;\n", "import React, { useEffect, useState } from \"react\";\nimport { InternationalString } from \"@iiif/presentation-3\";\nimport { Content, List, Scroll, Trigger, Wrapper } from \"./Navigator.styled\";\nimport { LabeledResource } from \"hooks/use-iiif/getSupplementingResources\";\nimport { getLabel } from \"hooks/use-iiif\";\nimport Resource from \"./Resource\";\n\ninterface NavigatorProps {\n  activeCanvas: string;\n  defaultResource: string;\n  resources?: Array<LabeledResource>;\n}\n\nexport const Navigator: React.FC<NavigatorProps> = ({\n  activeCanvas,\n  defaultResource,\n  resources,\n}) => {\n  const [activeResource, setActiveResource] = useState<string>(defaultResource);\n\n  useEffect(() => {\n    setActiveResource(defaultResource);\n  }, [activeCanvas, resources]);\n\n  const handleValueChange = (value: string) => {\n    setActiveResource(value);\n  };\n\n  if (!resources) return <></>;\n\n  return (\n    <Wrapper\n      data-testid=\"navigator\"\n      defaultValue={defaultResource}\n      onValueChange={handleValueChange}\n      orientation=\"horizontal\"\n      value={activeResource}\n    >\n      <List aria-label=\"select chapter\" data-testid=\"navigator-list\">\n        {resources.map(({ id, label }) => (\n          <Trigger key={id} value={id as string}>\n            {getLabel(label as InternationalString, \"en\")}\n          </Trigger>\n        ))}\n      </List>\n      <Scroll>\n        {resources.map((resource) => {\n          return (\n            <Content key={resource.id} value={resource.id as string}>\n              <Resource resource={resource} />\n            </Content>\n          );\n        })}\n      </Scroll>\n    </Wrapper>\n  );\n};\n\nexport default Navigator;\n", "import * as Tabs from \"@radix-ui/react-tabs\";\nimport { styled } from \"stitches\";\n\nconst Wrapper = styled(Tabs.Root, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\",\n  height: \"100%\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  position: \"relative\",\n  zIndex: \"1\",\n  boxShadow: \"-5px -5px 5px #00000011\",\n\n  \"@sm\": {\n    marginTop: \"0.5rem\",\n    boxShadow: \"none\",\n  },\n\n  \"&:after\": {\n    position: \"absolute\",\n    bottom: 0,\n    content: \"\",\n    width: \"100%\",\n    height: \"1rem\",\n    backgroundImage: `linear-gradient(0deg, #FFFFFF 0%, #FFFFFF00 100%)`,\n    zIndex: 1,\n\n    \"@sm\": {\n      backgroundImage: \"none\",\n    },\n  },\n});\n\nconst List = styled(Tabs.List, {\n  display: \"flex\",\n  flexGrow: \"0\",\n  margin: \"0 1.618rem\",\n  borderBottom: \"4px solid $secondaryAlt\",\n  backgroundColor: \"$secondary\",\n\n  \"@sm\": {\n    margin: \"0 1rem\",\n  },\n});\n\nconst Trigger = styled(Tabs.Trigger, {\n  display: \"flex\",\n  position: \"relative\",\n  padding: \"0.5rem 1rem\",\n  background: \"none\",\n  backgroundColor: \"transparent\",\n  color: \"$primaryMuted\",\n  border: \"none\",\n  fontFamily: \"inherit\",\n  fontSize: \"1rem\",\n  marginRight: \"1rem\",\n  lineHeight: \"1rem\",\n  whiteSpace: \"nowrap\",\n  cursor: \"pointer\",\n  fontWeight: 700,\n  transition: \"$all\",\n\n  \"&::after\": {\n    width: \"0\",\n    height: \"4px\",\n    content: \"\",\n    backgroundColor: \"$primaryMuted\",\n    position: \"absolute\",\n    bottom: \"-4px\",\n    left: \"0\",\n    transition: \"$all\",\n  },\n\n  \"&:hover\": {\n    color: \"$primary\",\n  },\n\n  \"&[data-state='active']\": {\n    color: \"$accent\",\n\n    \"&::after\": {\n      width: \"100%\",\n      backgroundColor: \"$accent\",\n    },\n  },\n});\n\nconst Content = styled(Tabs.Content, {\n  display: \"flex\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  position: \"absolute\",\n  top: \"0\",\n  left: \"0\",\n  \"&[data-state='active']\": {\n    width: \"100%\",\n    height: \"calc(100% - 2rem)\",\n    padding: \"1rem 0\",\n  },\n});\n\nconst Scroll = styled(\"div\", {\n  position: \"relative\",\n  height: \"100%\",\n  width: \"100%\",\n  overflowY: \"scroll\",\n});\n\nexport { Content, List, Scroll, Trigger, Wrapper };\n", "import React, { useEffect } from \"react\";\nimport { getLabel } from \"hooks/use-iiif\";\nimport { InternationalString } from \"@iiif/presentation-3\";\nimport { Group } from \"./Cue.styled\";\nimport useWebVtt, {\n  NodeWebVttCue,\n  NodeWebVttCueNested,\n} from \"hooks/use-webvtt\";\nimport Menu from \"components/Navigator/Menu\";\n\n// @ts-ignore\nimport { parse } from \"node-webvtt\";\n\ninterface Resource {\n  resource: any;\n}\n\nconst Resource: React.FC<Resource> = ({ resource }) => {\n  const [cues, setCues] = React.useState<Array<NodeWebVttCueNested>>([]);\n  const { id, label } = resource;\n  const { createNestedCues, orderCuesByTime } = useWebVtt();\n\n  useEffect(() => {\n    fetch(id, {\n      headers: {\n        \"Content-Type\": \"text/plain\",\n        Accept: \"application/json\",\n      },\n    })\n      .then((response) => response.text())\n      .then((data) => {\n        const flatCues = parse(data).cues as unknown as Array<NodeWebVttCue>;\n        const orderedCues = orderCuesByTime(flatCues);\n        const nestedCues = createNestedCues(orderedCues);\n        setCues(nestedCues);\n      })\n      .catch((error) => console.error(id, error.toString()));\n  }, [id]);\n\n  return (\n    <Group\n      aria-label={`navigate ${getLabel(label as InternationalString, \"en\")}`}\n    >\n      <Menu items={cues} />\n    </Group>\n  );\n};\n\nexport default Resource;\n", "import * as RadioGroup from \"@radix-ui/react-radio-group\";\nimport { styled, keyframes } from \"stitches\";\n\nconst spin = keyframes({\n  from: { transform: \"rotate(360deg)\" },\n  to: { transform: \"rotate(0deg)\" },\n});\n\nexport const Group = styled(RadioGroup.Root, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\",\n});\n\nexport const Item = styled(RadioGroup.Item, {\n  position: \"relative\",\n  cursor: \"pointer\",\n  display: \"flex\",\n  width: \"100%\",\n  justifyContent: \"space-between\",\n  textAlign: \"left\",\n  margin: \"0\",\n  padding: \"0.5rem 1.618rem\",\n  fontFamily: \"inherit\",\n  lineHeight: \"1.25em\",\n  fontSize: \"1rem\",\n  color: \"$primaryMuted\",\n  border: \"none\",\n  background: \"none\",\n\n  \"@sm\": {\n    padding: \"0.5rem 1rem\",\n    fontSize: \"0.8333rem\",\n  },\n\n  \"&::before\": {\n    content: \"\",\n    width: \"12px\",\n    height: \"12px\",\n    borderRadius: \"12px\",\n    position: \"absolute\",\n    backgroundColor: \"$primaryMuted\",\n    opacity: \"0\",\n    left: \"8px\",\n    marginTop: \"3px\",\n    boxSizing: \"content-box\",\n\n    \"@sm\": {\n      content: \"unset\",\n    },\n  },\n\n  \"&::after\": {\n    content: \"\",\n    width: \"4px\",\n    height: \"6px\",\n    position: \"absolute\",\n    backgroundColor: \"$secondary\",\n    opacity: \"0\",\n    clipPath: \"polygon(100% 50%, 0 100%, 0 0)\",\n    left: \"13px\",\n    marginTop: \"6px\",\n    boxSizing: \"content-box\",\n\n    \"@sm\": {\n      content: \"unset\",\n    },\n  },\n\n  strong: {\n    marginLeft: \"1rem\",\n  },\n\n  \"&:hover\": {\n    color: \"$accent\",\n\n    \"&::before\": {\n      backgroundColor: \"$accent\",\n      opacity: \"1\",\n    },\n\n    \"&::after\": {\n      content: \"\",\n      width: \"4px\",\n      height: \"6px\",\n      position: \"absolute\",\n      backgroundColor: \"$secondary\",\n      clipPath: \"polygon(100% 50%, 0 100%, 0 0)\",\n      opacity: \"1\",\n    },\n  },\n\n  \"&[aria-checked='true']\": {\n    color: \"$primary\",\n    backgroundColor: \"$secondaryMuted\",\n    fontFamily: \"$sansBold\",\n\n    \"&::before\": {\n      content: \"\",\n      width: \"6px\",\n      height: \"6px\",\n      position: \"absolute\",\n      backgroundColor: \"transparent\",\n      border: \"3px solid $accentMuted\",\n      borderRadius: \"12px\",\n      left: \"8px\",\n      marginTop: \"4px\",\n      opacity: \"1\",\n      animation: \"1s linear infinite\",\n      animationName: spin,\n      boxSizing: \"content-box\",\n\n      \"@sm\": {\n        content: \"unset\",\n      },\n    },\n\n    \"&::after\": {\n      content: \"\",\n      width: \"6px\",\n      height: \"6px\",\n      position: \"absolute\",\n      backgroundColor: \"transparent\",\n      border: \"3px solid $accent\",\n      clipPath: \"polygon(100% 0, 100% 100%, 0 0)\",\n      borderRadius: \"12px\",\n      left: \"8px\",\n      marginTop: \"4px\",\n      opacity: \"1\",\n      animation: \"1.5s linear infinite\",\n      animationName: spin,\n      boxSizing: \"content-box\",\n\n      \"@sm\": {\n        content: \"unset\",\n      },\n    },\n  },\n});\n", "import { v4 as uuidv4 } from \"uuid\";\n\nexport interface NodeWebVttCue {\n  identifier?: string;\n  start: number;\n  end: number;\n  text: string;\n  styles?: string;\n}\nexport interface NodeWebVttCueNested extends NodeWebVttCue {\n  children?: Array<NodeWebVttCueNested>;\n}\n\nconst useWebVtt = () => {\n  function addIdentifiersToParsedCues(\n    cues: Array<NodeWebVttCue>,\n  ): Array<NodeWebVttCue> {\n    const newCues = cues.map((cue) => {\n      const identifier = cue.identifier || uuidv4();\n      return { ...cue, identifier };\n    });\n    return newCues;\n  }\n\n  function createNestedCues(flat: Array<NodeWebVttCue>): Array<NodeWebVttCue> {\n    // Add identifier values to any cues which don't have them\n    const idCues = addIdentifiersToParsedCues(flat);\n\n    function getNestedChildren(\n      arr: Array<NodeWebVttCueNested>,\n      parent: string | null | undefined,\n    ) {\n      const out: Array<NodeWebVttCueNested> = [];\n\n      arr.forEach((item) => {\n        // Grab parent cues if they exist\n        const currentItemParents = arr.filter((arrItem) => {\n          return (\n            item.start >= arrItem.start &&\n            item.end <= arrItem.end &&\n            item.identifier !== arrItem.identifier\n          );\n        });\n\n        // An item in the flat list could have multiple parents,\n        // so lets find the most specific parent.  Let's sort the parents\n        // by smallest window of time between \"start\" and \"end\"\n        // values.  Then we pick the first element, which could be \"undefined\"\n        // for root level cues.\n        const currentItemParent = currentItemParents.sort((a, b) => {\n          const aDuration = a.end - a.start;\n          const bDuration = b.end - b.start;\n          if (aDuration === bDuration) return 0;\n          return aDuration < bDuration ? -1 : 1;\n        })[0];\n\n        // Is the current item's parent same as target parent?\n        if (\n          (!currentItemParent && !parent) ||\n          currentItemParent?.identifier === parent\n        ) {\n          // Find children of the current item\n          const children = getNestedChildren(arr, item.identifier);\n\n          if (children.length) {\n            item.children = children;\n          }\n\n          out.push(item);\n        }\n      });\n\n      return out;\n    }\n\n    const nestedCues = getNestedChildren(idCues, null);\n    return nestedCues;\n  }\n\n  /**\n   * Is a cue a child of another cue\n   * @param cue Object\n   * @param cues Array\n   * @returns Boolean\n   */\n  function isChild(\n    cue: NodeWebVttCue,\n    cues: Array<NodeWebVttCue> = [],\n  ): boolean {\n    return cues.some(\n      (currentCue) =>\n        cue.start >= currentCue.start && cue.end <= currentCue.end,\n    );\n  }\n\n  /**\n   * Sort Cues by cue start time\n   * @param cues\n   * @returns Array\n   */\n  function orderCuesByTime(\n    cues: Array<NodeWebVttCue> = [],\n  ): Array<NodeWebVttCue> {\n    return cues.sort((cue1, cue2) => cue1.start - cue2.start);\n  }\n\n  return {\n    addIdentifiersToParsedCues,\n    createNestedCues,\n    isChild,\n    orderCuesByTime,\n  };\n};\n\nexport default useWebVtt;\n", "import React from \"react\";\nimport { NodeWebVttCueNested } from \"hooks/use-webvtt\";\nimport Cue from \"components/Navigator/Cue\";\nimport { MenuStyled } from \"components/Navigator/Menu.styled\";\n\ninterface MenuProps {\n  items: Array<NodeWebVttCueNested>;\n}\n\nconst Menu: React.FC<MenuProps> = ({ items }) => {\n  return (\n    <MenuStyled>\n      {items.map(({ text, start, end, children: cueChildren, identifier }) => {\n        return (\n          <li key={identifier}>\n            <Cue label={text} start={start} end={end} />\n            {cueChildren && <Menu items={cueChildren} />}\n          </li>\n        );\n      })}\n    </MenuStyled>\n  );\n};\n\nexport default Menu;\n", "import React from \"react\";\nimport { Item } from \"./Cue.styled\";\nimport { convertTime } from \"services/utils\";\nimport { CurrentTimeContext } from \"context/current-time-context\";\n\ninterface Props {\n  label: string;\n  start: number;\n  end: number;\n}\n\nconst Cue: React.FC<Props> = ({ label, start, end }) => {\n  const { currentTime, updateStartTime } = React.useContext(CurrentTimeContext);\n  const isActive: boolean = start <= currentTime && currentTime < end;\n\n  const handleClick = () => {\n    updateStartTime(start);\n  };\n\n  return (\n    <Item\n      aria-checked={isActive}\n      data-testid=\"navigator-cue\"\n      onClick={handleClick}\n      value={label}\n    >\n      {label}\n      <strong>{convertTime(start)}</strong>\n    </Item>\n  );\n};\n\nexport default Cue;\n", "import React from \"react\";\n\nexport type CurrentTimeContextShape = {\n  currentTime: number;\n  startTime: number;\n  updateStartTime: (t: number) => void;\n  updateCurrentTime: (t: number) => void;\n};\n\nconst defaultValue: CurrentTimeContextShape = {\n  currentTime: 0,\n  startTime: 0,\n  updateStartTime: () => {},\n  updateCurrentTime: () => {},\n};\nexport const CurrentTimeContext = React.createContext(defaultValue);\n\nexport const CurrentTimeProvider = ({\n  children,\n}: {\n  children: React.ReactNode;\n}) => {\n  const [currentTime, setCurrentTime] = React.useState(\n    defaultValue.currentTime,\n  );\n  const [startTime, setStartTime] = React.useState(0);\n  const updateStartTime = (t: number) => setStartTime(t);\n  const updateCurrentTime = (t: number) => setCurrentTime(t);\n\n  return (\n    <CurrentTimeContext.Provider\n      value={{ currentTime, startTime, updateStartTime, updateCurrentTime }}\n    >\n      {children}\n    </CurrentTimeContext.Provider>\n  );\n};\n", "import { styled } from \"stitches\";\nimport { Item } from \"components/Navigator/Cue.styled\";\n\nexport const MenuStyled = styled(\"ul\", {\n  listStyle: \"none\",\n  paddingLeft: \"1rem\",\n  position: \"relative\",\n\n  \"&&:first-child\": {\n    paddingLeft: \"0\",\n  },\n\n  \"& li ul\": {\n    [`& ${Item}`]: {\n      backgroundColor: \"unset\",\n\n      \"&::before\": {\n        content: \"none\",\n      },\n      \"&::after\": {\n        content: \"none\",\n      },\n    },\n  },\n\n  \"&:first-child\": {\n    margin: \"0 0 1.618rem\",\n  },\n});\n", "import React from \"react\";\nimport Hls from \"hls.js\";\nimport { PlayerWrapper } from \"./Player.styled\";\nimport { IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport { LabeledResource } from \"hooks/use-iiif/getSupplementingResources\";\nimport AudioVisualizer from \"./AudioVisualizer\";\nimport { CurrentTimeContext } from \"context/current-time-context\";\nimport { useViewerState } from \"context/viewer-context\";\nimport Track from \"./Track\";\nimport {\n  getAccompanyingCanvasImage,\n  getCanvasByCriteria,\n} from \"hooks/use-iiif\";\n\n// Set referrer header as a NU domain: ie. meadow.rdc-staging.library.northwestern.edu\n\ninterface PlayerProps {\n  painting: IIIFExternalWebResource;\n  resources: LabeledResource[];\n}\n\nconst Player: React.FC<PlayerProps> = ({ painting, resources }) => {\n  const playerRef = React.useRef(null);\n  const isAudio = painting?.format?.includes(\"audio/\");\n\n  const { startTime, updateCurrentTime } = React.useContext(CurrentTimeContext);\n\n  const viewerState: any = useViewerState();\n  const { activeCanvas, configOptions, vault } = viewerState;\n\n  /**\n   * Get active canvas full object\n   */\n  const activeCanvasObject = getCanvasByCriteria(\n    vault,\n    { id: activeCanvas, type: \"Canvas\" },\n    \"painting\",\n    [\"Image\"],\n  );\n\n  const posterImage = getAccompanyingCanvasImage(\n    activeCanvasObject.accompanyingCanvas,\n  );\n\n  /**\n   * HLS.js binding for .m3u8 files\n   * STAGING and PRODUCTION environments only\n   */\n  React.useEffect(() => {\n    /**\n     * Check that IIIF content resource ID exists and\n     * we have a reffed <video> for attaching HLS\n     */\n    if (!painting.id || !playerRef.current) return;\n\n    /**\n     * Eject HLS attachment if file extension from\n     * the IIIF content resource ID is not .m3u8\n     */\n    if (painting.id.split(\".\").pop() !== \"m3u8\") return;\n\n    // Bind hls.js package to our <video /> element and then load the media source\n    const hls = new Hls();\n    hls.attachMedia(playerRef.current);\n    hls.on(Hls.Events.MEDIA_ATTACHED, function () {\n      hls.loadSource(painting.id as string);\n    });\n\n    // Handle errors\n    hls.on(Hls.Events.ERROR, function (event, data) {\n      if (data.fatal) {\n        switch (data.type) {\n          case Hls.ErrorTypes.NETWORK_ERROR:\n            // try to recover network error\n            console.error(\n              `fatal ${event} network error encountered, try to recover`,\n            );\n            hls.startLoad();\n            break;\n          case Hls.ErrorTypes.MEDIA_ERROR:\n            console.error(\n              `fatal ${event} media error encountered, try to recover`,\n            );\n            hls.recoverMediaError();\n            break;\n          default:\n            // cannot recover\n            hls.destroy();\n            break;\n        }\n      }\n    });\n\n    return () => {\n      if (hls) {\n        hls.detachMedia();\n        hls.destroy();\n        updateCurrentTime(0);\n      }\n    };\n  }, [painting.id]);\n\n  React.useEffect(() => {\n    let video: any = playerRef.current;\n    if (video) video.currentTime = startTime;\n\n    if (startTime !== 0) video.play();\n  }, [startTime]);\n\n  const handlePlay = () => {\n    let video: any = playerRef.current;\n    if (video) {\n      video.ontimeupdate = (event: any) => {\n        updateCurrentTime(event.target.currentTime);\n      };\n    }\n  };\n\n  return (\n    <PlayerWrapper>\n      <video\n        id=\"clover-iiif-video\"\n        key={painting.id}\n        ref={playerRef}\n        controls\n        height={painting.height}\n        width={painting.width}\n        onPlay={handlePlay}\n        crossOrigin=\"anonymous\"\n        poster={posterImage}\n      >\n        <source src={painting.id} type={painting.format} />\n        {resources.length > 0 &&\n          resources.map((resource) => (\n            <Track\n              resource={resource}\n              ignoreCaptionLabels={configOptions.ignoreCaptionLabels}\n              key={resource.id}\n            />\n          ))}\n        Sorry, your browser doesn't support embedded videos.\n      </video>\n\n      {isAudio && <AudioVisualizer ref={playerRef} />}\n    </PlayerWrapper>\n  );\n};\n\nexport default Player;\n", "import { styled } from \"stitches\";\n\nexport const PlayerWrapper = styled(\"div\", {\n  position: \"relative\",\n  backgroundColor: \"$primaryAlt\",\n  display: \"flex\",\n  flexGrow: \"0\",\n  flexShrink: \"1\",\n  maxHeight: \"450px\",\n  zIndex: \"1\",\n\n  video: {\n    backgroundColor: \"transparent\",\n    display: \"flex\",\n    position: \"relative\",\n    objectFit: \"contain\",\n    width: \"100%\",\n    height: \"100%\",\n    zIndex: \"1\",\n  },\n});\n", "import React from \"react\";\nimport { AudioVisualizerWrapper } from \"./AudioVisualizer.styled\";\n\nconst AudioVisualizer = React.forwardRef((_props, ref: any) => {\n  const canvasRef = React.useRef<HTMLCanvasElement>(null);\n\n  React.useEffect(() => {\n    if (!ref) return;\n    // Add a callback fn to the `<video>` onplay event\n    ref.current.onplay = audioVisualizer;\n  }, [ref]);\n\n  function audioVisualizer() {\n    const video = ref.current;\n    const context = new AudioContext();\n    const src = context.createMediaElementSource(video);\n    let analyser = context.createAnalyser();\n\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    canvas.width = video.offsetWidth;\n    canvas.height = video.offsetHeight;\n    const ctx = canvas.getContext(\"2d\");\n\n    src.connect(analyser);\n    analyser.connect(context.destination);\n\n    analyser.fftSize = 256;\n\n    const bufferLength = analyser.frequencyBinCount;\n    const dataArray = new Uint8Array(bufferLength);\n\n    setInterval(function () {\n      renderFrame(\n        analyser,\n        ctx,\n        bufferLength,\n        dataArray,\n        canvas.width,\n        canvas.height,\n      );\n    }, 20);\n  }\n\n  function renderFrame(\n    analyser: any,\n    ctx: any,\n    bufferLength: number,\n    dataArray: Uint8Array,\n    width: number,\n    height: number,\n  ) {\n    let barWidth = (width / bufferLength) * 2.6;\n    let barHeight;\n    let x = 0;\n\n    analyser.getByteFrequencyData(dataArray);\n\n    ctx.fillStyle = \"#000000\";\n    ctx.fillRect(0, 0, width, height);\n\n    for (let i = 0; i < bufferLength; i++) {\n      barHeight = dataArray[i] * 2;\n      ctx.fillStyle = `rgba(${78}, 42, 132, 1)`;\n      ctx.fillRect(x, height - barHeight, barWidth, barHeight);\n\n      x += barWidth + 6;\n    }\n  }\n\n  return <AudioVisualizerWrapper ref={canvasRef} />;\n});\n\nexport default AudioVisualizer;\n", "import { styled } from \"stitches\";\n\nexport const AudioVisualizerWrapper = styled(\"canvas\", {\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n});\n", "import React from \"react\";\nimport { InternationalString } from \"@iiif/presentation-3\";\nimport { LabeledResource } from \"hooks/use-iiif/getSupplementingResources\";\nimport { getLabel } from \"hooks/use-iiif\";\n\nexport interface TrackProps {\n  resource: LabeledResource;\n  ignoreCaptionLabels: string[];\n}\n\nconst Track: React.FC<TrackProps> = ({ resource, ignoreCaptionLabels }) => {\n  const label = getLabel(resource.label as InternationalString, \"en\") as any;\n\n  const isIgnored = label.some((value: string) =>\n    ignoreCaptionLabels.includes(value),\n  );\n\n  if (isIgnored) return null;\n\n  return (\n    <track\n      key={resource.id}\n      src={resource.id as string}\n      label={label}\n      srcLang=\"en\"\n      data-testid=\"player-track\"\n    />\n  );\n};\n\nexport default Track;\n", "import React, { useEffect, useState } from \"react\";\nimport OpenSeadragon, { Viewer } from \"openseadragon\";\nimport { IIIFExternalWebResource, ImageService } from \"@iiif/presentation-3\";\nimport { Navigator, Viewport, Wrapper } from \"./ImageViewer.styled\";\nimport Controls from \"./Controls\";\nimport { getInfoResponse } from \"services/iiif\";\n\nconst ImageViewer: React.FC<IIIFExternalWebResource> = ({ service }) => {\n  const [openSeadragonInstance, setOpenSeadragonInstance] = useState<Viewer>();\n  const [imageService, setImageService] = useState<ImageService>();\n\n  /**\n   * Initiate OpenSeadragon\n   */\n  useEffect(() => {\n    initOpenSeadragon();\n    return () => {\n      openSeadragonInstance?.destroy();\n    };\n  }, []);\n\n  /**\n   * Set IIIF image service from given content resource\n   */\n  useEffect(() => {\n    if (Array.isArray(service))\n      setImageService(service[0] as any as ImageService);\n  }, [service]);\n\n  /**\n   * Loads tileSource of current canvas from IIIF image service\n   */\n  useEffect(() => {\n    if (imageService) {\n      let id: string | undefined;\n      \"@id\" in imageService\n        ? (id = imageService[\"@id\"])\n        : (id = imageService.id);\n\n      if (id)\n        getInfoResponse(id).then((tileSource) =>\n          openSeadragonInstance?.open(tileSource),\n        );\n    }\n  }, [openSeadragonInstance, imageService]);\n\n  /**\n   * Set OpenSeadragon instance\n   */\n  function initOpenSeadragon() {\n    const controls: object = {\n      homeButton: \"zoomReset\",\n      showFullPageControl: false,\n      zoomInButton: \"zoomIn\",\n      zoomOutButton: \"zoomOut\",\n    };\n\n    const navigator: object = {\n      showNavigator: true,\n      navigatorBorderColor: \"transparent\",\n      navigatorId: \"openseadragon-navigator\",\n    };\n\n    setOpenSeadragonInstance(\n      OpenSeadragon({\n        id: \"openseadragon-viewport\",\n        loadTilesWithAjax: true,\n        ...controls,\n        ...navigator,\n      }),\n    );\n  }\n\n  return (\n    <Wrapper data-testid=\"image-viewer\">\n      <Controls />\n      <Navigator id=\"openseadragon-navigator\" />\n      <Viewport id=\"openseadragon-viewport\" />\n    </Wrapper>\n  );\n};\n\nexport default ImageViewer;\n", "import { styled } from \"stitches\";\n\nconst Navigator = styled(\"div\", {\n  position: \"absolute !important\",\n  zIndex: \"1\",\n  top: \"1rem\",\n  left: \"1rem\",\n  width: \"161.8px\",\n  height: \"100px\",\n  backgroundColor: \"#000D\",\n  boxShadow: \"5px 5px 5px #0002\",\n  borderRadius: \"3px\",\n\n  \"#openseadragon-navigator-displayregion\": {\n    border: \" 3px solid $accent !important\",\n    boxShadow: \"0 0 3px #0006\",\n  },\n\n  \"@sm\": {\n    width: \"123px\",\n    height: \"76px\",\n  },\n});\n\nconst Viewport = styled(\"div\", {\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  zIndex: \"0\",\n});\n\nconst Wrapper = styled(\"div\", {\n  width: \"100%\",\n  height: \"450px\",\n  background: \"black\",\n  backgroundSize: \"contain\",\n  color: \"white\",\n  position: \"relative\",\n  zIndex: \"1\",\n  overflow: \"hidden\",\n});\n\nexport { Navigator, Viewport, Wrapper };\n", "import React from \"react\";\nimport Button from \"./Button\";\nimport { Wrapper } from \"./Controls.styled\";\n\nconst Controls: React.FC = () => {\n  const ZoomIn = () => {\n    return (\n      <path\n        strokeLinecap=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"45\"\n        d=\"M256 112v288M400 256H112\"\n      />\n    );\n  };\n\n  const ZoomOut = () => {\n    return (\n      <path\n        strokeLinecap=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"45\"\n        d=\"M400 256H112\"\n      />\n    );\n  };\n\n  const ZoomReset = () => {\n    return (\n      <>\n        <path\n          fill=\"none\"\n          strokeLinecap=\"round\"\n          strokeMiterlimit=\"10\"\n          strokeWidth=\"45\"\n          d=\"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128\"\n        />\n        <path d=\"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z\" />\n      </>\n    );\n  };\n\n  return (\n    <Wrapper data-testid=\"openseadragon-controls\" id=\"openseadragon-controls\">\n      <Button id=\"zoomIn\" label=\"zoom in\">\n        <ZoomIn />\n      </Button>\n      <Button id=\"zoomOut\" label=\"zoom in\">\n        <ZoomOut />\n      </Button>\n      <Button id=\"zoomReset\" label=\"reset zoom\">\n        <ZoomReset />\n      </Button>\n    </Wrapper>\n  );\n};\n\nexport default Controls;\n", "import React from \"react\";\nimport { Item } from \"./Button.styled\";\n\ninterface ButtonProps {\n  id: string;\n  label: string;\n  children: React.ReactChild;\n}\n\nconst Button: React.FC<ButtonProps> = ({ id, label, children }) => {\n  return (\n    <Item id={id} data-testid=\"openseadragon-button\">\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        aria-labelledby={`${id}-svg-title`}\n        data-testid=\"openseadragon-button-svg\"\n        focusable=\"false\"\n        viewBox=\"0 0 512 512\"\n        role=\"img\"\n      >\n        <title id={`${id}-svg-title`}>{label}</title>\n        {children}\n      </svg>\n    </Item>\n  );\n};\n\nexport default Button;\n", "import { styled } from \"@stitches/react\";\n\nconst Item = styled(\"button\", {\n  display: \"flex\",\n  height: \"2rem\",\n  width: \"2rem\",\n  borderRadius: \"2rem\",\n  padding: \"0\",\n  margin: \"0\",\n  fontFamily: \"inherit\",\n  background: \"none\",\n  border: \"none\",\n  color: \"white\",\n  cursor: \"pointer\",\n  marginLeft: \"0.618rem\",\n  backgroundColor: \"#000D\",\n  filter: \"drop-shadow(5px 5px 5px #0006)\",\n  transition: \"$all\",\n  boxSizing: \"content-box !important\",\n\n  svg: {\n    height: \"60%\",\n    width: \"60%\",\n    padding: \"20%\",\n    fill: \"$secondary\",\n    stroke: \"$secondary\",\n    filter: \"drop-shadow(5px 5px 5px #000D)\",\n    transition: \"$all\",\n    boxSizing: \"inherit\",\n  },\n\n  \"&:hover, &:focus\": {\n    backgroundColor: \"$accent\",\n  },\n\n  \"&#zoomReset\": {\n    \"&:hover, &:focus\": {\n      svg: {\n        rotate: \"45deg\",\n      },\n    },\n  },\n});\n\nexport { Item };\n", "import { styled } from \"@stitches/react\";\n\nconst Wrapper = styled(\"div\", {\n  position: \"absolute\",\n  zIndex: \"1\",\n  top: \"1rem\",\n  right: \"1rem\",\n});\n\nexport { Wrapper };\n", "export const getInfoResponse = (id: string) =>\n  fetch(`${id.replace(/\\/$/, \"\")}/info.json`)\n    .then((response) => response.json())\n    .then((json) => json)\n    .catch((error: any) => {\n      console.error(\n        `The IIIF tilesource ${id.replace(\n          /\\/$/,\n          \"\",\n        )}/info.json failed to load: ${error}`,\n      );\n    });\n", "import React from \"react\";\nimport {\n  ErrorFallbackStyled,\n  ErrorBody,\n  Headline,\n} from \"components/Viewer/ErrorFallback.styled\";\n\ninterface ErrorFallbackProps {\n  error: Error;\n}\n\nconst ErrorFallback: React.FC<ErrorFallbackProps> = ({ error }) => {\n  const { message } = error;\n\n  return (\n    <ErrorFallbackStyled role=\"alert\">\n      <Headline data-testid=\"headline\">Something went wrong</Headline>\n      {message && <ErrorBody>{`Error message: ${message}`} </ErrorBody>}\n    </ErrorFallbackStyled>\n  );\n};\n\nexport default ErrorFallback;\n", "import { styled } from \"stitches\";\n\nconst ErrorFallbackStyled = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n});\n\nconst Headline = styled(\"p\", {\n  fontFamily: \"$display\",\n  fontWeight: \"bold\",\n  fontSize: \"x-large\",\n});\n\nconst ErrorBody = styled(\"span\", {\n  fontSize: \"medium\",\n});\n\nexport { ErrorFallbackStyled, ErrorBody, Headline };\n"],
  "mappings": "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",
  "names": []
}
