{
  "version": 3,
  "sources": ["../node_modules/typesafe-actions/src/utils/validation.ts", "../node_modules/typesafe-actions/src/action.ts", "../node_modules/typesafe-actions/src/create-custom-action.ts", "../node_modules/typesafe-actions/src/create-action.ts", "../node_modules/typesafe-actions/src/get-type.ts", "../node_modules/typesafe-actions/src/deprecated/create-custom-action.ts", "../node_modules/typesafe-actions/src/deprecated/index.ts", "../node_modules/typesafe-actions/src/deprecated/create-action.ts", "../node_modules/typesafe-actions/src/deprecated/create-standard-action.ts", "../node_modules/typesafe-actions/src/create-async-action.ts", "../node_modules/typesafe-actions/src/create-reducer.ts", "../node_modules/typesafe-actions/src/is-action-of.ts", "../node_modules/typesafe-actions/src/is-of-type.ts", "../src/index.tsx", "../src/context/viewer-context.tsx", "../node_modules/@iiif/parser/dist/esm/index.mjs", "../node_modules/@iiif/vault/dist/esm/index.mjs", "../node_modules/@babel/runtime/helpers/esm/defineProperty.js", "../node_modules/@babel/runtime/helpers/esm/objectSpread2.js", "../node_modules/redux/es/redux.js", "../src/components/Viewer/Viewer.tsx", "../src/hooks/use-iiif/getAccompanyingCanvasImage.ts", "../src/hooks/use-iiif/getCanvasByCriteria.ts", "../src/hooks/use-iiif/getPaintingResource.ts", "../src/hooks/use-iiif/getSupplementingResources.ts", "../src/hooks/use-iiif/getLabel.ts", "../src/hooks/use-iiif/getThumbnail.ts", "../src/stitches.tsx", "../src/components/Viewer/Viewer.styled.tsx", "../src/hooks/useMediaQuery.ts", "../src/hooks/useBodyLocked.ts", "../src/components/Viewer/Header.tsx", "../src/components/Viewer/Header.styled.tsx", "../src/components/Viewer/IIIFBadge.tsx", "../src/components/CopyText.tsx", "../src/hooks/useCopyToClipboard.ts", "../src/components/Viewer/Content.tsx", "../src/components/Media/Media.tsx", "../src/components/Media/Media.styled.tsx", "../src/components/Media/Thumbnail.tsx", "../src/services/utils.ts", "../src/components/Media/Thumbnail.styled.tsx", "../src/hooks/use-iiif/getResourceType.ts", "../src/components/Media/Controls.tsx", "../src/components/Media/Controls.styled.tsx", "../src/hooks/useKeyPress.ts", "../src/components/Navigator/Navigator.tsx", "../src/components/Navigator/Navigator.styled.tsx", "../src/components/Navigator/Resource.tsx", "../src/components/Navigator/Cue.styled.tsx", "../src/hooks/use-webvtt.ts", "../src/components/Navigator/Menu.tsx", "../src/components/Navigator/Cue.tsx", "../src/context/current-time-context.tsx", "../src/components/Navigator/Menu.styled.tsx", "../src/components/Player/Player.tsx", "../src/components/Player/Player.styled.tsx", "../src/components/Player/AudioVisualizer.tsx", "../src/components/Player/AudioVisualizer.styled.tsx", "../src/components/Player/Track.tsx", "../src/components/ImageViewer/ImageViewer.tsx", "../src/components/ImageViewer/ImageViewer.styled.tsx", "../src/components/ImageViewer/Controls.tsx", "../src/components/ImageViewer/Button.tsx", "../src/components/ImageViewer/Button.styled.tsx", "../src/components/ImageViewer/Controls.styled.tsx", "../src/services/iiif.ts", "../src/components/Viewer/ErrorFallback.tsx", "../src/components/Viewer/ErrorFallback.styled.tsx"],
  "sourcesContent": ["import {\n  ActionCreator,\n  ActionCreatorTypeMetadata,\n  TypeConstant,\n} from '../type-helpers';\n\nexport function checkIsEmpty(arg: unknown) {\n  return arg == null;\n}\n\nexport function throwIsEmpty(argPosition: number): never {\n  throw new Error(`Argument ${argPosition} is empty.`);\n}\n\nexport function checkValidActionCreator(\n  arg: unknown\n): arg is ActionCreator<TypeConstant> {\n  return typeof arg === 'function' && 'getType' in arg;\n}\n\nexport function checkInvalidActionCreator(arg: unknown) {\n  return !checkValidActionCreator(arg);\n}\n\nexport function throwInvalidActionCreator(argPosition: number): never {\n  throw new Error(\n    `Argument ${argPosition} is invalid, it should be an action-creator instance from \"typesafe-actions\"`\n  );\n}\n\nexport function checkInvalidActionCreatorInArray(\n  arg: ActionCreator<TypeConstant> & ActionCreatorTypeMetadata<TypeConstant>,\n  idx: number\n): void | never {\n  if (arg == null) {\n    throw new Error(\n      `Argument contains array with empty element at index ${idx}`\n    );\n  } else if (arg.getType == null) {\n    throw new Error(\n      // tslint:disable-next-line:max-line-length\n      `Argument contains array with invalid element at index ${idx}, it should be an action-creator instance from \"typesafe-actions\"`\n    );\n  }\n}\n\nexport function checkValidActionType(arg: unknown): arg is string | symbol {\n  return typeof arg === 'string' || typeof arg === 'symbol';\n}\n\nexport function checkInvalidActionType(arg: unknown) {\n  return !checkValidActionType(arg);\n}\n\nexport function throwInvalidActionType(argPosition: number): never {\n  throw new Error(\n    `Argument ${argPosition} is invalid, it should be an action type of type: string | symbol`\n  );\n}\n\nexport function checkInvalidActionTypeInArray(\n  arg: TypeConstant,\n  idx: number\n): void | never {\n  if (arg == null) {\n    throw new Error(\n      `Argument contains array with empty element at index ${idx}`\n    );\n  } else if (typeof arg !== 'string' && typeof arg !== 'symbol') {\n    throw new Error(\n      `Argument contains array with invalid element at index ${idx}, it should be of type: string | symbol`\n    );\n  }\n}\n\nexport function throwInvalidActionTypeOrActionCreator(\n  argPosition: number\n): never {\n  throw new Error(\n    `Argument ${argPosition} is invalid, it should be an action-creator instance from \"typesafe-actions\" or action type of type: string | symbol`\n  );\n}\n", "import { TypeConstant } from './type-helpers';\nimport {\n  checkIsEmpty,\n  throwIsEmpty,\n  checkInvalidActionType,\n  throwInvalidActionCreator,\n} from './utils/validation';\n\nexport function action<T extends TypeConstant, E>(\n  type: T,\n  payload: undefined,\n  meta: undefined,\n  error: E\n): { type: T; error: E };\n\nexport function action<T extends TypeConstant, M, E>(\n  type: T,\n  payload: undefined,\n  meta: M,\n  error: E\n): { type: T; meta: M; error: E };\n\nexport function action<T extends TypeConstant, P, E>(\n  type: T,\n  payload: P,\n  meta: undefined,\n  error: E\n): { type: T; payload: P; error: E };\n\nexport function action<T extends TypeConstant, P, M, E>(\n  type: T,\n  payload: P,\n  meta: M,\n  error: E\n): { type: T; payload: P; meta: M; error: E };\n\nexport function action<T extends TypeConstant, M>(\n  type: T,\n  payload: undefined,\n  meta: M\n): { type: T; meta: M };\n\nexport function action<T extends TypeConstant, P, M>(\n  type: T,\n  payload: P,\n  meta: M\n): { type: T; payload: P; meta: M };\n\nexport function action<T extends TypeConstant, P>(\n  type: T,\n  payload: P\n): { type: T; payload: P };\n\nexport function action<T extends TypeConstant>(type: T): { type: T };\n\n/**\n * @description flux standard action factory\n * @example\n * ```\n * const add = (amount: number, meta?: Meta, error?: boolean) => action('INCREMENT', amount, meta, error);\n * ```\n */\nexport function action<\n  T extends TypeConstant,\n  P = undefined,\n  M = undefined,\n  E = undefined\n>(type: T, payload?: P, meta?: M, error?: E) {\n  if (checkIsEmpty(type)) {\n    throwIsEmpty(1);\n  }\n\n  if (checkInvalidActionType(type)) {\n    throwInvalidActionCreator(1);\n  }\n\n  return { type, payload, meta, error } as any;\n}\n", "import {\n  TypeConstant,\n  ResolveType,\n  ActionCreatorTypeMetadata,\n} from './type-helpers';\nimport {\n  checkIsEmpty,\n  throwIsEmpty,\n  checkInvalidActionType,\n  throwInvalidActionType,\n} from './utils/validation';\n\n/**\n * @description create custom action-creator using constructor function with injected type argument\n */\nexport function createCustomAction<\n  TType extends TypeConstant,\n  TArgs extends any[] = [],\n  TReturn extends any = {}\n>(\n  type: TType,\n  createHandler?: (...args: TArgs) => TReturn\n): ((...args: TArgs) => ResolveType<{ type: TType } & TReturn>) &\n  ActionCreatorTypeMetadata<TType> {\n  if (checkIsEmpty(type)) {\n    throwIsEmpty(1);\n  }\n\n  if (checkInvalidActionType(type)) {\n    throwInvalidActionType(1);\n  }\n\n  const actionCreator = (...args: TArgs) => {\n    const customProps =\n      createHandler != null ? createHandler(...args) : undefined;\n    return { type, ...customProps } as ResolveType<{ type: TType } & TReturn>;\n  };\n\n  const typeMeta = {\n    getType: () => type,\n    // redux-actions compatibility\n    toString: () => type,\n  } as ActionCreatorTypeMetadata<TType>;\n\n  return Object.assign(actionCreator, typeMeta);\n}\n", "import {\n  TypeConstant,\n  ActionCreatorBuilder,\n  ActionCreatorTypeMetadata,\n  ActionBuilder,\n} from './type-helpers';\nimport { createCustomAction } from './create-custom-action';\nimport {\n  checkIsEmpty,\n  throwIsEmpty,\n  checkInvalidActionType,\n  throwInvalidActionType,\n} from './utils/validation';\n\nexport function createAction<TType extends TypeConstant>(\n  type: TType\n): <TPayload = undefined, TMeta = undefined>() => ActionCreatorBuilder<\n  TType,\n  TPayload,\n  TMeta\n>;\n\nexport function createAction<\n  TType extends TypeConstant,\n  TCreatorPayload extends any = undefined,\n  TCreatorMeta extends any = undefined,\n  TArgs extends any[] = any[]\n>(\n  type: TType,\n  payloadCreator: undefined | ((...args: TArgs) => TCreatorPayload),\n  metaCreator?: (...args: TArgs) => TCreatorMeta\n): <\n  TPayload extends TCreatorPayload = TCreatorPayload,\n  TMeta extends TCreatorMeta = TCreatorMeta\n>() => (...args: TArgs) => ActionBuilder<TType, TPayload, TMeta>;\n\n/**\n * @description create an action-creator\n */\nexport function createAction<\n  TType extends TypeConstant,\n  TCreatorPayload extends any = undefined,\n  TCreatorMeta extends any = undefined,\n  TArgs extends any[] = any[]\n>(\n  type: TType,\n  payloadCreator?: undefined | ((...args: TArgs) => TCreatorPayload),\n  metaCreator?: (...args: TArgs) => TCreatorMeta\n):\n  | (<\n      TPayload extends TCreatorPayload = TCreatorPayload,\n      TMeta extends TCreatorMeta = TCreatorMeta\n    >() => (...args: TArgs) => ActionBuilder<TType, TPayload, TMeta>)\n  | (<TPayload = undefined, TMeta = undefined>() => ActionCreatorBuilder<\n      TType,\n      TPayload,\n      TMeta\n    >) {\n  if (checkIsEmpty(type)) {\n    throwIsEmpty(1);\n  }\n\n  if (checkInvalidActionType(type)) {\n    throwInvalidActionType(1);\n  }\n\n  return <TPayload, TMeta = undefined>() => {\n    return createCustomAction(type, (...args: TArgs) => {\n      let payload = args[0];\n      let meta = args[1];\n\n      if (payloadCreator != null || metaCreator != null) {\n        payload = payloadCreator != null ? payloadCreator(...args) : undefined;\n        meta = metaCreator != null ? metaCreator(...args) : undefined;\n      }\n\n      return {\n        ...(payload !== undefined && { payload }),\n        ...(meta !== undefined && { meta }),\n      };\n    }) as ActionCreatorBuilder<TType, TPayload, TMeta>;\n  };\n}\n", "import {\n  TypeConstant,\n  ActionCreator,\n  ActionCreatorTypeMetadata,\n} from './type-helpers';\nimport {\n  checkIsEmpty,\n  throwIsEmpty,\n  checkInvalidActionCreator,\n  throwInvalidActionCreator,\n} from './utils/validation';\n\n/**\n * @description get the \"type literal\" of a given action-creator\n */\nexport function getType<TType extends TypeConstant>(\n  actionCreator: ActionCreator<TType> & ActionCreatorTypeMetadata<TType>\n): TType {\n  if (checkIsEmpty(actionCreator)) {\n    throwIsEmpty(1);\n  }\n\n  if (checkInvalidActionCreator(actionCreator)) {\n    throwInvalidActionCreator(1);\n  }\n\n  return actionCreator.getType!();\n}\n", "import { ActionCreator, TypeConstant } from '../type-helpers';\nimport {\n  checkIsEmpty,\n  throwIsEmpty,\n  checkInvalidActionType,\n  throwInvalidActionType,\n} from '../utils/validation';\n\n/**\n * @description create custom action-creator using constructor function with injected type argument\n */\nexport function createCustomAction<\n  T extends TypeConstant,\n  AC extends ActionCreator<T> = () => { type: T }\n>(type: T, createHandler?: (type: T) => AC): AC {\n  if (checkIsEmpty(type)) {\n    throwIsEmpty(1);\n  }\n\n  if (checkInvalidActionType(type)) {\n    throwInvalidActionType(1);\n  }\n\n  const actionCreator: AC =\n    createHandler != null ? createHandler(type) : ((() => ({ type })) as AC);\n\n  return Object.assign(actionCreator, {\n    getType: () => type,\n    // redux-actions compatibility\n    toString: () => type,\n  });\n}\n", "import { createAction } from './create-action';\nimport { createCustomAction } from './create-custom-action';\nimport { createStandardAction } from './create-standard-action';\n\nexport default { createAction, createCustomAction, createStandardAction };\n", "import { TypeConstant, ActionCreator } from '../type-helpers';\nimport { action } from '../action';\n\nexport type PayloadMetaAction<\n  T extends TypeConstant,\n  P,\n  M\n> = P extends undefined\n  ? M extends undefined\n    ? { type: T }\n    : { type: T; meta: M }\n  : M extends undefined\n  ? { type: T; payload: P }\n  : { type: T; payload: P; meta: M };\n\n/**\n * @description typesafe action-creator factory\n */\nexport function createAction<\n  T extends TypeConstant,\n  AC extends ActionCreator<T> = () => { type: T }\n>(\n  type: T,\n  createHandler?: (\n    actionCallback: <P = undefined, M = undefined>(\n      payload?: P,\n      meta?: M\n    ) => PayloadMetaAction<T, P, M>\n  ) => AC\n): AC {\n  // validation is already done in action function\n\n  const actionCreator: AC =\n    createHandler == null\n      ? ((() => action(type)) as AC)\n      : createHandler(action.bind(null, type) as Parameters<\n          typeof createHandler\n        >[0]);\n\n  return Object.assign(actionCreator, {\n    getType: () => type,\n    // redux-actions compatibility\n    toString: () => type,\n  });\n}\n", "import { TypeConstant, ActionCreatorBuilder } from '../type-helpers';\nimport {\n  checkIsEmpty,\n  throwIsEmpty,\n  checkInvalidActionType,\n  throwInvalidActionType,\n} from '../utils/validation';\nimport { createCustomAction } from './create-custom-action';\n\n/** @private */\nexport type ActionBuilderMap<\n  TType extends TypeConstant,\n  TActionProps extends any,\n  TPayloadArg extends any = undefined,\n  TMetaArg extends any = undefined\n> = [TMetaArg] extends [undefined]\n  ? [TPayloadArg] extends [undefined]\n    ? () => { type: TType } & TActionProps\n    : (payload: TPayloadArg) => { type: TType } & TActionProps\n  : (payload: TPayloadArg, meta: TMetaArg) => { type: TType } & TActionProps;\n\nexport interface ActionBuilder<T extends TypeConstant> {\n  <P = undefined, M = undefined>(): ActionCreatorBuilder<T, P, M>;\n  map<R, P = undefined, M = undefined>(\n    fn: (payload: P, meta: M) => R\n  ): ActionBuilderMap<T, R, P, M>;\n}\n\n/**\n * @description create an action-creator of a given function that contains hidden \"type\" metadata\n */\nexport function createStandardAction<T extends TypeConstant>(\n  type: T\n): ActionBuilder<T> {\n  if (checkIsEmpty(type)) {\n    throwIsEmpty(1);\n  }\n\n  if (checkInvalidActionType(type)) {\n    throwInvalidActionType(1);\n  }\n\n  function constructor<P, M = undefined>(): ActionCreatorBuilder<T, P, M> {\n    return createCustomAction(type, _type => (payload: P, meta: M) => ({\n      type: _type,\n      payload,\n      meta,\n    })) as ActionCreatorBuilder<T, P, M>;\n  }\n\n  function map<R, P, M>(\n    fn: (payload: P, meta: M) => R\n  ): ActionBuilderMap<T, R, P, M> {\n    return createCustomAction(type, _type => (payload: P, meta: M) =>\n      Object.assign(fn(payload, meta), { type: _type })\n    ) as ActionBuilderMap<T, R, P, M>;\n  }\n\n  return Object.assign(constructor, { map });\n}\n", "import {\n  TypeConstant,\n  ActionCreatorBuilder,\n  ActionBuilder,\n} from './type-helpers';\nimport { createAction } from './create-action';\n\nexport function throwInvalidAsyncActionArgument(argPosition: number): never {\n  throw new Error(\n    `Argument ${argPosition} is invalid, it should be an action type of \"string | symbol\" or a tuple of \"[string | symbol, Function, Function?]\"`\n  );\n}\n\ntype AsyncActionHandler<\n  TType extends TypeConstant,\n  TArgs extends any[],\n  TPayloadMeta\n> = [TArgs] extends [never]\n  ? ActionCreatorBuilder<\n      TType,\n      unknown extends TPayloadMeta\n        ? any\n        : [TPayloadMeta] extends [[infer T, any]]\n        ? T\n        : TPayloadMeta,\n      unknown extends TPayloadMeta\n        ? undefined\n        : [TPayloadMeta] extends [[any, infer T]]\n        ? T\n        : undefined\n    >\n  : (\n      ...args: TArgs\n    ) => ActionBuilder<\n      TType,\n      [TPayloadMeta] extends [[infer T, any]] ? T : TPayloadMeta,\n      [TPayloadMeta] extends [[any, infer T]] ? T : undefined\n    >;\n\ninterface AsyncAction<\n  TType1 extends TypeConstant,\n  TPayload1 extends any,\n  TMeta1 extends any,\n  TArgs1 extends any[],\n  TType2 extends TypeConstant,\n  TPayload2 extends any,\n  TMeta2 extends any,\n  TArgs2 extends any[],\n  TType3 extends TypeConstant,\n  TPayload3 extends any,\n  TMeta3 extends any,\n  TArgs3 extends any[],\n  TType4 extends TypeConstant,\n  TPayload4 extends any,\n  TMeta4 extends any,\n  TArgs4 extends any[]\n> {\n  // tslint:disable-next-line: callable-types\n  <\n    TPayloadMeta1 extends\n      | TPayload1\n      | [TPayload1, TMeta1] = TMeta1 extends undefined\n      ? TPayload1\n      : [TPayload1, TMeta1],\n    TPayloadMeta2 extends\n      | TPayload2\n      | [TPayload2, TMeta2] = TMeta2 extends undefined\n      ? TPayload2\n      : [TPayload2, TMeta2],\n    TPayloadMeta3 extends\n      | TPayload3\n      | [TPayload3, TMeta3] = TMeta3 extends undefined\n      ? TPayload3\n      : [TPayload3, TMeta3],\n    TPayloadMeta4 extends\n      | TPayload4\n      | [TPayload4, TMeta4] = TMeta3 extends undefined\n      ? TPayload4\n      : [TPayload4, TMeta4]\n  >(): [TType4] extends [never]\n    ? {\n        request: AsyncActionHandler<TType1, TArgs1, TPayloadMeta1>;\n        success: AsyncActionHandler<TType2, TArgs2, TPayloadMeta2>;\n        failure: AsyncActionHandler<TType3, TArgs3, TPayloadMeta3>;\n      }\n    : {\n        request: AsyncActionHandler<TType1, TArgs1, TPayloadMeta1>;\n        success: AsyncActionHandler<TType2, TArgs2, TPayloadMeta2>;\n        failure: AsyncActionHandler<TType3, TArgs3, TPayloadMeta3>;\n        cancel: AsyncActionHandler<TType4, TArgs4, TPayloadMeta4>;\n      };\n}\n\nexport function createAsyncAction<\n  TType1 extends TypeConstant,\n  TType2 extends TypeConstant,\n  TType3 extends TypeConstant,\n  TType4 extends TypeConstant = never\n>(\n  requestArg: TType1,\n  successArg: TType2,\n  failureArg: TType3,\n  cancelArg?: TType4\n): AsyncAction<\n  TType1,\n  unknown,\n  unknown,\n  never,\n  TType2,\n  unknown,\n  unknown,\n  never,\n  TType3,\n  unknown,\n  unknown,\n  never,\n  TType4,\n  unknown,\n  unknown,\n  never\n>;\n\nexport function createAsyncAction<\n  TType1 extends TypeConstant,\n  TType2 extends TypeConstant,\n  TType3 extends TypeConstant,\n  TType4 extends TypeConstant = never,\n  TPayloadCreator1 extends\n    | ((...args: TArgs1) => TPayload1)\n    | undefined = undefined,\n  TPayloadCreator2 extends\n    | ((...args: TArgs2) => TPayload2)\n    | undefined = undefined,\n  TPayloadCreator3 extends\n    | ((...args: TArgs3) => TPayload3)\n    | undefined = undefined,\n  TPayloadCreator4 extends\n    | ((...args: TArgs4) => TPayload4)\n    | undefined = undefined,\n  TMetaCreator1 extends ((...args: TArgs1) => TMeta1) | undefined = undefined,\n  TMetaCreator2 extends ((...args: TArgs2) => TMeta2) | undefined = undefined,\n  TMetaCreator3 extends ((...args: TArgs3) => TMeta3) | undefined = undefined,\n  TMetaCreator4 extends ((...args: TArgs4) => TMeta4) | undefined = undefined,\n  TPayload1 extends any = TPayloadCreator1 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TMeta1 extends any = TMetaCreator1 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TPayload2 extends any = TPayloadCreator2 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TMeta2 extends any = TMetaCreator2 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TPayload3 extends any = TPayloadCreator3 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TMeta3 extends any = TMetaCreator3 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TPayload4 extends any = TPayloadCreator4 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TMeta4 extends any = TMetaCreator4 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TArgs1 extends any[] = TPayloadCreator1 extends ((...args: infer T) => any)\n    ? T\n    : TMetaCreator1 extends ((...args: infer T) => any)\n    ? T\n    : never,\n  TArgs2 extends any[] = TPayloadCreator2 extends ((...args: infer T) => any)\n    ? T\n    : TMetaCreator2 extends ((...args: infer T) => any)\n    ? T\n    : never,\n  TArgs3 extends any[] = TPayloadCreator3 extends ((...args: infer T) => any)\n    ? T\n    : TMetaCreator3 extends ((...args: infer T) => any)\n    ? T\n    : never,\n  TArgs4 extends any[] = TPayloadCreator4 extends ((...args: infer T) => any)\n    ? T\n    : TMetaCreator4 extends ((...args: infer T) => any)\n    ? T\n    : never\n>(\n  requestArg:\n    | TType1\n    | [TType1, TPayloadCreator1]\n    | [TType1, TPayloadCreator1, TMetaCreator1],\n  successArg:\n    | TType2\n    | [TType2, TPayloadCreator2]\n    | [TType2, TPayloadCreator2, TMetaCreator2],\n  failureArg:\n    | TType3\n    | [TType3, TPayloadCreator3]\n    | [TType3, TPayloadCreator3, TMetaCreator3],\n  cancelArg?:\n    | TType4\n    | [TType4, TPayloadCreator4]\n    | [TType4, TPayloadCreator4, TMetaCreator4]\n): AsyncAction<\n  TType1,\n  TPayload1,\n  TMeta1,\n  TArgs1,\n  TType2,\n  TPayload2,\n  TMeta2,\n  TArgs2,\n  TType3,\n  TPayload3,\n  TMeta3,\n  TArgs3,\n  TType4,\n  TPayload4,\n  TMeta4,\n  TArgs4\n>;\n\n/**\n * @description create an async action-creator object that contains `request`, `success` and `failure` actions as props\n */\nexport function createAsyncAction<\n  TType1 extends TypeConstant,\n  TType2 extends TypeConstant,\n  TType3 extends TypeConstant,\n  TType4 extends TypeConstant = never,\n  TPayloadCreator1 extends\n    | ((...args: TArgs1) => TPayload1)\n    | undefined = undefined,\n  TPayloadCreator2 extends\n    | ((...args: TArgs2) => TPayload2)\n    | undefined = undefined,\n  TPayloadCreator3 extends\n    | ((...args: TArgs3) => TPayload3)\n    | undefined = undefined,\n  TPayloadCreator4 extends\n    | ((...args: TArgs4) => TPayload4)\n    | undefined = undefined,\n  TMetaCreator1 extends ((...args: TArgs1) => TMeta1) | undefined = undefined,\n  TMetaCreator2 extends ((...args: TArgs2) => TMeta2) | undefined = undefined,\n  TMetaCreator3 extends ((...args: TArgs3) => TMeta3) | undefined = undefined,\n  TMetaCreator4 extends ((...args: TArgs4) => TMeta4) | undefined = undefined,\n  TPayload1 extends any = TPayloadCreator1 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TMeta1 extends any = TMetaCreator1 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TPayload2 extends any = TPayloadCreator2 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TMeta2 extends any = TMetaCreator2 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TPayload3 extends any = TPayloadCreator3 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TMeta3 extends any = TMetaCreator3 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TPayload4 extends any = TPayloadCreator4 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TMeta4 extends any = TMetaCreator4 extends ((...args: any[]) => infer T)\n    ? T\n    : undefined,\n  TArgs1 extends any[] = TPayloadCreator1 extends ((...args: infer T) => any)\n    ? T\n    : TMetaCreator1 extends ((...args: infer T) => any)\n    ? T\n    : never,\n  TArgs2 extends any[] = TPayloadCreator2 extends ((...args: infer T) => any)\n    ? T\n    : TMetaCreator2 extends ((...args: infer T) => any)\n    ? T\n    : never,\n  TArgs3 extends any[] = TPayloadCreator3 extends ((...args: infer T) => any)\n    ? T\n    : TMetaCreator3 extends ((...args: infer T) => any)\n    ? T\n    : never,\n  TArgs4 extends any[] = TPayloadCreator4 extends ((...args: infer T) => any)\n    ? T\n    : TMetaCreator4 extends ((...args: infer T) => any)\n    ? T\n    : never\n>(\n  requestArg:\n    | TType1\n    | [TType1, TPayloadCreator1]\n    | [TType1, TPayloadCreator1, TMetaCreator1],\n  successArg:\n    | TType2\n    | [TType2, TPayloadCreator2]\n    | [TType2, TPayloadCreator2, TMetaCreator2],\n  failureArg:\n    | TType3\n    | [TType3, TPayloadCreator3]\n    | [TType3, TPayloadCreator3, TMetaCreator3],\n  cancelArg?:\n    | TType4\n    | [TType4, TPayloadCreator4]\n    | [TType4, TPayloadCreator4, TMetaCreator4]\n): AsyncAction<\n  TType1,\n  TPayload1,\n  TMeta1,\n  TArgs1,\n  TType2,\n  TPayload2,\n  TMeta2,\n  TArgs2,\n  TType3,\n  TPayload3,\n  TMeta3,\n  TArgs3,\n  TType4,\n  TPayload4,\n  TMeta4,\n  TArgs4\n> {\n  const constructor = (<\n    TP1 = undefined,\n    TM1 = undefined,\n    TP2 = undefined,\n    TM2 = undefined,\n    TP3 = undefined,\n    TM3 = undefined,\n    TP4 = undefined,\n    TM4 = undefined\n  >() => {\n    const results = [requestArg, successArg, failureArg, cancelArg].map(\n      (arg, index) => {\n        if (Array.isArray(arg)) {\n          return createAction(arg[0], arg[1] as any, arg[2] as any)();\n        } else if (typeof arg === 'string' || typeof arg === 'symbol') {\n          return createAction(arg as string)();\n        } else if (index < 3) {\n          throwInvalidAsyncActionArgument(index);\n        }\n      }\n    );\n\n    const [request, success, failure, cancel] = results;\n\n    return {\n      request,\n      success,\n      failure,\n      cancel,\n    };\n  }) as AsyncAction<\n    TType1,\n    TPayload1,\n    TMeta1,\n    TArgs1,\n    TType2,\n    TPayload2,\n    TMeta2,\n    TArgs2,\n    TType3,\n    TPayload3,\n    TMeta3,\n    TArgs3,\n    TType4,\n    TPayload4,\n    TMeta4,\n    TArgs4\n  >;\n\n  return constructor;\n}\n", "import { getType } from './get-type';\nimport {\n  checkValidActionCreator,\n  checkValidActionType,\n  throwInvalidActionTypeOrActionCreator,\n} from './utils/validation';\nimport { Reducer, Action, Types } from './type-helpers';\n\ntype HandleActionChainApi<\n  TState,\n  TInputAction extends Action,\n  TRootAction extends Action\n> = <\n  TActionCreator extends (...args: any[]) => TInputAction,\n  THandledAction extends ReturnType<TActionCreator>,\n  TOutputAction extends Exclude<TInputAction, THandledAction>\n>(\n  singleOrMultipleCreatorsAndTypes: TActionCreator | TActionCreator[],\n  reducer: (state: TState, action: THandledAction) => TState\n) => [TOutputAction] extends [Action]\n  ? Reducer<TState, TRootAction> & {\n      handlers: Record<\n        Exclude<TRootAction, TOutputAction>['type'],\n        (state: TState, action: TRootAction) => TState\n      >;\n      handleAction: HandleActionChainApi<TState, TOutputAction, TRootAction>;\n    }\n  : Reducer<TState, TRootAction> & {\n      handlers: Record<\n        TRootAction['type'],\n        (state: TState, action: TRootAction) => TState\n      >;\n    };\n\ntype HandleTypeChainApi<\n  TState,\n  TInputAction extends Action,\n  TRootAction extends Action\n> = <\n  TType extends TInputAction['type'],\n  THandledAction extends Extract<TInputAction, Action<TType>>,\n  TOutputAction extends Exclude<TInputAction, THandledAction>\n>(\n  singleOrMultipleCreatorsAndTypes: TType | TType[],\n  reducer: (state: TState, action: THandledAction) => TState\n) => [TOutputAction] extends [Action]\n  ? Reducer<TState, TRootAction> & {\n      handlers: Record<\n        Exclude<TRootAction, TOutputAction>['type'],\n        (state: TState, action: TRootAction) => TState\n      >;\n      handleType: HandleTypeChainApi<TState, TOutputAction, TRootAction>;\n    }\n  : Reducer<TState, TRootAction> & {\n      handlers: Record<\n        TRootAction['type'],\n        (state: TState, action: TRootAction) => TState\n      >;\n    };\n\ntype GetAction<\n  TAction extends Action,\n  TType extends TAction['type']\n> = TAction extends Action<TType> ? TAction : never;\n\ntype InitialHandler<TState, TRootAction extends Action> = {\n  [P in TRootAction['type']]?: (\n    state: TState,\n    action: GetAction<TRootAction, P>\n  ) => TState;\n};\n\ntype RootAction = Types extends { RootAction: infer T } ? T : any;\n\nexport function createReducer<TState, TRootAction extends Action = RootAction>(\n  initialState: TState,\n  initialHandlers: InitialHandler<TState, TRootAction> = {}\n) {\n  const handlers: any = {\n    ...initialHandlers,\n  };\n\n  const rootReducer: Reducer<TState, TRootAction> = (\n    state = initialState,\n    action: TRootAction\n  ) => {\n    if (handlers.hasOwnProperty(action.type)) {\n      const reducer = handlers[action.type];\n      if (typeof reducer !== 'function') {\n        throw Error(\n          `Reducer under \"${action.type}\" key is not a valid reducer`\n        );\n      }\n      return reducer(state, action);\n    } else {\n      return state;\n    }\n  };\n\n  const reducerHandler = ((\n    singleOrMultipleCreatorsAndTypes: any,\n    reducer: any\n  ) => {\n    const creatorsAndTypes = Array.isArray(singleOrMultipleCreatorsAndTypes)\n      ? singleOrMultipleCreatorsAndTypes\n      : [singleOrMultipleCreatorsAndTypes];\n\n    const newHandlers: typeof handlers = {};\n\n    creatorsAndTypes\n      .map(\n        (\n          acOrType: TRootAction['type'] | ((...args: any[]) => TRootAction),\n          index\n        ) =>\n          checkValidActionCreator(acOrType)\n            ? getType(acOrType)\n            : checkValidActionType(acOrType)\n            ? acOrType\n            : throwInvalidActionTypeOrActionCreator(index + 1)\n      )\n      .forEach(type => (newHandlers[type] = reducer));\n\n    return createReducer<TState, TRootAction>(initialState, {\n      ...handlers,\n      ...newHandlers,\n    });\n  }) as\n    | HandleActionChainApi<TState, TRootAction, TRootAction>\n    | HandleTypeChainApi<TState, TRootAction, TRootAction>;\n\n  const chainApi = Object.assign(rootReducer, {\n    handlers: { ...handlers },\n    handleAction: reducerHandler,\n    handleType: reducerHandler,\n  }) as Reducer<TState, TRootAction> &\n    Readonly<{\n      handlers: InitialHandler<TState, RootAction>;\n      handleAction: [unknown] extends [TRootAction]\n        ? any\n        : HandleActionChainApi<TState, TRootAction, TRootAction>;\n      handleType: [unknown] extends [TRootAction]\n        ? any\n        : HandleTypeChainApi<TState, TRootAction, TRootAction>;\n    }>;\n\n  return chainApi;\n}\n", "import { ActionCreatorTypeMetadata } from './type-helpers';\nimport {\n  checkInvalidActionCreatorInArray,\n  checkIsEmpty,\n  throwIsEmpty,\n} from './utils/validation';\n\nexport type ActionCreator<T extends { type: string }> = ((\n  ...args: any[]\n) => T) &\n  ActionCreatorTypeMetadata<T['type']>;\n\n/**\n * @description (curried assert function) check if an action is the instance of given action-creator(s)\n * @description it works with discriminated union types\n */\nexport function isActionOf<AC extends ActionCreator<{ type: string }>>(\n  actionCreator: AC | AC[],\n  action: { type: string }\n): action is ReturnType<AC>;\n\n/**\n * @description (curried assert function) check if an action is the instance of given action-creator(s)\n * @description it works with discriminated union types\n */\nexport function isActionOf<AC extends ActionCreator<{ type: string }>>(\n  actionCreator: AC | AC[]\n): (action: { type: string }) => action is ReturnType<AC>;\n\n/**\n * implementation\n */\nexport function isActionOf<AC extends ActionCreator<{ type: string }>>(\n  actionCreatorOrCreators: AC | AC[],\n  action?: { type: string }\n) {\n  if (checkIsEmpty(actionCreatorOrCreators)) {\n    throwIsEmpty(1);\n  }\n\n  const actionCreators = Array.isArray(actionCreatorOrCreators)\n    ? actionCreatorOrCreators\n    : [actionCreatorOrCreators];\n\n  actionCreators.forEach(checkInvalidActionCreatorInArray);\n\n  const assertFn = (_action: { type: string }) =>\n    actionCreators.some(\n      actionCreator => _action.type === actionCreator.getType!()\n    );\n\n  // 1 arg case => return curried version\n  if (action === undefined) {\n    return assertFn;\n  }\n  // 2 args case => invoke assertFn and return the result\n  return assertFn(action);\n}\n", "import {\n  checkInvalidActionTypeInArray,\n  checkIsEmpty,\n  throwIsEmpty,\n} from './utils/validation';\n/**\n * @description (curried assert function) check if action type is equal given type-constant\n * @description it works with discriminated union types\n */\nexport function isOfType<T extends string, A extends { type: string }>(\n  type: T | T[],\n  action: A\n): action is A extends { type: T } ? A : never;\n\n/**\n * @description (curried assert function) check if action type is equal given type-constant\n * @description it works with discriminated union types\n */\nexport function isOfType<T extends string>(\n  type: T | T[]\n): <A extends { type: string }>(\n  action: A\n) => action is A extends { type: T } ? A : never;\n\n/**\n * implementation\n */\nexport function isOfType<T extends string, A extends { type: T }>(\n  actionTypeOrTypes: T | T[],\n  action?: A\n) {\n  if (checkIsEmpty(actionTypeOrTypes)) {\n    throwIsEmpty(1);\n  }\n\n  const actionTypes = Array.isArray(actionTypeOrTypes)\n    ? actionTypeOrTypes\n    : [actionTypeOrTypes];\n\n  actionTypes.forEach(checkInvalidActionTypeInArray);\n\n  const assertFn = (_action: A) => actionTypes.includes(_action.type);\n\n  // 1 arg case => return curried version\n  if (action === undefined) {\n    return assertFn;\n  }\n  // 2 args case => invoke assertFn and return the result\n  return assertFn(action);\n}\n", "import React, { useEffect, useState } from \"react\";\nimport { ManifestNormalized } from \"@iiif/presentation-3\";\nimport {\n  ConfigOptions,\n  ViewerProvider,\n  useViewerState,\n  useViewerDispatch,\n} from \"context/viewer-context\";\nimport Viewer from \"components/Viewer/Viewer\";\nimport { createTheme } from \"@stitches/react\";\n\ninterface Props {\n  manifestId: string;\n  canvasIdCallback?: (arg0: string) => void;\n  customTheme?: any;\n  options?: ConfigOptions;\n}\n\nconst App: React.FC<Props> = ({\n  manifestId,\n  canvasIdCallback = () => {},\n  customTheme,\n  options,\n}) => {\n  return (\n    <ViewerProvider>\n      <RenderViewer\n        manifestId={manifestId}\n        canvasIdCallback={canvasIdCallback}\n        customTheme={customTheme}\n        options={options}\n      />\n    </ViewerProvider>\n  );\n};\n\nconst RenderViewer: React.FC<Props> = ({\n  manifestId,\n  canvasIdCallback,\n  customTheme,\n  options,\n}) => {\n  const dispatch: any = useViewerDispatch();\n\n  /**\n   * Retrieve state set by the wrapping <ViewerProvider/> and make\n   * the normalized manifest available from @iiif/vault.\n   */\n  const store = useViewerState();\n  const { activeCanvas, isLoaded, vault } = store;\n  const [manifest, setManifest] = useState<ManifestNormalized>();\n\n  /**\n   * Overrides the baseline stitches theme when set.\n   */\n  let theme = {};\n  if (customTheme) theme = createTheme(\"custom\", customTheme);\n\n  /**\n   * On change, pass the activeCanvas up to the wrapping `<App/>`\n   * component to be handed off to a consuming application.\n   */\n  useEffect(() => {\n    if (canvasIdCallback) canvasIdCallback(activeCanvas);\n  }, [activeCanvas]);\n\n  useEffect(() => {\n    // Update with user config options\n    dispatch({\n      type: \"updateConfigOptions\",\n      configOptions: options,\n    });\n\n    /**\n     * Loaded manifest and site using @iiif/vault.\n     */\n    vault\n      .loadManifest(manifestId)\n      .then((data: any) => {\n        setManifest(data);\n        dispatch({\n          type: \"updateActiveCanvas\",\n          canvasId: data.items[0] && data.items[0].id,\n        });\n      })\n      .catch((error: any) => {\n        console.error(`Manifest failed to load: ${error}`);\n      })\n      .finally(() => {\n        dispatch({\n          type: \"updateIsLoaded\",\n          isLoaded: true,\n        });\n      });\n  }, []);\n\n  /**\n   * Render loading component while manifest is fetched and\n   * loaded into React.Context as `vault`. Upon completion\n   * (error or not) isLoaded will be set to true.\n   */\n  if (!isLoaded) return <>Loading</>;\n\n  /**\n   * If an error occurs during manifest fetch process used by\n   * @iiif/vault, vault will not return a manifest\n   * that is fully normalized, and be missing the items property.\n   * This being undefined signals that something went wrong and we\n   * will render a user-friendly error as a functional component.\n   */\n\n  if (!manifest || !manifest[\"items\"]) {\n    console.log(`The IIIF manifest ${manifestId} failed to load.`);\n    return <></>;\n  }\n\n  /**\n   * If the manifest returned by @iiif/vault does not\n   * contain any canvases, then we'll show an error to the screen. This\n   * may be required if the viewer is rendered to preview manifests in\n   * repository administration views.\n   */\n  if (manifest[\"items\"].length === 0) {\n    console.log(`The IIIF manifest ${manifestId} does not contain canvases.`);\n    return <></>;\n  }\n\n  /**\n   * If manifest is normalized by @iiif/vault, we know\n   * that the manifest data is retrievable via vault.get() and we\n   * will will set the activeCanvas to the first index and render the\n   * <Viewer/> component.\n   */\n  return <Viewer manifest={manifest} theme={theme} />;\n};\n\nexport default App;\n", "import React from \"react\";\nimport { Vault } from \"@iiif/vault\";\n\nexport type ConfigOptions = {\n  showTitle: boolean;\n  showIIIFBadge: boolean;\n  ignoreCaptionLabels: string[];\n};\n\nconst defaultConfigOptions = {\n  showTitle: true,\n  showIIIFBadge: true,\n  ignoreCaptionLabels: [],\n};\n\ninterface ViewerContextStore {\n  activeCanvas: string;\n  configOptions: ConfigOptions;\n  isLoaded: boolean;\n  vault: Vault;\n}\n\ninterface ViewerAction {\n  type: string;\n  canvasId: string;\n  configOptions: ConfigOptions;\n  isLoaded: boolean;\n}\n\nconst defaultState: ViewerContextStore = {\n  activeCanvas: \"\",\n  configOptions: defaultConfigOptions,\n  isLoaded: false,\n  vault: new Vault(),\n};\n\nconst ViewerStateContext =\n  React.createContext<ViewerContextStore>(defaultState);\nconst ViewerDispatchContext =\n  React.createContext<ViewerContextStore>(defaultState);\n\nfunction viewerReducer(state: ViewerContextStore, action: ViewerAction) {\n  switch (action.type) {\n    case \"updateActiveCanvas\": {\n      /**\n       * Set canvasId to empty string if it comes back undefined.\n       */\n      if (!action.canvasId) action.canvasId = \"\";\n      return {\n        ...state,\n        activeCanvas: action.canvasId,\n      };\n    }\n    case \"updateConfigOptions\": {\n      return {\n        ...state,\n        configOptions: {\n          ...defaultConfigOptions,\n          ...action.configOptions,\n        },\n      };\n    }\n    case \"updateIsLoaded\": {\n      return {\n        ...state,\n        isLoaded: action.isLoaded,\n      };\n    }\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n}\n\ninterface ViewerProviderProps {\n  initialState?: ViewerContextStore;\n  children: React.ReactNode;\n}\n\nconst ViewerProvider: React.FC<ViewerProviderProps> = ({\n  initialState = defaultState,\n  children,\n}) => {\n  const [state, dispatch] = React.useReducer<\n    React.Reducer<ViewerContextStore, ViewerAction>\n  >(viewerReducer, initialState);\n\n  return (\n    <ViewerStateContext.Provider value={state}>\n      <ViewerDispatchContext.Provider\n        value={dispatch as unknown as ViewerContextStore}\n      >\n        {children}\n      </ViewerDispatchContext.Provider>\n    </ViewerStateContext.Provider>\n  );\n};\n\nfunction useViewerState() {\n  const context = React.useContext(ViewerStateContext);\n  if (context === undefined) {\n    throw new Error(\"useViewerState must be used within a ViewerProvider\");\n  }\n  return context;\n}\n\nfunction useViewerDispatch() {\n  const context = React.useContext(ViewerDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useViewerDispatch must be used within a ViewerProvider\");\n  }\n  return context;\n}\n\nexport { ViewerProvider, useViewerState, useViewerDispatch };\n", "const Ce={id:\"https://iiif-parser/annotation\",type:\"Annotation\",behavior:[],label:null,thumbnail:[],summary:null,requiredStatement:null,metadata:[],seeAlso:[],homepage:[],logo:[],rendering:[],service:[],accessibility:[],audience:[],body:[],bodyValue:null,canonical:null,created:null,creator:[],generated:null,generator:[],modified:null,motivation:[],rights:[],stylesheet:null,target:[],timeMode:void 0,via:[],partOf:[]},k={id:\"https://iiif-parser/annotation-page\",type:\"AnnotationPage\",behavior:[],motivation:null,label:null,thumbnail:[],summary:null,requiredStatement:null,metadata:[],rights:null,provider:[],items:[],seeAlso:[],homepage:[],logo:[],rendering:[],service:[]},N={id:\"https://iiif-parser/empty-canvas\",type:\"Canvas\",label:null,behavior:[],motivation:null,thumbnail:[],posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:[],rights:null,navDate:null,provider:[],items:[],annotations:[],seeAlso:[],homepage:[],logo:[],partOf:[],rendering:[],service:[],duration:0,height:0,width:0},j={id:\"https://iiif-parser/empty-collection\",type:\"Collection\",label:null,viewingDirection:\"left-to-right\",behavior:[],motivation:null,thumbnail:[],posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:[],rights:null,navDate:null,provider:[],items:[],annotations:[],seeAlso:[],homepage:[],logo:[],partOf:[],rendering:[],service:[],services:[]},G={id:\"https://iiif-parser/empty-manifest\",type:\"Manifest\",annotations:[],behavior:[],homepage:[],items:[],label:null,logo:[],metadata:[],motivation:null,navDate:null,provider:[],partOf:[],posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,rendering:[],requiredStatement:null,rights:null,seeAlso:[],service:[],services:[],start:null,structures:[],summary:null,thumbnail:[],viewingDirection:\"left-to-right\"},$={id:\"https://iiif-parser/empty-canvas\",type:\"Range\",label:null,behavior:[],motivation:null,thumbnail:[],posterCanvas:null,accompanyingCanvas:null,placeholderCanvas:null,summary:null,requiredStatement:null,metadata:[],rights:null,navDate:null,provider:[],items:[],annotations:[],seeAlso:[],homepage:[],logo:[],partOf:[],rendering:[],service:[],start:null,supplementary:null,viewingDirection:\"left-to-right\"},q={id:\"https://iiif-parser/empty-agent\",type:\"Agent\",label:{},logo:[],seeAlso:[],homepage:[]},M=[\"Collection\",\"Manifest\",\"Canvas\",\"AnnotationPage\",\"AnnotationCollection\",\"Annotation\",\"ContentResource\",\"Range\",\"Service\",\"Selector\",\"Agent\"];function U(t){if(typeof t==\"undefined\"||t===null)throw new Error(\"Null or undefined is not a valid entity.\");if(Array.isArray(t))throw new Error(\"Array is not a valid entity\");if(typeof t!=\"object\")throw new Error(`${typeof t} is not a valid entity`);if(typeof t.type==\"string\"){const e=M.indexOf(t.type);if(e!==-1)return M[e]}if(t.profile)return\"Service\";throw new Error(\"Resource type is not known\")}class L{traversals;options;constructor(e,i={}){this.traversals={collection:[],manifest:[],canvas:[],annotationCollection:[],annotationPage:[],annotation:[],contentResource:[],choice:[],range:[],service:[],agent:[],...e},this.options={allowUndefinedReturn:!1,...i}}static all(e){return new L({collection:[e],manifest:[e],canvas:[e],annotationCollection:[e],annotationPage:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e]})}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=e.thumbnail.map(i=>this.traverseType(i,this.traversals.contentResource))),e.provider&&(e.provider=e.provider.map(i=>this.traverseAgent(i))),e}traverseLinking(e){return e.seeAlso&&(e.seeAlso=e.seeAlso.map(i=>this.traverseType(i,this.traversals.contentResource))),e.service&&(e.service=e.service.map(i=>this.traverseType(i,this.traversals.service))),e.services&&(e.services=e.services.map(i=>this.traverseType(i,this.traversals.service))),e.logo&&(e.logo=e.logo.map(i=>this.traverseType(i,this.traversals.contentResource))),e.homepage&&(e.homepage=e.homepage.map(i=>this.traverseType(i,this.traversals.contentResource))),e.partOf&&(e.partOf=e.partOf.map(i=>typeof i==\"string\"||!i.type?this.traverseType(i,this.traversals.contentResource):i.type===\"Canvas\"?this.traverseType(i,this.traversals.canvas):i.type===\"AnnotationCollection\"?this.traverseType(i,this.traversals.annotationCollection):this.traverseType(i,this.traversals.contentResource))),e.start&&(e.start=e.start?this.traverseType(e.start,this.traversals.canvas):null),e.rendering&&(e.rendering=e.rendering.map(i=>this.traverseType(i,this.traversals.contentResource))),e.supplementary&&(e.supplementary=e.supplementary.map(i=>this.traverseType(i,this.traversals.contentResource))),e}traverseCollectionItems(e){return e.items&&e.items.map(i=>i.type===\"Collection\"?this.traverseCollection(i):this.traverseManifest(i)),e}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseInlineAnnotationPages(this.traverseLinking(this.traversePosterCanvas(this.traverseCollectionItems(e))))),this.traversals.collection)}traverseManifestItems(e){return e.items&&(e.items=e.items.map(i=>this.traverseCanvas(i))),e}traverseManifestStructures(e){return e.structures&&(e.structures=e.structures.map(i=>this.traverseRange(i))),e}traverseManifest(e){return this.traverseType(this.traverseInlineAnnotationPages(this.traverseManifestStructures(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e)))))),this.traversals.manifest)}traverseCanvasItems(e){return e.items=(e.items||[]).map(i=>this.traverseAnnotationPage(i)),e}traverseInlineAnnotationPages(e){return typeof e==\"string\"||!e||e.annotations&&(e.annotations=e.annotations.map(i=>this.traverseAnnotationPage(i))),e}traverseCanvas(e){return this.traverseType(this.traverseInlineAnnotationPages(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))))),this.traversals.canvas)}traverseAnnotationPageItems(e){return e.items&&(e.items=e.items.map(i=>this.traverseAnnotation(i))),e}traverseAnnotationPage(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationPageItems(e))),this.traversals.annotationPage)}traverseAnnotationBody(e){return Array.isArray(e.body)?e.body=e.body.map(i=>this.traverseContentResource(i)):e.body&&(e.body=this.traverseContentResource(e.body)),e}traversePosterCanvas(e){return e.posterCanvas&&(e.posterCanvas=this.traverseType(e.posterCanvas,this.traversals.canvas)),e.placeholderCanvas&&(e.placeholderCanvas=this.traverseType(e.placeholderCanvas,this.traversals.canvas)),e.accompanyingCanvas&&(e.accompanyingCanvas=this.traverseType(e.accompanyingCanvas,this.traversals.canvas)),e}traverseAnnotation(e){return this.traverseType(this.traverseLinking(this.traverseAnnotationBody(e)),this.traversals.annotation)}traverseContentResourceLinking(e){return typeof e==\"string\"||!e||e&&e.service&&(e.service=(e.service||[]).map(i=>this.traverseType(i,this.traversals.service))),e}traverseContentResource(e){return e.type===\"Choice\"&&(e.items=e.items.map(i=>this.traverseContentResource(i))),this.traverseType(this.traverseInlineAnnotationPages(this.traverseContentResourceLinking(e)),this.traversals.contentResource)}traverseRangeRanges(e){return e.items&&(e.items=e.items.map(i=>typeof i==\"string\"?this.traverseCanvas({id:i,type:\"Canvas\"}):i.type===\"Manifest\"?this.traverseManifest(i):this.traverseRange(i))),e}traverseRange(e){return this.traverseType(this.traversePosterCanvas(this.traverseDescriptive(this.traverseLinking(this.traverseRangeRanges(e)))),this.traversals.range)}traverseAgent(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.agent)}traverseType(e,i){return i.reduce((n,a)=>{const r=a(n);return typeof r==\"undefined\"&&!this.options.allowUndefinedReturn?n:r},e)}traverseService(e){return this.traverseType(e,this.traversals.service)}traverseUnknown(e){const i=U(e);switch(i){case\"Collection\":return this.traverseCollection(e);case\"Manifest\":return this.traverseManifest(e);case\"Canvas\":return this.traverseCanvas(e);case\"AnnotationPage\":return this.traverseAnnotationPage(e);case\"Annotation\":return this.traverseAnnotation(e);case\"ContentResource\":return this.traverseContentResource(e);case\"Range\":return this.traverseRange(e);case\"Service\":return this.traverseService(e);case\"Agent\":return this.traverseAgent(e);default:throw new Error(`Unknown or unsupported resource type of ${i}`)}}}const V=[\"sc:Collection\",\"sc:Manifest\",\"sc:Canvas\",\"oa:AnnotationList\",\"oa:Annotation\",\"sc:Range\",\"sc:Layer\",\"sc:Sequence\",\"oa:Choice\",\"Service\",\"ContentResource\"];function Ie(t){if(typeof t==\"undefined\"||t===null)throw new Error(\"Null or undefined is not a valid entity.\");if(Array.isArray(t))throw new Error(\"Array is not a valid entity\");if(typeof t!=\"object\")throw new Error(`${typeof t} is not a valid entity`);if(typeof t[\"@type\"]==\"string\"){const e=V.indexOf(t[\"@type\"]);if(e!==-1)return V[e]}if(t.profile)return\"Service\";if(t.format||t[\"@type\"])return\"ContentResource\";throw new Error(\"Resource type is not known\")}class x{traversals;options;constructor(e,i={}){this.traversals={collection:[],manifest:[],canvas:[],annotationList:[],sequence:[],annotation:[],contentResource:[],choice:[],range:[],service:[],layer:[],...e},this.options={convertPropsToArray:!0,mergeMemberProperties:!0,allowUndefinedReturn:!1,...i}}static all(e){return new x({collection:[e],manifest:[e],canvas:[e],annotationList:[e],sequence:[e],annotation:[e],contentResource:[e],choice:[e],range:[e],service:[e],layer:[e]})}traverseCollection(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCollectionItems(e))),this.traversals.collection)}traverseCollectionItems(e){if(this.options.mergeMemberProperties){const i=[...(e.manifests||[]).map(n=>typeof n==\"string\"?{\"@id\":n,\"@type\":\"sc:Manifest\"}:n),...(e.collections||[]).map(n=>typeof n==\"string\"?{\"@id\":n,\"@type\":\"sc:Collection\"}:n),...e.members||[]];delete e.collections,delete e.manifests,e.members=i}return e.manifests&&(e.manifests=e.manifests.map(i=>this.traverseManifest(typeof i==\"string\"?{\"@id\":i,\"@type\":\"sc:Manifest\"}:i))),e.collections&&(e.collections=e.collections.map(i=>this.traverseCollection(typeof i==\"string\"?{\"@id\":i,\"@type\":\"sc:Collection\"}:i))),e.members&&(e.members=e.members.map(i=>typeof i==\"string\"?i:this.traverseUnknown(i))),e}traverseManifest(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseManifestItems(e))),this.traversals.manifest)}traverseManifestItems(e){return e.sequences&&(e.sequences=e.sequences.map(i=>this.traverseSequence(i))),e.structures&&(e.structures=e.structures.map(i=>this.traverseRange(i))),e}traverseSequence(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseSequenceItems(e))),this.traversals.sequence)}traverseSequenceItems(e){return e.canvases&&(e.canvases=e.canvases.map(i=>this.traverseCanvas(i))),e}traverseCanvas(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseCanvasItems(e))),this.traversals.canvas)}traverseCanvasItems(e){return e.images&&(e.images=e.images.map(i=>this.traverseAnnotation(i))),e.otherContent&&(e.otherContent=e.otherContent.map(i=>this.traverseAnnotationList(i))),e}traverseRange(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseRangeItems(e))),this.traversals.range)}traverseRangeItems(e){if(this.options.mergeMemberProperties){const i=[...(e.ranges||[]).map(n=>typeof n==\"string\"?{\"@id\":n,\"@type\":\"sc:Range\"}:n),...(e.canvases||[]).map(n=>typeof n==\"string\"?{\"@id\":n,\"@type\":\"sc:Canvas\"}:n),...e.members||[]];delete e.ranges,delete e.canvases,e.members=i.length?i.map(n=>this.traverseUnknown(n)):void 0}return e}traverseAnnotationList(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationListItems(e))),this.traversals.annotationList)}traverseAnnotationListItems(e){return e.resources&&(e.resources=e.resources.map(i=>this.traverseAnnotation(i))),e}traverseAnnotation(e){return this.traverseType(this.traverseDescriptive(this.traverseLinking(this.traverseAnnotationItems(e))),this.traversals.annotation)}traverseAnnotationItems(e){return e.resource&&(e.resource=this.traverseContentResource(e.resource)),e.on,e}traverseLayer(e){return this.traverseType(this.traverseLinking(this.traverseLayerItems(e)),this.traversals.layer)}traverseLayerItems(e){return e.otherContent&&(e.otherContent=e.otherContent.map(i=>this.traverseAnnotationList(i))),e}traverseChoice(e){return this.traverseType(this.traverseChoiceItems(e),this.traversals.choice)}traverseChoiceItems(e){return e.default&&e.default!==\"rdf:nil\"&&(e.default=this.traverseContentResource(e.default)),e.item&&e.item!==\"rdf:nil\"&&(e.item=e.item.map(i=>this.traverseContentResource(i))),e}traverseService(e){return this.traverseType(this.traverseLinking(e),this.traversals.service)}traverseContentResource(e){return e[\"@type\"]===\"oa:Choice\"?this.traverseChoice(e):this.traverseType(this.traverseDescriptive(this.traverseLinking(e)),this.traversals.contentResource)}traverseUnknown(e){if(!e[\"@type\"]||typeof e==\"string\")return e;switch(Ie(e)){case\"sc:Collection\":return this.traverseCollection(e);case\"sc:Manifest\":return this.traverseManifest(e);case\"sc:Canvas\":return this.traverseCanvas(e);case\"sc:Sequence\":return this.traverseSequence(e);case\"sc:Range\":return this.traverseRange(e);case\"oa:Annotation\":return this.traverseAnnotation(e);case\"oa:AnnotationList\":return this.traverseAnnotationList(e);case\"sc:Layer\":return this.traverseLayer(e);case\"Service\":return this.traverseService(e);case\"oa:Choice\":return this.traverseChoice(e);case\"ContentResource\":return this.traverseContentResource(e)}return e.profile?this.traverseService(e):e}traverseImageResource(e){const i=Array.isArray(e),n=Array.isArray(e)?e:[e],a=[];for(const r of n)typeof r==\"string\"?a.push(this.traverseContentResource({\"@id\":r,\"@type\":\"dctypes:Image\"})):a.push(this.traverseContentResource(r));return!i&&!this.options.convertPropsToArray?a[0]:a}traverseDescriptive(e){return e.thumbnail&&(e.thumbnail=this.traverseImageResource(e.thumbnail)),e.logo&&(e.logo=this.traverseImageResource(e.logo)),e}traverseOneOrMoreServices(e){const i=Array.isArray(e),n=Array.isArray(e)?e:[e],a=[];for(const r of n)a.push(this.traverseService(r));return!i&&!this.options.convertPropsToArray?a[0]:a}traverseLinking(e){return e.related&&(e.related=this.traverseOneOrManyType(e.related,this.traversals.contentResource)),e.rendering&&(e.rendering=this.traverseOneOrManyType(e.rendering,this.traversals.contentResource)),e.service&&(e.service=this.traverseOneOrMoreServices(e.service)),e.seeAlso&&(e.seeAlso=this.traverseOneOrManyType(e.seeAlso,this.traversals.contentResource)),e.within&&(typeof e.within==\"string\"||(e.within=this.traverseOneOrManyType(e.within,this.traversals.contentResource))),e.startCanvas&&(typeof e.startCanvas==\"string\"?e.startCanvas=this.traverseType({\"@id\":e.startCanvas,\"@type\":\"sc:Canvas\"},this.traversals.canvas):e.startCanvas&&this.traverseType(e.startCanvas,this.traversals.canvas)),e.contentLayer&&(typeof e.contentLayer==\"string\"?e.contentLayer=this.traverseLayer({\"@id\":e.contentLayer,\"@type\":\"sc:Layer\"}):e.contentLayer=this.traverseLayer(e.contentLayer)),e}traverseOneOrManyType(e,i){if(!Array.isArray(e))if(this.options.convertPropsToArray)e=[e];else return this.traverseType(e,i);return e.map(n=>this.traverseType(n,i))}traverseType(e,i){return i.reduce((n,a)=>{const r=a(n);return typeof r==\"undefined\"&&!this.options.allowUndefinedReturn?n:r},e)}}const _e=\"http://library.stanford.edu/iiif/image-api/compliance.html#level0\",W=\"http://library.stanford.edu/iiif/image-api/compliance.html#level1\",z=\"http://library.stanford.edu/iiif/image-api/compliance.html#level2\",be=\"http://library.stanford.edu/iiif/image-api/conformance.html#level0\",H=\"http://library.stanford.edu/iiif/image-api/conformance.html#level1\",B=\"http://library.stanford.edu/iiif/image-api/conformance.html#level2\",Re=\"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0\",K=\"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1\",Q=\"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2\",we=\"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0\",X=\"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1\",Y=\"http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2\",Ee=\"http://iiif.io/api/image/1/level0.json\",Le=\"http://iiif.io/api/image/1/profiles/level0.json\",Z=\"http://iiif.io/api/image/1/level1.json\",J=\"http://iiif.io/api/image/1/profiles/level1.json\",ee=\"http://iiif.io/api/image/1/level2.json\",te=\"http://iiif.io/api/image/1/profiles/level2.json\",Te=\"http://iiif.io/api/image/2/level0.json\",Me=\"http://iiif.io/api/image/2/profiles/level0.json\",ie=\"http://iiif.io/api/image/2/level1.json\",ne=\"http://iiif.io/api/image/2/profiles/level1.json\",re=\"http://iiif.io/api/image/2/level2.json\",ae=\"http://iiif.io/api/image/2/profiles/level2.json\",xe=\"level0\",se=\"level1\",oe=\"level2\",Se=\"http://iiif.io/api/image/2/level0\",le=\"http://iiif.io/api/image/2/level1\",ve=\"http://iiif.io/api/image/2/level2\",Oe=[le,ve,W,z,H,B,K,Q,X,Y,Z,J,ee,te,ie,ne,re,ae,se,oe],Pe=[Se,le,ve,_e,W,z,be,H,B,Re,K,Q,we,X,Y,Ee,Le,Z,J,ee,te,Te,Me,ie,ne,re,ae,xe,se,oe],S={attributionLabel:\"Attribution\",lang:\"none\",providerId:\"http://example.org/provider\",providerName:\"Unknown\"};function u(t,e=\"none\"){if(!t)return{};const i=Array.isArray(t)?t:[t],n={};for(const a of i){if(typeof a==\"string\"){n[e]=n[e]?n[e]:[],n[e].push(a||\"\");continue}if(!a[\"@language\"]){n[e]=n[e]?n[e]:[],n[e].push(a[\"@value\"]||\"\");continue}const r=a[\"@language\"];n[r]=n[r]?n[r]:[],n[r].push(a[\"@value\"]||\"\")}return n}function pe(t){if(Array.isArray(t))return pe(t.find(e=>typeof e==\"string\"));if(Pe.indexOf(t)!==-1)return\"level2\";if(Oe.indexOf(t)!==-1)return\"level1\";if(typeof t==\"string\")return t}function Fe(t){const e=Array.isArray(t)?t:[t];for(const i of e)switch(i){case\"http://iiif.io/api/image/2/context.json\":case\"http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2\":return\"ImageService2\";case\"http://iiif.io/api/image/1/context.json\":case\"http://library.stanford.edu/iiif/image-api/1.1/context.json\":return\"ImageService1\";case\"http://iiif.io/api/annex/openannotation/context.json\":return\"ImageApiSelector\"}}function De(t){switch(t){case\"http://iiif.io/api/image/2/level0.json\":case\"http://iiif.io/api/image/2/level1.json\":case\"http://iiif.io/api/image/2/level2.json\":return\"ImageService2\";case\"http://iiif.io/api/auth/1/kiosk\":case\"http://iiif.io/api/auth/1/login\":case\"http://iiif.io/api/auth/1/clickthrough\":case\"http://iiif.io/api/auth/1/external\":case\"http://iiif.io/api/auth/0/kiosk\":case\"http://iiif.io/api/auth/0/login\":case\"http://iiif.io/api/auth/0/clickthrough\":case\"http://iiif.io/api/auth/0/external\":return\"AuthCookieService1\";case\"http://iiif.io/api/auth/1/token\":case\"http://iiif.io/api/auth/0/token\":return\"AuthTokenService1\";case\"http://iiif.io/api/auth/1/logout\":case\"http://iiif.io/api/auth/0/logout\":return\"AuthLogoutService1\";case\"http://iiif.io/api/search/1/search\":case\"http://iiif.io/api/search/0/search\":return\"SearchService1\";case\"http://iiif.io/api/search/1/autocomplete\":case\"http://iiif.io/api/search/0/autocomplete\":return\"AutoCompleteService1\"}}function ke(t){return Array.isArray(t)?t:[t]}function Ne(t){for(const e of[\"sc\",\"oa\",\"dcterms\",\"dctypes\",\"iiif\"])if(t.startsWith(`${e}:`))return t.slice(e.length+1);return t}const je=[\"Collection\",\"Manifest\",\"Annotation\",\"AnnotationPage\",\"Range\",\"Service\"];function O(t){const e=t[\"@id\"]||t.id;let i=t[\"@type\"]||t.type;const n=t.profile||void 0,a=t[\"@context\"]||void 0;if(n){const r=De(n);if(r)return r}if(a){const r=Fe(a);if(r)return r}if(i){if(Array.isArray(i)){if(i.indexOf(\"oa:CssStylesheet\")!==-1)return\"CssStylesheet\";if(i.indexOf(\"cnt:ContentAsText\")!==-1)return\"TextualBody\";i=i[0]}for(const r of[\"sc\",\"oa\",\"dcterms\",\"dctypes\",\"iiif\"])if(i.startsWith(`${r}:`)){i=i.slice(r.length+1);break}switch(i){case\"Layer\":return\"AnnotationCollection\";case\"AnnotationList\":return\"AnnotationPage\";case\"cnt:ContentAsText\":return\"TextualBody\"}}if(i&&je.indexOf(i)!==-1)return i;if(t.format){if(t.format.startsWith(\"image/\"))return\"Image\";if(t.format.startsWith(\"text/\")||t.format===\"application/pdf\")return\"Text\";if(t.format.startsWith(\"application/\"))return\"Dataset\"}return e&&(e.endsWith(\".jpg\")||e.endsWith(\".png\")||e.endsWith(\".jpeg\"))?\"Image\":i||\"unknown\"}const Ge=/http(s)?:\\/\\/(creativecommons.org|rightsstatements.org)[^\"'\\\\<\\n]+/gm;function $e(t){const e=t.match(Ge);return e?e[0]:t}function qe(t,e=\"Rights/License\",i=\"none\"){let n=null;const a=[],r=Array.isArray(t)?t:[t];for(const I of r){const o=I?$e(I):void 0;if(o&&(o.indexOf(\"creativecommons.org\")!==-1||o.indexOf(\"rightsstatements.org\")!==-1)){o.startsWith(\"https://\")?n=`http://${o.slice(8)}`:n=o;continue}o&&a.push({label:{[i]:[e]},value:{[i]:[o]}})}return[n,a]}const Ue=[\"http://iiif.io/api/presentation/2/context.json\",\"http://iiif.io/api/image/2/context.json\",\"http://iiif.io/api/image/1/context.json\",\"http://library.stanford.edu/iiif/image-api/1.1/context.json\",\"http://iiif.io/api/search/1/context.json\",\"http://iiif.io/api/search/0/context.json\",\"http://iiif.io/api/auth/1/context.json\",\"http://iiif.io/api/auth/0/context.json\",\"http://iiif.io/api/annex/openannotation/context.json\"];function Ve(t){if(t){const e=Array.isArray(t)?t:[t],i=[];for(const n of e)n===\"http://iiif.io/api/presentation/2/context.json\"&&i.push(\"http://iiif.io/api/presentation/3/context.json\"),Ue.indexOf(n)===-1&&i.push(n);if(e.length)return i.length===1?i[0]:i}}function We(t){return t?t.map(e=>({label:u(e.label),value:u(e.value)})):[]}function v(t){for(const e in t)(typeof t[e]==\"undefined\"||t[e]===null)&&delete t[e];return t}let he=0;function ce(t,e){const i=encodeURI(t.id||t[\"@id\"]||\"\").trim();return i&&e?`${i}/${e}`:i||(he++,`http://example.org/${t[\"@type\"]}${e?`/${e}`:\"\"}/${he}`)}function p(t){const e=[...t.behavior||[]];return t.viewingHint&&e.push(t.viewingHint),{\"@context\":t[\"@context\"]?Ve(t[\"@context\"]):void 0,id:(t[\"@id\"]||ce(t)).trim(),type:O(t),behavior:e.length?e:void 0,height:t.height?t.height:void 0,width:t.width?t.width:void 0,motivation:t.motivation?Ne(t.motivation):void 0,viewingDirection:t.viewingDirection,profile:t.profile,format:t.format?t.format:void 0,duration:void 0,timeMode:void 0}}function l(t){const[e,i]=qe(t.license),n=[...t.metadata?We(t.metadata):[],...i];return{rights:e,metadata:n.length?n:void 0,label:t.label?u(t.label):void 0,requiredStatement:t.attribution?{label:u(S.attributionLabel),value:u(t.attribution)}:void 0,navDate:t.navDate,summary:t.description?u(t.description):void 0,thumbnail:t.thumbnail}}function ze(t){if(!t.within)return;const e=Array.isArray(t.within)?t.within:[t.within],i=[];for(const n of e)if(typeof n==\"string\"){if(n)switch(t[\"@type\"]){case\"sc:Manifest\":i.push({id:n,type:\"Collection\"});break}}else n[\"@id\"]&&i.push({id:n[\"@id\"],type:O(n)});return i.length?i:void 0}function h(t){const e=t.related?Array.isArray(t.related)?t.related:[t.related]:[],i=t.contentLayer;return{provider:t.logo||e.length?[{id:S.providerId,type:\"Agent\",homepage:e.length?[e[0]]:void 0,logo:t.logo?Array.isArray(t.logo)?t.logo:[t.logo]:void 0,label:u(S.providerName)}]:void 0,partOf:ze(t),rendering:t.rendering,seeAlso:t.seeAlso,start:t.startCanvas,service:t.service?ke(t.service):void 0,supplementary:i?[i]:void 0}}function He(t){return v({...p(t),...l(t),...h(t),items:t.members})}function Be(t){const e=[],i=[];for(const a of t.sequences||[])a.canvases.length&&e.push(...a.canvases),a.behavior&&i.push(...a.behavior);const n=p(t);return i.length&&(n.behavior?n.behavior.push(...i):n.behavior=i),v({...n,...l(t),...h(t),items:e,structures:t.structures})}function Ke(t){return v({...p(t),...l(t),...h(t),items:t.images&&t.images.length?[{id:ce(t,\"annotation-page\"),type:\"AnnotationPage\",items:t.images}]:void 0})}function Qe(t){return v({...p(t),...l(t),...h(t),items:t.resources})}function Xe(t){return!t.canvases||t.canvases.length===0?{canvases:[],behavior:[]}:{canvases:t.canvases,behavior:t.viewingHint?[t.viewingHint]:[]}}function Ye(t){return v({...p(t),...l(t),...h(t),target:typeof t.on==\"string\"?encodeURI(t.on).trim():t.on,body:t.resource})}function Ze(t){const e=t;return v({...p(e),...l(e),...h(e)})}function Je(t){const e=[];return t.default&&t.default!==\"rdf:nil\"&&e.push(t.default),t.item&&t.item!==\"rdf:nil\"&&e.push(...t.item),{...p(t),...l(t),items:e}}function et(t){return v({...p(t),...l(t),...h(t),items:t.members})}function tt(t){const{\"@id\":e,\"@type\":i,\"@context\":n,profile:a,...r}=t;return e&&(r.id=e),r.type=O(t),r.type===\"unknown\"&&(r.type=\"Service\"),a&&(r.profile=pe(a)),v({...r,...l(r)})}function it(t){return v({...p(t),...l(t),...h(t)})}const nt=new x({collection:[He],manifest:[Be],canvas:[Ke],annotationList:[Qe],sequence:[Xe],annotation:[Ye],contentResource:[Ze],choice:[Je],range:[et],service:[tt],layer:[it]});function rt(t){return t&&t[\"@context\"]&&(t[\"@context\"]===\"http://iiif.io/api/presentation/2/context.json\"||t[\"@context\"].indexOf(\"http://iiif.io/api/presentation/2/context.json\")!==-1||t[\"@context\"]===\"http://www.shared-canvas.org/ns/context.json\")||t[\"@context\"]===\"http://iiif.io/api/image/2/context.json\"?nt.traverseUnknown(t):t}const at={Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}};function fe(){return{Collection:{},Manifest:{},Canvas:{},AnnotationPage:{},AnnotationCollection:{},Annotation:{},ContentResource:{},Range:{},Service:{},Selector:{},Agent:{}}}function ue(t,e){if(typeof t==\"string\")return{id:t,type:e};if(!t.id)throw new Error(`Invalid resource does not have an ID (${e})`);return t}function st(t){return(e,i)=>{const n=t[e]?t[e]:{};return a=>{const r=ue(a,i||e);return r&&r.id&&e?(n[r.id]=n[r.id]?Object.assign({},n[r.id],r):Object.assign({},r),{id:r.id,type:e===\"ContentResource\"?e:r.type}):r}}}function ot(t){return(e,i)=>n=>{const{id:a,type:r}=ue(n,i||e);if(typeof a==\"undefined\")throw new Error(\"Found invalid entity without an ID.\");return e===\"ContentResource\"?t[a]=e:t[a]=r,n}}function lt(t){const e=JSON.stringify(t);let i=5381,n=e.length;for(;n;)i=i*33^e.charCodeAt(--n);const r=(i>>>0).toString(16);return r.length%2?\"0\"+r:r}function P(t){return e=>typeof e==\"string\"?{id:e,type:t}:e.id?e.type?e:{type:t,...e}:{id:lt(e),type:t,...e}}function _(t){return e=>({...t,...e})}function b(t){return Array.isArray(t)?t:[t]}function vt(t){return t.body&&(t.body=b(t.body)),t.seeAlso&&(t.seeAlso=b(t.seeAlso)),t.body&&(t.body=b(t.body)),t.audience&&(t.audience=b(t.audience)),t.accessibility&&(t.accessibility=b(t.accessibility)),t.motivation&&(t.motivation=b(t.motivation)),t}function pt(t){const e=rt(t),i=fe(),n={},a=st(i),r=ot(n),o=new L({collection:[_(j),r(\"Collection\"),a(\"Collection\")],manifest:[_(G),r(\"Manifest\"),a(\"Manifest\")],canvas:[_(N),r(\"Canvas\"),a(\"Canvas\")],annotationPage:[P(\"AnnotationPage\"),_(k),r(\"AnnotationPage\"),a(\"AnnotationPage\")],annotation:[P(\"Annotation\"),vt,r(\"Annotation\"),a(\"Annotation\")],contentResource:[P(\"ContentResource\"),r(\"ContentResource\"),a(\"ContentResource\")],range:[_($),r(\"Range\",\"Canvas\"),a(\"Range\",\"Canvas\")],agent:[_(q),r(\"Agent\"),a(\"Agent\")]}).traverseUnknown(e);return{entities:i,resource:o,mapping:n}}const c=\"__$UNSET$__\",F=\"__$UNWRAP$__\";function ht(t,e){const i=t.requests[e],n=t.mapping[e];if(!(!n||i&&i.resourceUri&&!t.entities[n][i.resourceUri]))return t.entities[n][i?i.resourceUri:e]}function de(t){const e={};for(const[i,n]of t){if(i===F&&n!==c)return n;n!==c&&typeof n!=\"undefined\"&&n!==null&&(e[i]=n)}return e}function ct(t,e,i){if(!e.type||!e.id)throw new Error(\"Unknown entity\");if(!i[e.type])throw new Error(`Serializer not found for ${e.type}`);function n(a){const r=i[a.type];if(!r)return c;const I=ht(t,a.id)||(a.id&&a.type?a:null);if(!I)return c;const o=r(I,t,{isTopLevel:e.id===a.id});let R=o.next();for(;!R.done;){const E=R.value;let T=c;if(E)if(Array.isArray(E)){const D=[];for(const Ae of E)D.push(n(Ae));T=D}else T=n(E);R=o.next(T)}return R.value===c?c:de(R.value)}return n(e)}function d(t){if(!t)return;const e=Object.keys(t);if(e.length!==0){if(e.length===1){const i=e[0];if(!i)return\"\";const n=(t[i]||[]).join(\"\");return i===\"@none\"||i===\"none\"||i===\"en\"?n:{\"@language\":i,\"@value\":n}}return e.map(i=>({\"@language\":i,\"@value\":(t[i]||[]).join(\"\")}))}}function me(t){return Array.isArray(t)?t.map(e=>me(e)):typeof t==\"string\"?t:t.type&&t.type===\"Canvas\"?t.id:t}function f(t,e=!1){if(!!t)return t.length>1&&!e?t:t[0]||void 0}function ft(t){if(!!t){if(typeof t==\"string\")return{\"@id\":t};if(\"@id\"in t){const e={...t};return delete e[\"@type\"],e}return{\"@context\":\"http://iiif.io/api/image/2/context.json\",\"@id\":t.id,profile:`http://iiif.io/api/image/2/profiles/${t.profile}.json`}}}function m(t,e){return[[\"@id\",t.id],[\"@type\",e],[\"format\",t.format],[\"height\",t.height],[\"width\",t.width],[\"viewingDirection\",t.viewingDirection!==\"left-to-right\"?t.viewingDirection:void 0]]}function*g(t){const e=t.provider?yield t.provider[0]:void 0;return[[\"label\",d(t.label)],[\"metadata\",t.metadata&&t.metadata.length?t.metadata.map(i=>({label:d(i.label)||\"\",value:d(i.value)||\"\"})):void 0],[\"description\",d(t.summary)],[\"thumbnail\",f(yield t.thumbnail)],[\"navDate\",t.navDate],[\"logo\",e?f(e.logo):void 0],[\"homepage\",e?e.homepage:void 0],[\"attribution\",t.requiredStatement?d(t.requiredStatement.value):void 0]]}function*w(t){return[[\"seeAlso\",f(yield t.seeAlso)],[\"service\",f((t.service||[]).map(ft))],[\"rendering\",f(yield t.rendering)],[\"startCanvas\",t.start?t.start.id:void 0]]}const ut={Manifest:function*(t){return[...m(t,\"sc:Manifest\"),...yield*g(t),...yield*w(t),[\"sequences\",[{\"@id\":`${t.id}/sequence0`,\"@type\":\"sc:Sequence\",canvases:yield t.items}]],[\"structures\",yield t.structures]]},Canvas:function*(t){const i=(yield t.items)[0];return[...m(t,\"sc:Canvas\"),...yield*g(t),...yield*w(t),[\"images\",i?[i.resources]:void 0],[\"annotations\",t.annotations&&t.annotations.length?f(yield t.annotations):void 0]]},AnnotationPage:function*(t){return[...m(t,\"sc:AnnotationList\"),...yield*g(t),[\"resources\",t.items&&t.items.length?f(yield t.items):void 0]]},Annotation:function*(t){return[[\"@id\",t.id],[\"@type\",\"oa:Annotation\"],[\"motivation\",\"sc:painting\"],[\"on\",me(t.target)],[\"resource\",f(yield t.body,!0)]]},ContentResource:function*(t){switch(t.type){case\"Image\":return[...m(t,\"dctypes:Image\"),...yield*g(t),...yield*w(t)];case\"Text\":case\"Dataset\":default:return[...m(t,void 0),...yield*g(t)]}},AnnotationCollection:function*(t){return[[\"@id\",t.id],[\"@type\",\"sc:Layer\"],[\"label\",d(t.label)]]},Collection:function*(t){return[...m(t,\"sc:Collection\"),...yield*g(t),...yield*w(t),[\"members\",yield*t.items]]},Range:function*(t){const e=[],i=[];if(t.items)for(const n of t.items){const a=yield n;e.push({\"@id\":n.id,\"@type\":n.type,label:a?a.label:void 0,within:t.id}),n.type===\"Canvas\"&&i.push(n.id)}return[...m(t,\"sc:Range\"),...yield*g(t),...yield*w(t),[\"canvases\",i.length===e.length?i:void 0],[\"members\",i.length!==e.length?e:void 0]]}};function y(t){return[[\"id\",t.id],[\"type\",t.type],[\"format\",t.format],[\"profile\",t.profile],[\"height\",t.height],[\"width\",t.width],[\"duration\",t.duration||void 0],[\"viewingDirection\",t.viewingDirection!==\"left-to-right\"?t.viewingDirection:void 0],[\"behavior\",t.behavior&&t.behavior.length?t.behavior:void 0],[\"timeMode\",t.timeMode],[\"motivation\",t.motivation]]}function s(t){if(!(!t||t.length===0))return t}function ge(t){if(t&&t.type&&t.type===\"ImageService2\"){const{id:e,type:i,profile:n,...a}=t;return{\"@id\":e,\"@type\":i,profile:n.startsWith(\"http\")?n:`http://iiif.io/api/image/2/${n}.json`,...a}}return t}function ye(t){if(!(!t||t.length===0))return t.map(ge)}function*A(t){return[[\"label\",t.label],[\"metadata\",s(t.metadata)],[\"summary\",t.summary],[\"requiredStatement\",t.requiredStatement],[\"rights\",t.rights],[\"navDate\",t.navDate],[\"language\",t.language],[\"thumbnail\",s(yield t.thumbnail)],[\"placeholderCanvas\",yield t.placeholderCanvas],[\"accompanyingCanvas\",yield t.accompanyingCanvas],[\"provider\",s(yield t.provider)]]}function*C(t){return[[\"seeAlso\",s(yield t.seeAlso)],[\"service\",ye(t.service)],[\"services\",ye(t.services)],[\"rendering\",s(yield t.rendering)],[\"supplementary\",s(yield t.supplementary)],[\"homepage\",s(yield t.homepage)],[\"logo\",s(yield t.logo)],[\"partOf\",s(yield t.partOf)],[\"start\",t.start]]}const dt={Manifest:function*(t,e,{isTopLevel:i}){return i?[[\"@context\",\"http://iiif.io/api/presentation/3/context.json\"],...y(t),...yield*A(t),...yield*C(t),[\"items\",yield t.items],[\"structures\",s(yield t.structures)],[\"annotations\",s(yield t.annotations)]]:[...y(t),...yield*A(t)]},Canvas:function*(t){return[...y(t),...yield*A(t),...yield*C(t),[\"items\",yield t.items],[\"annotations\",s(yield t.annotations)]]},Agent:function*(t){return[[\"id\",t.id],[\"type\",\"Agent\"],[\"label\",t.label],...yield*C(t)]},AnnotationPage:function*(t){return[...Object.entries(t).map(([i,n])=>[i,Array.isArray(n)?s(n):n]).filter(([i,n])=>i!==\"items\"),...yield*C(t),[\"items\",yield t.items]]},Service:function*(t){return[[F,ge(t)]]},Annotation:function*(t){return[...Object.entries(t).map(([i,n])=>[i,Array.isArray(n)?s(n):n]).filter(([i])=>i!==\"body\"),[\"body\",yield t.body]]},ContentResource:function*(t){return[...y(t),...yield*A(t),...yield*C(t),[\"annotations\",s(yield t.annotations)]]},AnnotationCollection:function*(t){return[[\"id\",t.id],[\"type\",\"AnnotationCollection\"],[\"label\",t.label]]},Collection:function*(t,e,{isTopLevel:i}){return i?[[\"@context\",\"http://iiif.io/api/presentation/3/context.json\"],...y(t),...yield*A(t),...yield*C(t),[\"items\",s(yield t.items)]]:[...y(t),...yield*A(t)]},Range:function*(t){const e=[];for(const i of t.items)i.type===\"Range\"?e.push(yield i):e.push(i);return[...y(t),...yield*A(t),...yield*C(t),[\"items\",e],[\"annotations\",s(yield t.annotations)]]}};export{L as Traverse,c as UNSET,F as UNWRAP,at as defaultEntities,q as emptyAgent,Ce as emptyAnnotation,k as emptyAnnotationPage,N as emptyCanvas,j as emptyCollection,G as emptyManifest,$ as emptyRange,fe as getDefaultEntities,U as identifyResource,d as languageString2to3,pt as normalize,ct as serialize,ut as serializeConfigPresentation2,dt as serializeConfigPresentation3,de as serializedFieldsToObject,M as types};\n", "import { normalize, serialize, serializeConfigPresentation2, serializeConfigPresentation3 } from '@iiif/parser';\nimport { createAction } from 'typesafe-actions';\nimport { combineReducers, createStore as createStore$1, applyMiddleware, compose } from 'redux';\n\nconst IMPORT_ENTITIES = \"@iiif/IMPORT_ENTITIES\";\nconst MODIFY_ENTITY_FIELD = \"@iiif/MODIFY_ENTITY_FIELD\";\nconst REORDER_ENTITY_FIELD = \"@iiif/REORDER_ENTITY_FIELD\";\nconst ADD_REFERENCE = \"@iiif/ADD_REFERENCE\";\nconst REMOVE_REFERENCE = \"@iiif/REMOVE_REFERENCE\";\nconst importEntities = createAction(IMPORT_ENTITIES)();\nconst modifyEntityField = createAction(MODIFY_ENTITY_FIELD)();\nconst reorderEntityField = createAction(REORDER_ENTITY_FIELD)();\nconst addReference = createAction(ADD_REFERENCE)();\nconst removeReference = createAction(REMOVE_REFERENCE)();\nconst entityActions = { importEntities, modifyEntityField, reorderEntityField, addReference, removeReference };\n\nconst ADD_MAPPING = \"@iiif/ADD_MAPPING\";\nconst ADD_MAPPINGS = \"@iiif/ADD_MAPPINGS\";\nconst addMapping = createAction(ADD_MAPPING)();\nconst addMappings = createAction(ADD_MAPPINGS)();\n\nconst SET_META_VALUE = \"@iiif/SET_META_VALUE\";\nconst SET_META_VALUE_DYNAMIC = \"@iiif/SET_META_VALUE_DYNAMIC\";\nconst UNSET_META_VALUE = \"@iiif/UNSET_META_VALUE\";\nconst setMetaValue = createAction(SET_META_VALUE)();\nconst setMetaValueDynamic = createAction(SET_META_VALUE_DYNAMIC)();\nconst unsetMetaValue = createAction(UNSET_META_VALUE)();\nconst metaActions = {\n  setMetaValue,\n  setMetaValueDynamic,\n  unsetMetaValue\n};\n\nconst RESOURCE_ERROR = \"RESOURCE_ERROR\";\nconst RESOURCE_LOADING = \"RESOURCE_LOADING\";\nconst RESOURCE_READY = \"RESOURCE_READY\";\nconst REQUEST_RESOURCE = \"@iiif/REQUEST_RESOURCE\";\nconst REQUEST_ERROR = \"@iiif/REQUEST_ERROR\";\nconst REQUEST_MISMATCH = \"@iiif/REQUEST_MISMATCH\";\nconst REQUEST_COMPLETE = \"@iiif/REQUEST_COMPLETE\";\nconst REQUEST_OFFLINE_RESOURCE = \"@iiif/REQUEST_OFFLINE_RESOURCE\";\nconst requestResource = createAction(REQUEST_RESOURCE)();\nconst requestError = createAction(REQUEST_ERROR)();\nconst requestMismatch = createAction(REQUEST_MISMATCH)();\nconst requestComplete = createAction(REQUEST_COMPLETE)();\ncreateAction(REQUEST_OFFLINE_RESOURCE)();\n\nconst BATCH_ACTIONS = \"@iiif/BATCH\";\nconst BATCH_IMPORT = \"@iiif/BATCH_IMPORT\";\nconst batchActions = createAction(BATCH_ACTIONS)();\ncreateAction(BATCH_IMPORT)();\n\nconst actionListFromResource = (id, response) => {\n  const { entities, resource, mapping } = normalize(response);\n  if (resource.id === void 0) {\n    return [requestError({ id, message: \"ID is not defined in resource.\" })];\n  }\n  const actions = [importEntities({ entities }), addMappings({ mapping })];\n  if (resource.id !== id) {\n    actions.push(addMapping({ id, type: resource.type }));\n    actions.push(requestMismatch({ requestId: id, actualId: resource.id }));\n  }\n  actions.push(requestComplete({ id }));\n  return actions;\n};\n\nconst safeIsNaN = Number.isNaN || function ponyfill(value) {\n  return typeof value === \"number\" && value !== value;\n};\nfunction isEqual(first, second) {\n  if (first === second) {\n    return true;\n  }\n  if (safeIsNaN(first) && safeIsNaN(second)) {\n    return true;\n  }\n  return false;\n}\nfunction areInputsEqual(newInputs, lastInputs) {\n  if (!Array.isArray(newInputs) || !Array.isArray(lastInputs)) {\n    return newInputs === lastInputs;\n  }\n  if (newInputs.length !== lastInputs.length) {\n    return false;\n  }\n  for (let i = 0; i < newInputs.length; i++) {\n    if (!isEqual(newInputs[i], lastInputs[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction resolveIfExists(state, url) {\n  const request = state.iiif.requests[url];\n  const resourceType = state.iiif.mapping[url];\n  if (!resourceType || !state.iiif.entities[resourceType][request.resourceUri]) {\n    return void 0;\n  }\n  return state.iiif.entities[resourceType][request.resourceUri];\n}\n\nfunction createFetchHelper(store, fetcher, { waitTimeout = 30 } = {}) {\n  return async (url, options) => {\n    const state = store.getState();\n    const request = state.iiif.requests[url];\n    if (request) {\n      switch (request.loadingState) {\n        case RESOURCE_ERROR:\n          break;\n        case RESOURCE_LOADING: {\n          let cleanupSubscription;\n          let didContinue = false;\n          try {\n            const resolvedEntity = await Promise.race([\n              new Promise((resolve, reject) => {\n                if (didContinue) {\n                  return;\n                }\n                cleanupSubscription = store.subscribe(() => {\n                  const latestState = store.getState();\n                  if (latestState.iiif.requests[url].loadingState === RESOURCE_ERROR) {\n                    reject();\n                    return;\n                  }\n                  if (latestState.iiif.requests[url].loadingState === RESOURCE_READY) {\n                    const maybeResolvedEntity = resolveIfExists(latestState, url);\n                    if (maybeResolvedEntity) {\n                      resolve(maybeResolvedEntity);\n                    } else {\n                      reject();\n                    }\n                  }\n                });\n              }),\n              new Promise((resolve, reject) => setTimeout(() => {\n                didContinue = true;\n                reject();\n              }, waitTimeout * 60))\n            ]);\n            if (cleanupSubscription) {\n              cleanupSubscription();\n            }\n            if (resolvedEntity) {\n              return resolvedEntity;\n            }\n          } catch (e) {\n            if (cleanupSubscription) {\n              cleanupSubscription();\n            }\n            break;\n          }\n          break;\n        }\n        case RESOURCE_READY: {\n          const resolvedEntity = resolveIfExists(state, url);\n          if (resolvedEntity) {\n            return resolvedEntity;\n          }\n          break;\n        }\n      }\n    }\n    store.dispatch(requestResource({ id: url }));\n    try {\n      const resource = await fetcher(url, options);\n      if (!resource.id && !resource[\"@id\"]) {\n        if (resource[\"@type\"]) {\n          resource[\"@id\"] = url;\n          resource.id = url;\n        } else {\n          resource.id = url;\n        }\n      }\n      const toDispatch = actionListFromResource(url, resource);\n      store.dispatch(batchActions({ actions: toDispatch }));\n      return resolveIfExists(store.getState(), url);\n    } catch (err) {\n      store.dispatch(requestError({ id: url, message: err.toString() }));\n      throw err;\n    }\n  };\n}\n\nfunction getDefaultEntities() {\n  return {\n    Collection: {},\n    Manifest: {},\n    Canvas: {},\n    AnnotationPage: {},\n    AnnotationCollection: {},\n    Annotation: {},\n    ContentResource: {},\n    Range: {},\n    Service: {},\n    Selector: {},\n    Agent: {}\n  };\n}\n\nconst mappingReducer = (state = {}, action) => {\n  switch (action.type) {\n    case ADD_MAPPING:\n      return {\n        ...state,\n        [action.payload.id]: action.payload.type\n      };\n    case ADD_MAPPINGS:\n      return {\n        ...state,\n        ...action.payload.mapping\n      };\n    default:\n      return state;\n  }\n};\n\nfunction isReferenceList(state, id, type, key) {\n  return !(!state[type] || !state[type][id] || !state[type][id][key] || !Array.isArray(state[type][id][key]));\n}\n\nconst entitiesReducer = (state = getDefaultEntities(), action) => {\n  switch (action.type) {\n    case MODIFY_ENTITY_FIELD: {\n      if (!state[action.payload.type] || !state[action.payload.type][action.payload.id]) {\n        return state;\n      }\n      const entity = state[action.payload.type][action.payload.id];\n      if (typeof entity === \"string\") {\n        return state;\n      }\n      return {\n        ...state,\n        [action.payload.type]: {\n          ...state[action.payload.type],\n          [action.payload.id]: {\n            ...entity,\n            [action.payload.key]: action.payload.value\n          }\n        }\n      };\n    }\n    case REORDER_ENTITY_FIELD: {\n      if (!isReferenceList(state, action.payload.id, action.payload.type, action.payload.key)) {\n        return state;\n      }\n      const entity = state[action.payload.type][action.payload.id];\n      if (typeof entity === \"string\") {\n        return state;\n      }\n      const result = Array.from(entity[action.payload.key]);\n      const [removed] = result.splice(action.payload.startIndex, 1);\n      result.splice(action.payload.endIndex, 0, removed);\n      return {\n        ...state,\n        [action.payload.type]: {\n          ...state[action.payload.type],\n          [action.payload.id]: {\n            ...entity,\n            [action.payload.key]: result\n          }\n        }\n      };\n    }\n    case IMPORT_ENTITIES: {\n      const keys = Object.keys(action.payload.entities);\n      const toReturn = { ...state };\n      for (const key of keys) {\n        toReturn[key] = {\n          ...state[key] || {},\n          ...action.payload.entities[key] || {}\n        };\n      }\n      return toReturn;\n    }\n    case ADD_REFERENCE: {\n      if (!isReferenceList(state, action.payload.id, action.payload.type, action.payload.key)) {\n        return state;\n      }\n      const entity = state[action.payload.type][action.payload.id];\n      const result = Array.from(entity[action.payload.key]);\n      result.splice(action.payload.index || result.length + 1, 0, action.payload.reference);\n      return {\n        ...state,\n        [action.payload.type]: {\n          ...state[action.payload.type],\n          [action.payload.id]: {\n            ...entity,\n            [action.payload.key]: result\n          }\n        }\n      };\n    }\n    case REMOVE_REFERENCE: {\n      if (!isReferenceList(state, action.payload.id, action.payload.type, action.payload.key)) {\n        return state;\n      }\n      const entity = state[action.payload.type][action.payload.id];\n      const result = Array.from(entity[action.payload.key]);\n      const indexToRemove = action.payload.index || result.findIndex((e) => e && e.id === action.payload.reference.id);\n      if (indexToRemove === -1) {\n        return state;\n      }\n      if (result[indexToRemove]?.id !== action.payload.reference.id) {\n        return state;\n      }\n      result.splice(indexToRemove, 1);\n      return {\n        ...state,\n        [action.payload.type]: {\n          ...state[action.payload.type],\n          [action.payload.id]: {\n            ...entity,\n            [action.payload.key]: result\n          }\n        }\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nconst requestReducer = (state = {}, action) => {\n  switch (action.type) {\n    case REQUEST_RESOURCE:\n    case REQUEST_OFFLINE_RESOURCE:\n      return {\n        ...state,\n        [action.payload.id]: {\n          requestUri: action.payload.id,\n          loadingState: RESOURCE_LOADING,\n          uriMismatch: false,\n          resourceUri: action.payload.id\n        }\n      };\n    case REQUEST_MISMATCH:\n      return {\n        ...state,\n        [action.payload.requestId]: {\n          ...state[action.payload.requestId] || {},\n          uriMismatch: true,\n          resourceUri: action.payload.actualId\n        },\n        [action.payload.actualId]: {\n          requestUri: action.payload.requestId,\n          loadingState: state[action.payload.requestId].loadingState,\n          uriMismatch: true,\n          resourceUri: action.payload.actualId\n        }\n      };\n    case REQUEST_ERROR:\n      return {\n        ...state,\n        [action.payload.id]: {\n          ...state[action.payload.id] || {},\n          loadingState: RESOURCE_ERROR,\n          error: action.payload.message\n        }\n      };\n    case REQUEST_COMPLETE:\n      return {\n        ...state,\n        [action.payload.id]: {\n          ...state[action.payload.id] || {},\n          loadingState: RESOURCE_READY,\n          error: void 0\n        }\n      };\n  }\n  return state;\n};\n\nconst metaReducer = (state = {}, action) => {\n  const { id, updateValue, value, meta, key } = action && action.payload || {};\n  switch (action.type) {\n    case SET_META_VALUE: {\n      return {\n        ...state,\n        [id]: {\n          ...state[id] || {},\n          [meta]: {\n            ...state[id] ? state[id][meta] || {} : {},\n            [key]: value\n          }\n        }\n      };\n    }\n    case SET_META_VALUE_DYNAMIC: {\n      return {\n        ...state,\n        [id]: {\n          ...state[id] || {},\n          [meta]: {\n            ...state[id] ? state[id][meta] || {} : {},\n            [key]: state[id] && state[id][meta] ? updateValue(state[id][meta][key]) : updateValue(void 0)\n          }\n        }\n      };\n    }\n    case UNSET_META_VALUE: {\n      if (state[id] && state[id][meta] && state[id][meta][key]) {\n        return {\n          ...state,\n          [id]: {\n            ...state[id] || {},\n            [meta]: {\n              ...state[id] ? state[id][meta] || {} : {},\n              [key]: void 0\n            }\n          }\n        };\n      }\n      return state;\n    }\n    default:\n      return state;\n  }\n};\n\nfunction createBatchReducer(rootReducer) {\n  return (state, action) => {\n    if (action && action.type === BATCH_ACTIONS) {\n      return action.payload.actions.reduce(rootReducer, state);\n    }\n    if (action && action.type === BATCH_IMPORT) {\n      return action.payload.state;\n    }\n    return rootReducer(state, action);\n  };\n}\n\nconst reducers = combineReducers({\n  mapping: mappingReducer,\n  entities: entitiesReducer,\n  requests: requestReducer,\n  meta: metaReducer\n});\nconst composeEnhancers = typeof window !== \"undefined\" ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose : compose;\nfunction createStore(options = {}) {\n  const {\n    enableDevtools = true,\n    iiifStoreName = \"iiif\",\n    defaultState = {},\n    extraMiddleware = [],\n    customReducers = {}\n  } = options;\n  const rootReducer = combineReducers({ [iiifStoreName]: reducers, ...customReducers });\n  const store = createStore$1(createBatchReducer(rootReducer), defaultState, enableDevtools ? composeEnhancers(applyMiddleware(...extraMiddleware)) : compose(applyMiddleware(...extraMiddleware)));\n  return store;\n}\n\nfunction mitt(n){return {all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e]);},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]));},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e);}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e);});}}}\n\nclass Vault {\n  options;\n  store;\n  emitter;\n  isBatching = false;\n  batchQueue = [];\n  remoteFetcher;\n  staticFetcher;\n  constructor(options, store) {\n    this.options = Object.assign({\n      reducers: {},\n      middleware: [],\n      defaultState: {},\n      customFetcher: this.defaultFetcher,\n      enableDevtools: true\n    }, options || {});\n    this.store = store || createStore({\n      customReducers: this.options.reducers,\n      extraMiddleware: [...this.options.middleware, this.middleware],\n      defaultState: this.options.defaultState,\n      enableDevtools: this.options.enableDevtools\n    });\n    this.emitter = mitt();\n    this.remoteFetcher = createFetchHelper(this.store, this.options.customFetcher);\n    this.staticFetcher = createFetchHelper(this.store, (id, json) => json);\n  }\n  defaultFetcher = (url) => {\n    return fetch(url).then((r) => r.json());\n  };\n  batch(cb) {\n    this.isBatching = true;\n    try {\n      cb(this);\n      this.store.dispatch(batchActions({ actions: this.batchQueue }));\n    } catch (e) {\n      this.batchQueue = [];\n      this.isBatching = false;\n      throw e;\n    }\n    this.batchQueue = [];\n    this.isBatching = false;\n  }\n  async asyncBatch(cb) {\n    this.isBatching = true;\n    try {\n      await cb(this);\n      this.store.dispatch(batchActions({ actions: this.batchQueue }));\n    } catch (e) {\n      this.batchQueue = [];\n      this.isBatching = false;\n      throw e;\n    }\n    this.batchQueue = [];\n    this.isBatching = false;\n  }\n  modifyEntityField(entity, key, value) {\n    this.dispatch(entityActions.modifyEntityField({\n      id: entity.id,\n      type: entity.type,\n      key,\n      value\n    }));\n  }\n  dispatch(action) {\n    if (!this.isBatching) {\n      this.store.dispatch(action);\n    } else {\n      this.batchQueue.push(action);\n    }\n  }\n  middleware = (store) => (next) => (action) => {\n    if (action.type === BATCH_ACTIONS) {\n      for (const realAction of action.payload.actions) {\n        this.emitter.emit(realAction.type, { realAction, state: store.getState() });\n      }\n      const state2 = next(action);\n      for (const realAction of action.payload.actions) {\n        this.emitter.emit(`after:${action.type}`, { action, state: state2 });\n      }\n      return state2;\n    }\n    this.emitter.emit(action.type, { action, state: store.getState() });\n    const state = next(action);\n    this.emitter.emit(`after:${action.type}`, { action, state });\n    return state;\n  };\n  serialize(entity, config) {\n    return serialize(this.getState().iiif, entity, config);\n  }\n  toPresentation2(entity) {\n    return this.serialize(entity, serializeConfigPresentation2);\n  }\n  toPresentation3(entity) {\n    return this.serialize(entity, serializeConfigPresentation3);\n  }\n  hydrate(reference, type) {\n    return this.get(reference, type, { skipSelfReturn: false });\n  }\n  get(reference, type, options = {}) {\n    if (typeof type !== \"string\") {\n      options = type || {};\n      type = void 0;\n    }\n    const { skipSelfReturn = true } = options || {};\n    if (Array.isArray(reference)) {\n      return reference.map((i) => this.get(i, options));\n    }\n    const state = this.getState();\n    if (typeof reference === \"string\") {\n      const _type2 = type ? type : state.iiif.mapping[reference];\n      if (!_type2) {\n        if (skipSelfReturn) {\n          return null;\n        }\n        return { id: reference, type: \"unknown\" };\n      }\n      reference = { id: reference, type: _type2 };\n    }\n    const _type = type ? type : reference.type;\n    const _id = reference.id;\n    const entities = state.iiif.entities[_type];\n    if (!entities) {\n      const request = state.iiif.requests[_id];\n      if (request && request.resourceUri !== _id) {\n        return this.get(request.resourceUri, options);\n      }\n      if (skipSelfReturn) {\n        return null;\n      }\n      return reference;\n    }\n    return entities[reference.id] || (skipSelfReturn ? null : reference);\n  }\n  select(selector) {\n    return selector(this.getState());\n  }\n  getStore() {\n    return this.store;\n  }\n  getState() {\n    return this.store.getState();\n  }\n  loadManifest(id, json) {\n    const _id = typeof id === \"string\" ? id : id.id;\n    return this.load(_id, json);\n  }\n  loadCollection(id, json) {\n    const _id = typeof id === \"string\" ? id : id.id;\n    return this.load(_id, json);\n  }\n  load(id, json) {\n    const _id = typeof id === \"string\" ? id : id.id;\n    if (json) {\n      return this.staticFetcher(_id, json);\n    }\n    return this.remoteFetcher(_id);\n  }\n  areInputsEqual(newInputs, lastInputs) {\n    return areInputsEqual(newInputs, lastInputs);\n  }\n  subscribe(selector, subscription, skipInitial) {\n    if (typeof skipInitial === \"undefined\" && (typeof subscription === \"undefined\" || subscription === false || subscription === true)) {\n      skipInitial = subscription;\n      subscription = selector;\n      selector = (a) => a;\n    }\n    let lastState = skipInitial ? null : selector(this.store.getState());\n    if (!skipInitial) {\n      subscription(lastState, this);\n    }\n    return this.store.subscribe(() => {\n      const state = this.store.getState();\n      const selectedState = selector(state);\n      if (!areInputsEqual(lastState, selectedState)) {\n        subscription(selectedState, this);\n      }\n      lastState = selectedState;\n    });\n  }\n  async ensureLoaded(_id) {\n    const id = typeof _id === \"string\" ? _id : _id.id;\n    if (!this.requestStatus(id)) {\n      await this.load(id);\n    }\n  }\n  requestStatus(id) {\n    return this.select((state) => {\n      return state.iiif.requests[id];\n    });\n  }\n  getResourceMeta(resource, metaKey) {\n    const resourceMeta = this.getState().iiif.meta[resource];\n    if (!resourceMeta) {\n      return void 0;\n    }\n    if (!metaKey) {\n      return resourceMeta;\n    }\n    return resourceMeta[metaKey];\n  }\n  setMetaValue([id, meta, key], newValueOrUpdate) {\n    this.dispatch(typeof newValueOrUpdate === \"function\" ? metaActions.setMetaValueDynamic({\n      id,\n      meta,\n      key,\n      updateValue: newValueOrUpdate\n    }) : metaActions.setMetaValue({\n      id,\n      meta,\n      key,\n      value: newValueOrUpdate\n    }));\n  }\n}\n\nfunction getGlobal() {\n  if (typeof self !== \"undefined\") {\n    return self;\n  }\n  if (typeof window !== \"undefined\") {\n    return window;\n  }\n  if (typeof global !== \"undefined\") {\n    return global;\n  }\n  return {};\n}\n\nfunction globalVault(options) {\n  const g = getGlobal();\n  try {\n    const gv = g[\"IIIF_VAULT\"];\n    if (gv) {\n      return gv;\n    }\n  } catch (e) {\n  }\n  const newVault = new Vault(options);\n  try {\n    g[\"IIIF_VAULT\"] = newVault;\n  } catch (e) {\n  }\n  return newVault;\n}\n\nexport { Vault, globalVault };\n", "export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}", "import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}", "import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing \u201Cwhat changed\u201D. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nvar legacy_createStore = createStore;\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore, legacy_createStore };\n", "import React, { useEffect, useState } from \"react\";\nimport {\n  ExternalResourceTypes,\n  InternationalString,\n  ManifestNormalized,\n} from \"@iiif/presentation-3\";\nimport { getPaintingResource, getSupplementingResources } from \"hooks/use-iiif\";\nimport { useViewerState } from \"context/viewer-context\";\nimport { Wrapper } from \"./Viewer.styled\";\nimport { useMediaQuery } from \"hooks/useMediaQuery\";\nimport { useBodyLocked } from \"hooks/useBodyLocked\";\nimport { media } from \"stitches\";\nimport * as Collapsible from \"@radix-ui/react-collapsible\";\nimport ViewerHeader from \"./Header\";\nimport ViewerContent from \"./Content\";\nimport { LabeledResource } from \"hooks/use-iiif/getSupplementingResources\";\nimport { IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport ErrorFallback from \"components/Viewer/ErrorFallback\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\ninterface ViewerProps {\n  manifest: ManifestNormalized;\n  theme?: any;\n}\n\nconst Viewer: React.FC<ViewerProps> = ({ manifest, theme }) => {\n  /**\n   * Viewer State\n   */\n  const viewerState: any = useViewerState();\n  const { activeCanvas, vault } = viewerState;\n\n  /**\n   * Local state\n   */\n  const [isMedia, setIsMedia] = useState(false);\n  const [isNavigator, setIsNavigator] = useState<boolean>(false);\n  const [isNavigatorOpen, setIsNavigatorOpen] = useState<boolean>(true);\n  const [painting, setPainting] = useState<IIIFExternalWebResource | undefined>(\n    undefined,\n  );\n  const [resources, setResources] = useState<LabeledResource[]>([]);\n\n  /**\n   * Hooks\n   */\n  const [isBodyLocked, setIsBodyLocked] = useBodyLocked(false);\n  const isSmallViewport = useMediaQuery(media.sm);\n\n  useEffect(() => {\n    if (!isSmallViewport) {\n      setIsNavigatorOpen(true);\n      return;\n    }\n    setIsNavigatorOpen(false);\n  }, [isSmallViewport]);\n\n  useEffect(() => {\n    if (!isSmallViewport) {\n      setIsBodyLocked(false);\n      return;\n    }\n    setIsBodyLocked(isNavigatorOpen);\n  }, [isNavigatorOpen]);\n\n  useEffect(() => {\n    const painting = getPaintingResource(vault, activeCanvas);\n    const resources = getSupplementingResources(\n      vault,\n      activeCanvas,\n      \"text/vtt\",\n    );\n    if (painting) {\n      setIsMedia(\n        [\"Sound\", \"Video\"].indexOf(painting.type as ExternalResourceTypes) > -1\n          ? true\n          : false,\n      );\n      setPainting({ ...painting });\n    }\n    setResources(resources);\n    setIsNavigator(resources.length !== 0);\n  }, [activeCanvas]);\n\n  return (\n    <ErrorBoundary FallbackComponent={ErrorFallback}>\n      <Wrapper\n        className={theme}\n        data-body-locked={isBodyLocked}\n        data-navigator={isNavigator}\n        data-navigator-open={isNavigatorOpen}\n      >\n        <Collapsible.Root\n          open={isNavigatorOpen}\n          onOpenChange={setIsNavigatorOpen}\n        >\n          <ViewerHeader\n            manifestLabel={manifest.label as InternationalString}\n            manifestId={manifest.id}\n          />\n          <ViewerContent\n            activeCanvas={activeCanvas}\n            painting={painting as IIIFExternalWebResource}\n            resources={resources}\n            items={manifest.items}\n            isMedia={isMedia}\n            isNavigator={isNavigator}\n            isNavigatorOpen={isNavigatorOpen}\n          />\n        </Collapsible.Root>\n      </Wrapper>\n    </ErrorBoundary>\n  );\n};\n\nexport default Viewer;\n", "import { IIIFExternalWebResource } from \"@iiif/presentation-3\";\n\n// TODO: Fix this type when fixing tests\nfunction getUrl(obj: any) {\n  // No IIIF image service, just return vague id value\n  if (!obj.service) {\n    return obj.id;\n  }\n  // Construct a IIIF Image service url path with params\n  return `${obj.service[0].id}/full/,${obj.height || 500}/0/default.jpg`;\n}\n\n// TODO: Fix this type when fixing all tests\nexport const getAccompanyingCanvasImage = (\n  accompanyingCanvas: any | undefined,\n): string | undefined => {\n  if (!accompanyingCanvas) return;\n  try {\n    /**\n     * Step 1: does a thumbnail item exist on canvas root?\n     */\n    const thumbnail: Array<IIIFExternalWebResource> | undefined =\n      accompanyingCanvas.thumbnail;\n    if (thumbnail && thumbnail.length > 0) {\n      return getUrl(thumbnail[0]);\n    }\n\n    /**\n     * Step 2: Dig into the Annotation Page > Body\n     */\n    return getUrl(accompanyingCanvas.items[0].items[0].body);\n  } catch (e) {\n    console.error(\"Error retrieving accompanying canvas image\", e);\n    return;\n  }\n};\n", "import {\n  Annotation,\n  AnnotationBody,\n  AnnotationPageNormalized,\n  Canvas,\n  CanvasNormalized,\n  ContentResource,\n  ExternalResourceTypes,\n  IIIFExternalWebResource,\n} from \"@iiif/presentation-3\";\n\nexport interface CanvasEntity {\n  canvas: CanvasNormalized | undefined;\n  accompanyingCanvas: Canvas | undefined;\n  annotationPage: AnnotationPageNormalized | undefined;\n  annotations: Array<Annotation | undefined>;\n}\n\nexport const getCanvasByCriteria = (\n  vault: any,\n  item: Canvas,\n  motivation: string,\n  paintingType: Array<ExternalResourceTypes>,\n): CanvasEntity => {\n  const entity: CanvasEntity = {\n    canvas: undefined,\n    accompanyingCanvas: undefined,\n    annotationPage: undefined,\n    annotations: [],\n  };\n\n  const filterAnnotations = (annotation: Annotation) => {\n    if (annotation) {\n      // Handle invalid annotations\n      if (!annotation.body || !annotation.motivation) {\n        console.error(\n          `Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'`,\n          annotation,\n        );\n        return;\n      }\n\n      if (!annotation.body) return;\n\n      let annotationBody = annotation.body as\n        | ContentResource\n        | ContentResource[];\n\n      if (Array.isArray(annotationBody)) annotationBody = annotationBody[0];\n\n      const resource: IIIFExternalWebResource = vault.get(annotationBody.id);\n      if (!resource) return;\n      switch (motivation) {\n        case \"painting\":\n          if (\n            annotation.target === item.id &&\n            annotation.motivation &&\n            annotation.motivation[0] === \"painting\" &&\n            paintingType.includes(resource.type)\n          )\n            annotation.body = resource;\n          return annotation;\n        case \"supplementing\":\n          return;\n        default: {\n          throw new Error(`Invalid annotation motivation.`);\n        }\n      }\n    }\n  };\n\n  entity.canvas = vault.get(item);\n\n  if (entity.canvas) {\n    entity.annotationPage = vault.get(entity.canvas.items[0]);\n    entity.accompanyingCanvas = entity.canvas?.accompanyingCanvas\n      ? vault.get(entity.canvas?.accompanyingCanvas)\n      : undefined;\n  }\n\n  if (entity.annotationPage)\n    entity.annotations = vault\n      .get(entity.annotationPage.items)\n      .filter(filterAnnotations);\n\n  return entity;\n};\n", "import { IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport { getCanvasByCriteria } from \"./index\";\n\nexport const getPaintingResource = (\n  vault: any,\n  id: string,\n): IIIFExternalWebResource | undefined => {\n  const canvasEntity = getCanvasByCriteria(\n    vault,\n    { id, type: \"Canvas\" },\n    \"painting\",\n    [\"Image\", \"Sound\", \"Video\"],\n  );\n\n  if (canvasEntity.annotations.length === 0) return;\n\n  if (canvasEntity.annotations[0] && canvasEntity.annotations[0].body)\n    return canvasEntity.annotations[0].body as IIIFExternalWebResource;\n\n  return;\n};\n", "import {\n  Annotation,\n  AnnotationPage,\n  CanvasNormalized,\n  ContentResource,\n  IIIFExternalWebResource,\n  InternationalString,\n} from \"@iiif/presentation-3\";\n\nexport interface LabeledResource {\n  id?: string;\n  type: \"Dataset\" | \"Image\" | \"Video\" | \"Sound\" | \"Text\";\n  format?: string;\n  label: InternationalString;\n  language?: string | string[];\n  processingLanguage?: string;\n  textDirection?: \"ltr\" | \"rtl\" | \"auto\";\n}\n\n// Get webVtt annotations from activeCanvas\nexport const getSupplementingResources = (\n  vault: any,\n  activeCanvas: string,\n  format: string,\n): Array<LabeledResource> => {\n  const canvas: CanvasNormalized = vault.get({\n    id: activeCanvas,\n    type: \"Canvas\",\n  });\n\n  if (!canvas?.annotations || !canvas.annotations[0]) return [];\n\n  const annotationPage: AnnotationPage = vault.get(canvas.annotations[0]);\n\n  const annotations: Annotation[] = vault.get(annotationPage.items);\n  if (!Array.isArray(annotations)) return [];\n\n  return annotations\n    .filter((annotation) => {\n      if (!annotation.body) return;\n      if (annotation.motivation?.includes(\"supplementing\")) {\n        let annotationBody = annotation.body as\n          | ContentResource\n          | ContentResource[];\n\n        if (Array.isArray(annotationBody)) annotationBody = annotationBody[0];\n\n        const resource: IIIFExternalWebResource = vault.get(annotationBody.id);\n        if (resource.format === format) {\n          annotation.body = resource;\n          return annotation;\n        }\n      }\n    })\n    .map((filtered: Annotation) => {\n      return filtered.body as LabeledResource;\n    });\n};\n", "import { InternationalString } from \"@iiif/presentation-3\";\n\n// Get string from a IIIF pres 3 label by language code\nexport const getLabel = (\n  label: InternationalString,\n  language: string = \"en\",\n) => {\n  /*\n   * If no label exists, return an empty string.\n   */\n  if (!label) return \"\";\n\n  /*\n   * If InternationalString code does not exist on label, then\n   * return what may be there, ex: label.none[0] OR label.fr[0]\n   */\n  if (!label[language]) {\n    const codes: Array<string> = Object.getOwnPropertyNames(label);\n    if (codes.length > 0) return label[codes[0]];\n  }\n\n  /*\n   * Return label value for InternationalString code `en`\n   */\n  return label[language];\n};\n", "import {\n  AnnotationBody,\n  ContentResource,\n  IIIFExternalWebResource,\n} from \"@iiif/presentation-3\";\nimport { CanvasEntity } from \"./getCanvasByCriteria\";\n\nexport const getThumbnail = (\n  vault: any,\n  entity: CanvasEntity,\n  width: number,\n  height: number,\n) => {\n  /*\n   * 1. Initiate empty candidates array.\n   */\n  let candidates: Array<IIIFExternalWebResource> = [];\n\n  /*\n   * 2. Check if canvas has an explicitly assigned IIIF thumbnail.\n   */\n  if (entity.canvas)\n    if (entity.canvas.thumbnail.length > 0) {\n      const canvasThumbnail: IIIFExternalWebResource = vault.get(\n        entity.canvas.thumbnail[0],\n      );\n      candidates.push(canvasThumbnail);\n    }\n\n  if (entity.annotations[0]) {\n    /*\n     * 2. Check if painting annotation has an explicitly assigned IIIF thumbnail.\n     */\n    if (entity.annotations[0].thumbnail)\n      if (entity.annotations[0].thumbnail.length > 0) {\n        const annotationThumbnail: IIIFExternalWebResource = vault.get(\n          entity.annotations[0].thumbnail[0],\n        );\n        candidates.push(annotationThumbnail);\n      }\n\n    /*\n     * 3. Check if painting annotation is of type Image.\n     */\n    if (!entity.annotations[0].body) return;\n    const annotationBody = entity.annotations[0]\n      .body as IIIFExternalWebResource;\n\n    if (annotationBody.type === \"Image\") candidates.push(annotationBody);\n  }\n\n  /*\n   * 4. Validate candidates and make selection.\n   */\n  if (candidates.length === 0) return;\n\n  const selectedCandidate: IIIFExternalWebResource = {\n    id: candidates[0].id,\n    format: candidates[0].format,\n    type: candidates[0].type,\n    width: width,\n    height: height,\n  };\n\n  /*\n   * 5. Return (for time being crudely) constructed image object.\n   */\n  const thumbnailContent = selectedCandidate;\n  //console.log(\"thumbnailContent\", thumbnailContent);\n\n  return thumbnailContent;\n};\n", "import { createStitches } from \"@stitches/react\";\n\nexport const theme = {\n  colors: {\n    /*\n     * Black and dark grays in a light theme.\n     * Must contrast to 4.5 or greater with `secondary`.\n     */\n    primary: \"#1a1d1e\",\n    primaryMuted: \"#26292b\",\n    primaryAlt: \"#151718\",\n\n    /*\n     * Key brand color(s).\n     * Must contrast to 4.5 or greater with `secondary`.\n     */\n    accent: \"#006adc\",\n    accentMuted: \"#5eb0ef\",\n    accentAlt: \"#00254d\",\n\n    /*\n     * White and light grays in a light theme.\n     * Must contrast to 4.5 or greater with `primary` and  `accent`.\n     */\n    secondary: \"#FFFFFF\",\n    secondaryMuted: \"#e6e8eb\",\n    secondaryAlt: \"#c1c8cd\",\n  },\n  fonts: {\n    sans: \"'Inter', Arial, sans-serif\",\n    display: \"'Calistoga', 'Inter', Arial, sans-serif\",\n  },\n  transitions: {\n    all: \"all 500ms cubic-bezier(0.16, 1, 0.3, 1)\",\n  },\n};\n\nexport const media = {\n  xxs: \"(max-width: 349px)\",\n  xs: \"(max-width: 575px)\",\n  sm: \"(max-width: 767px)\",\n  md: \"(max-width: 991px)\",\n  xl: \"(max-width: 1199px)\",\n  lg: \"(min-width: 1200px)\",\n};\n\nexport const { styled, css, keyframes, createTheme } = createStitches({\n  theme,\n  media,\n});\n", "import { styled } from \"stitches\";\nimport * as Collapsible from \"@radix-ui/react-collapsible\";\n\nconst MediaWrapper = styled(\"div\", {\n  position: \"relative\",\n  zIndex: \"0\",\n});\n\nconst Content = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"row\",\n  overflow: \"hidden\",\n\n  \"@sm\": {\n    flexDirection: \"column\",\n  },\n});\n\nconst Main = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: \"1\",\n  flexShrink: \"1\",\n  width: \"61.8%\",\n\n  \"@sm\": {\n    width: \"100%\",\n  },\n});\n\nconst CollapsibleTrigger = styled(Collapsible.Trigger, {\n  display: \"none\",\n  background: \"transparent\",\n  border: \"none\",\n  margin: \"0\",\n  padding: \"0\",\n  transition: \"$all\",\n  opacity: \"1\",\n  marginTop: \"0\",\n\n  \"&[data-navigator='false']\": {\n    opacity: \"0\",\n    marginTop: \"-59px\",\n  },\n\n  \"@sm\": {\n    display: \"flex\",\n\n    \"> span\": {\n      display: \"flex\",\n      flexGrow: \"1\",\n      margin: \"1rem 1rem 0\",\n    },\n  },\n});\n\nconst CollapsibleContent = styled(Collapsible.Content, {\n  width: \"100%\",\n  display: \"flex\",\n});\n\nconst Aside = styled(\"aside\", {\n  display: \"flex\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  width: \"38.2%\",\n\n  \"@sm\": {\n    width: \"100%\",\n  },\n});\n\nconst Wrapper = styled(\"section\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  padding: \"1.618rem\",\n  fontFamily: \"$sans\",\n  backgroundColor: \"$secondary\",\n  fontSmooth: \"auto\",\n  webkitFontSmoothing: \"antialiased\",\n\n  \"> div\": {\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: \"1\",\n    justifyContent: \"flex-start\",\n\n    \"@sm\": {\n      [`& ${Content}`]: {\n        flexGrow: \"1\",\n      },\n\n      [`& ${Main}`]: {\n        flexGrow: \"0\",\n      },\n    },\n  },\n\n  \"@sm\": {\n    padding: \"0\",\n  },\n\n  \"&[data-navigator-open='true']\": {\n    \"@sm\": {\n      position: \"fixed\",\n      height: \"100%\",\n      width: \"100%\",\n      top: \"0\",\n      left: \"0\",\n      zIndex: \"2500000000\",\n\n      [`& ${MediaWrapper}`]: {\n        display: \"none\",\n      },\n\n      [`& ${CollapsibleContent}`]: {\n        height: \"100%\",\n      },\n    },\n  },\n});\n\nexport {\n  Wrapper,\n  Content,\n  Main,\n  MediaWrapper,\n  CollapsibleContent,\n  CollapsibleTrigger,\n  Aside,\n};\n", "import { useEffect, useState } from \"react\";\n\nexport const useMediaQuery = (mediaQuery: string) => {\n  const match = () => {\n    if (!window.matchMedia) {\n      return false;\n    }\n    return window.matchMedia(mediaQuery).matches;\n  };\n\n  const [isMatch, setIsMatch] = useState<boolean>(match);\n\n  useEffect(() => {\n    const handler = () => setIsMatch(match);\n    window.addEventListener(\"resize\", handler);\n    return () => window.removeEventListener(\"resize\", handler);\n  });\n\n  return isMatch;\n};\n", "import { useEffect, useLayoutEffect, useState } from \"react\";\n\ntype ReturnType = [boolean, (locked: boolean) => void];\n\nexport const useBodyLocked = (initialLocked = false): ReturnType => {\n  const [locked, setLocked] = useState(initialLocked);\n\n  useLayoutEffect(() => {\n    if (!locked) {\n      return;\n    }\n\n    const originalOverflow = document.documentElement.style.overflow;\n\n    document.documentElement.style.overflow = \"hidden\";\n\n    return () => {\n      document.documentElement.style.overflow = originalOverflow;\n    };\n  }, [locked]);\n\n  useEffect(() => {\n    if (locked !== initialLocked) {\n      setLocked(initialLocked);\n    }\n  }, [initialLocked]);\n\n  return [locked, setLocked];\n};\n", "import React from \"react\";\nimport { Header, IIIFBadgeButton, IIIFBadgeContent } from \"./Header.styled\";\nimport { InternationalString } from \"@iiif/presentation-3\";\nimport { getLabel } from \"hooks/use-iiif\";\nimport { Popover } from \"@nulib/design-system\";\nimport IIIFBadge from \"./IIIFBadge\";\nimport CopyText from \"components/CopyText\";\nimport { useViewerState } from \"context/viewer-context\";\n\ninterface Props {\n  manifestId: string;\n  manifestLabel: InternationalString;\n}\n\nconst ViewerHeader: React.FC<Props> = ({ manifestId, manifestLabel }) => {\n  const viewerState: any = useViewerState();\n  const { configOptions } = viewerState;\n\n  return (\n    <Header>\n      {configOptions.showTitle && (\n        <span>{getLabel(manifestLabel as InternationalString, \"en\")}</span>\n      )}\n      {configOptions.showIIIFBadge && (\n        <Popover>\n          <IIIFBadgeButton>\n            <IIIFBadge />\n          </IIIFBadgeButton>\n          <IIIFBadgeContent>\n            <button\n              onClick={(e) => {\n                e.preventDefault();\n                window.open(manifestId, \"_blank\");\n              }}\n            >\n              View Manifest\n            </button>\n            <CopyText textPrompt=\"Copy Manifest URL\" textToCopy={manifestId} />\n          </IIIFBadgeContent>\n        </Popover>\n      )}\n    </Header>\n  );\n};\n\nexport default ViewerHeader;\n", "import { styled } from \"stitches\";\nimport { Popover } from \"@nulib/design-system\";\n\nconst IIIFBadgeButton = styled(Popover.Trigger, {\n  width: \"30px\",\n  padding: \"5px\",\n});\n\nconst IIIFBadgeContent = styled(Popover.Content, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  fontSize: \"0.8333rem\",\n\n  button: {\n    display: \"flex\",\n    textDecoration: \"none\",\n    fontFamily: \"$sans\",\n    marginBottom: \"0.5em\",\n    color: \"$accentAlt\",\n    cursor: \"pointer\",\n    background: \"$secondary\",\n    border: \"none\",\n\n    [\"&:last-child\"]: {\n      marginBottom: \"0\",\n    },\n  },\n});\n\nconst Header = styled(\"header\", {\n  display: \"flex\",\n  backgroundColor: \"transparent !important\",\n  justifyContent: \"space-between\",\n  padding: \"0 0 0.5rem\",\n\n  span: {\n    fontSize: \"1.25rem\",\n    fontWeight: \"700\",\n    fontFamily: \"$display\",\n\n    \"@sm\": {\n      padding: \"1rem\",\n      fontSize: \"1rem\",\n    },\n  },\n});\n\nexport { Header, IIIFBadgeButton, IIIFBadgeContent };\n", "import React from \"react\";\n\nconst IIIFBadge: React.FC = () => {\n  const red = \"#ed1d33\";\n  const blue = \"#2873ab\";\n\n  return (\n    <svg viewBox=\"0 0 493.35999 441.33334\" id=\"iiif-logo\" version=\"1.1\">\n      <title>IIIF Manifest Options</title>\n      <g transform=\"matrix(1.3333333,0,0,-1.3333333,0,441.33333)\">\n        <g transform=\"scale(0.1)\">\n          <path\n            style={{ fill: blue }}\n            d=\"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5\"\n          />\n          <path\n            style={{ fill: blue }}\n            d=\"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18\"\n          />\n          <path\n            style={{ fill: red }}\n            d=\"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5\"\n          />\n          <path\n            style={{ fill: red }}\n            d=\"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18\"\n          />\n          <path\n            style={{ fill: blue }}\n            d=\"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5\"\n          />\n          <path\n            style={{ fill: blue }}\n            d=\"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18\"\n          />\n          <path\n            style={{ fill: red }}\n            d=\"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n};\n\nexport default IIIFBadge;\n", "import React from \"react\";\nimport { styled } from \"stitches\";\nimport { useCopyToClipboard, CopyStatus } from \"hooks/useCopyToClipboard\";\n\nconst Status = styled(\"span\", {\n  display: \"flex\",\n  alignContent: \"center\",\n  alignItems: \"center\",\n  padding: \"0.125rem 0.25rem 0\",\n  marginTop: \"-0.125rem\",\n  marginLeft: \"0.5rem\",\n  backgroundColor: \"$accent\",\n  color: \"$secondary\",\n  borderRadius: \"3px\",\n  fontSize: \"0.6111rem\",\n  textTransform: \"uppercase\",\n  lineHeight: \"1em\",\n});\n\nconst CopyTextStatus: React.FC<{ status: CopyStatus }> = ({ status }) => {\n  if (!status) return null;\n\n  return <Status data-copy-status={status}>{status}</Status>;\n};\n\nexport const CopyText: React.FC<{ textPrompt: string; textToCopy: string }> = ({\n  textPrompt,\n  textToCopy,\n}) => {\n  const [copyStatus, copyText] = useCopyToClipboard(textToCopy);\n  return (\n    <button onClick={copyText}>\n      {textPrompt} <CopyTextStatus status={copyStatus} />\n    </button>\n  );\n};\n\nexport default CopyText;\n", "import { useCallback, useEffect, useState } from \"react\";\n\nexport type CopyStatus = undefined | \"copied\" | \"failed\";\n\nexport const useCopyToClipboard = (\n  text: string,\n  notifyTimeout = 2500,\n): [CopyStatus, () => void] => {\n  const [copyStatus, setCopyStatus] = useState<CopyStatus>();\n  const copy = useCallback(() => {\n    navigator.clipboard.writeText(text).then(\n      () => setCopyStatus(\"copied\"),\n      () => setCopyStatus(\"failed\"),\n    );\n  }, [text]);\n\n  useEffect(() => {\n    if (!copyStatus) {\n      return;\n    }\n\n    const timeoutId = setTimeout(() => setCopyStatus(undefined), notifyTimeout);\n\n    return () => clearTimeout(timeoutId);\n  }, [copyStatus]);\n\n  return [copyStatus, copy];\n};\n", "import React from \"react\";\nimport Media from \"components/Media/Media\";\nimport Navigator from \"components/Navigator/Navigator\";\nimport Player from \"components/Player/Player\";\nimport ImageViewer from \"components/ImageViewer/ImageViewer\";\nimport { Button } from \"@nulib/design-system\";\nimport { Canvas, IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport {\n  Content,\n  Main,\n  CollapsibleTrigger,\n  CollapsibleContent,\n  MediaWrapper,\n  Aside,\n} from \"./Viewer.styled\";\nimport { LabeledResource } from \"hooks/use-iiif/getSupplementingResources\";\nimport { CurrentTimeProvider } from \"context/current-time-context\";\n\ninterface Props {\n  activeCanvas: string;\n  painting: IIIFExternalWebResource;\n  resources: LabeledResource[];\n  items: Canvas[];\n  isMedia: boolean;\n  isNavigator: boolean;\n  isNavigatorOpen: boolean;\n}\n\nconst ViewerContent: React.FC<Props> = ({\n  activeCanvas,\n  painting,\n  resources,\n  items,\n  isMedia,\n  isNavigator,\n  isNavigatorOpen,\n}) => {\n  return (\n    <Content>\n      <CurrentTimeProvider>\n        <Main>\n          {isMedia ? (\n            <Player\n              painting={painting as IIIFExternalWebResource}\n              resources={resources}\n            />\n          ) : (\n            <ImageViewer {...(painting as IIIFExternalWebResource)} />\n          )}\n          <CollapsibleTrigger data-navigator={isNavigator}>\n            <Button as=\"span\">\n              {isNavigatorOpen ? \"View Media Items\" : \"View Navigator\"}\n            </Button>\n          </CollapsibleTrigger>\n          {items.length > 1 && (\n            <MediaWrapper>\n              <Media items={items} activeItem={0} />\n            </MediaWrapper>\n          )}\n        </Main>\n        {isNavigator && (\n          <Aside>\n            <CollapsibleContent>\n              <Navigator\n                activeCanvas={activeCanvas}\n                defaultResource={resources[0].id as string}\n                resources={resources}\n              />\n            </CollapsibleContent>\n          </Aside>\n        )}\n      </CurrentTimeProvider>\n    </Content>\n  );\n};\n\nexport default ViewerContent;\n", "import React, { useEffect, useState } from \"react\";\nimport { Group } from \"./Media.styled\";\nimport { CanvasEntity } from \"hooks/use-iiif/getCanvasByCriteria\";\nimport { getCanvasByCriteria, getLabel, getThumbnail } from \"hooks/use-iiif\";\nimport {\n  Canvas,\n  CanvasNormalized,\n  ExternalResourceTypes,\n} from \"@iiif/presentation-3\";\nimport { useViewerState, useViewerDispatch } from \"context/viewer-context\";\nimport Thumbnail from \"./Thumbnail\";\nimport { getResourceType } from \"hooks/use-iiif/getResourceType\";\nimport Controls from \"./Controls\";\n\ninterface MediaProps {\n  items: Canvas[];\n  activeItem: number;\n}\n\nconst Media: React.FC<MediaProps> = ({ items }) => {\n  const dispatch: any = useViewerDispatch();\n  const state: any = useViewerState();\n  const { activeCanvas, vault } = state;\n\n  const [filter, setFilter] = useState<String>(\"\");\n  const [mediaItems, setMediaItems] = useState<Array<CanvasEntity>>([]);\n  const [activeIndex, setActiveIndex] = useState<number>(0);\n\n  const scrollRef = React.useRef<HTMLDivElement>(null);\n\n  const motivation = \"painting\";\n  // TODO: Type this as an enum\n  const paintingType: ExternalResourceTypes[] = [\"Image\", \"Sound\", \"Video\"];\n\n  const handleChange = (canvasId: string) => {\n    if (activeCanvas !== canvasId)\n      dispatch({\n        type: \"updateActiveCanvas\",\n        canvasId: canvasId,\n      });\n  };\n\n  useEffect(() => {\n    for (const item of items) {\n      const canvasEntity: CanvasEntity = getCanvasByCriteria(\n        vault,\n        item,\n        motivation,\n        paintingType,\n      );\n\n      if (canvasEntity.annotations.length > 0)\n        setMediaItems((mediaItems) => [...mediaItems, canvasEntity]);\n    }\n  }, []);\n\n  useEffect(() => {\n    mediaItems.forEach((item, index) => {\n      if (item?.canvas)\n        if (item.canvas.id === activeCanvas) setActiveIndex(index);\n    });\n  }, [activeCanvas]);\n\n  useEffect(() => {\n    const element = document.querySelector<HTMLElement>(\n      `[data-canvas=\"${activeIndex}\"]`,\n    ) as Element;\n\n    if (element instanceof HTMLElement && scrollRef.current) {\n      const leftPos =\n        element.offsetLeft -\n        scrollRef.current.offsetWidth / 2 +\n        element.offsetWidth / 2;\n      scrollRef.current.scrollTo({ left: leftPos, behavior: \"smooth\" });\n    }\n  }, [activeIndex]);\n\n  const handleFilter = (value: String) => setFilter(value);\n\n  const handleCanvasToggle = (step: -1 | 1) => {\n    const canvasEntity = mediaItems[activeIndex + step];\n    if (canvasEntity?.canvas) handleChange(canvasEntity.canvas.id);\n  };\n\n  return (\n    <>\n      <Controls\n        handleFilter={handleFilter}\n        handleCanvasToggle={handleCanvasToggle}\n        activeIndex={activeIndex}\n        canvasLength={mediaItems.length}\n      />\n      <Group aria-label=\"select item\" data-testid=\"media\" ref={scrollRef}>\n        {mediaItems\n          .filter((item) => {\n            if (item.canvas?.label) {\n              const label = getLabel(item.canvas.label);\n              if (Array.isArray(label))\n                return label[0].toLowerCase().includes(filter.toLowerCase());\n            }\n          })\n          .map((item, index) => (\n            <Thumbnail\n              canvas={item.canvas as CanvasNormalized}\n              canvasIndex={index}\n              handleChange={handleChange}\n              isActive={activeCanvas === item?.canvas?.id ? true : false}\n              key={item?.canvas?.id}\n              thumbnail={getThumbnail(vault, item, 200, 200)}\n              type={getResourceType(item.annotations[0])}\n            />\n          ))}\n      </Group>\n    </>\n  );\n};\n\nexport default Media;\n", "import * as RadioGroup from \"@radix-ui/react-radio-group\";\nimport { styled } from \"stitches\";\n\nconst Group = styled(RadioGroup.Root, {\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexGrow: \"1\",\n  padding: \"1.618rem 0.618rem 1.618rem 0 \",\n  overflowX: \"scroll\",\n  position: \"relative\",\n  zIndex: \"0\",\n\n  \"@sm\": {\n    padding: \"1rem\",\n  },\n});\n\nexport { Group };\n", "import React from \"react\";\nimport { getLabel } from \"hooks/use-iiif\";\nimport { convertTime } from \"services/utils\";\nimport {\n  CanvasNormalized,\n  IIIFExternalWebResource,\n  InternationalString,\n} from \"@iiif/presentation-3\";\nimport { Icon, Tag } from \"@nulib/design-system\";\nimport { Duration, Item, Spacer, Type } from \"./Thumbnail.styled\";\n\n/**\n * Determine appropriate icon by resource type\n */\ninterface IconPathProps {\n  type: string;\n}\n\nconst IconPath: React.FC<IconPathProps> = ({ type }) => {\n  switch (type) {\n    case \"Sound\":\n      return <Icon.Audio />;\n    case \"Image\":\n      return <Icon.Image />;\n    case \"Video\":\n      return <Icon.Video />;\n    default:\n      return <Icon.Image />;\n  }\n};\n\n/**\n * Render thumbnail for IIIF canvas item\n */\nexport interface ThumbnailProps {\n  canvas: CanvasNormalized;\n  canvasIndex: number;\n  isActive: boolean;\n  thumbnail?: IIIFExternalWebResource;\n  type: string;\n  handleChange: (arg0: string) => void;\n}\n\nconst Thumbnail: React.FC<ThumbnailProps> = ({\n  canvas,\n  canvasIndex,\n  isActive,\n  thumbnail,\n  type,\n  handleChange,\n}) => {\n  const label = getLabel(canvas.label as InternationalString, \"en\") as string;\n\n  return (\n    <Item\n      aria-checked={isActive}\n      data-testid=\"media-thumbnail\"\n      data-canvas={canvasIndex}\n      onClick={() => handleChange(canvas.id)}\n      value={canvas.id}\n    >\n      <figure>\n        <div>\n          {thumbnail?.id && <img src={thumbnail.id} alt={label} />}\n\n          <Type>\n            <Tag isIcon data-testid=\"thumbnail-tag\">\n              <Spacer />\n              <Icon aria-label={type}>\n                <IconPath type={type} />\n              </Icon>\n              {[\"Video\", \"Sound\"].includes(type) && (\n                <Duration>{convertTime(canvas.duration as number)}</Duration>\n              )}\n            </Tag>\n          </Type>\n        </div>\n        <figcaption data-testid=\"fig-caption\">{label}</figcaption>\n      </figure>\n    </Item>\n  );\n};\n\nexport default Thumbnail;\n", "export const cleanTime = (standardNotation: string) => {\n  var array = standardNotation.toString().split(\":\");\n  var hours: number = Math.ceil(parseInt(array[0]));\n  var minutes: number = Math.ceil(parseInt(array[1]));\n  var seconds: string = zeroPad(Math.ceil(parseInt(array[2])), 2);\n\n  // Insure time with Hours is formatted as \"HH:MM:SS\"\n  let formattedMinutes =\n    hours !== 0 && minutes < 10 ? (minutes + \"\").padStart(2, \"0\") : minutes;\n\n  let time: string = `${formattedMinutes}:${seconds}`;\n\n  if (hours !== 0) {\n    time = `${hours}:${time}`;\n  }\n\n  return time;\n};\n\nexport const convertTime = (duration: number) => {\n  const standardNotation: string = new Date(duration * 1000)\n    .toISOString()\n    .substr(11, 8);\n  return cleanTime(standardNotation);\n};\n\nexport const convertTimeToSeconds = (standardNotation: string) => {\n  var hms: Array<string> = standardNotation.split(\":\");\n  var seconds: number = +hms[0] * 60 * 60 + +hms[1] * 60 + +hms[2];\n  return seconds;\n};\n\nconst zeroPad = (num: number, places: number) =>\n  String(num).padStart(places, \"0\");\n", "import * as RadioGroup from \"@radix-ui/react-radio-group\";\nimport { styled } from \"stitches\";\nimport { Tag } from \"@nulib/design-system\";\n\nconst Type = styled(\"span\", {\n  display: \"flex\",\n});\n\nconst Spacer = styled(\"span\", {\n  display: \"flex\",\n  width: \"1.2111rem\",\n  height: \"0.7222rem\",\n});\n\nconst Duration = styled(\"span\", {\n  display: \"inline-flex\",\n  marginLeft: \"5px\",\n  marginBottom: \"-1px\",\n});\n\nconst Item = styled(RadioGroup.Item, {\n  display: \"flex\",\n  flexShrink: \"0\",\n  margin: \"0 1.618rem 0 0\",\n  padding: \"0\",\n  cursor: \"pointer\",\n  background: \"none\",\n  border: \"none\",\n  fontFamily: \"inherit\",\n  lineHeight: \"1.25em\",\n  fontSize: \"1rem\",\n  textAlign: \"left\",\n\n  \"&:last-child\": {\n    marginRight: \"1rem\",\n  },\n\n  \"@sm\": {\n    margin: \"0 1rem 0 0\",\n\n    \"&:last-child\": {\n      marginRight: \"0\",\n    },\n  },\n\n  figure: {\n    margin: \"0\",\n    width: \"161.8px\",\n\n    \"@sm\": {\n      width: \"123px\",\n    },\n\n    \"> div\": {\n      position: \"relative\",\n      display: \"flex\",\n      backgroundColor: \"$secondaryAlt\",\n      width: \"inherit\",\n      height: \"100px\",\n      overflow: \"hidden\",\n      borderRadius: \"3px\",\n      transition: \"$all\",\n\n      \"@sm\": {\n        height: \"76px\",\n      },\n\n      img: {\n        width: \"100%\",\n        height: \"100%\",\n        objectFit: \"cover\",\n        filter: \"blur(0)\",\n        transform: \"scale3d(1, 1, 1)\",\n        transition: \"$all\",\n        color: \"transparent\",\n      },\n\n      [`& ${Type}`]: {\n        position: \"absolute\",\n        right: \"0.5rem\",\n        bottom: \"0.5rem\",\n\n        \"@sm\": {\n          right: \"0\",\n          bottom: \"0\",\n        },\n\n        [`& ${Tag}`]: {\n          margin: \"0\",\n          paddingLeft: \"0\",\n          fontSize: \"0.7222rem\",\n          backgroundColor: \"#000d\",\n          color: \"$secondary\",\n          fill: \"$secondary\",\n\n          \"@sm\": {\n            borderBottomLeftRadius: \"0\",\n            borderTopRightRadius: \"0\",\n          },\n        },\n      },\n    },\n\n    figcaption: {\n      marginTop: \"0.5rem\",\n      color: \"$primaryMuted\",\n      fontWeight: \"400\",\n      fontSize: \"0.8333rem\",\n      display: \"-webkit-box\",\n      overflow: \"hidden\",\n      MozBoxOrient: \"vertical\",\n      WebkitLineClamp: \"5\",\n\n      \"@sm\": {\n        fontSize: \"0.8333rem\",\n      },\n    },\n  },\n\n  \"&[aria-checked='true']\": {\n    figure: {\n      \"> div\": {\n        backgroundColor: \"$primaryAlt\",\n\n        \"&::before\": {\n          position: \"absolute\",\n          zIndex: \"1\",\n          color: \"$secondaryMuted\",\n          content: \"Active Item\",\n          textTransform: \"uppercase\",\n          fontWeight: \"700\",\n          fontSize: \"0.6111rem\",\n          letterSpacing: \"0.03rem\",\n          display: \"flex\",\n          width: \"100%\",\n          height: \"100%\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          textAlign: \"center\",\n          textShadow: \"5px 5px 5px #0003\",\n        },\n\n        img: {\n          opacity: \"0.3\",\n          transform: \"scale3d(1.1, 1.1, 1.1)\",\n          filter: \"blur(2px)\",\n        },\n\n        [`& ${Type}`]: {\n          [`& ${Tag}`]: {\n            backgroundColor: \"$accent\",\n          },\n        },\n      },\n    },\n\n    figcaption: {\n      fontWeight: \"700\",\n      color: \"$primary\",\n    },\n  },\n});\n\nexport { Duration, Item, Spacer, Type };\n", "export const getResourceType = (annotation: any): string => {\n  if (!annotation.body) return \"Image\";\n\n  return annotation.body.type;\n};\n", "import React, { useEffect, useState } from \"react\";\nimport { Button, Direction, Form, Input, Wrapper } from \"./Controls.styled\";\nimport useKeyPress from \"hooks/useKeyPress\";\n\ninterface Props {\n  handleCanvasToggle: (arg0: -1 | 1) => void;\n  handleFilter: (arg0: String) => void;\n  activeIndex: number;\n  canvasLength: number;\n}\nconst PreviousIcon: React.FC = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n      <title>Arrow Back</title>\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"45\"\n        d=\"M244 400L100 256l144-144M120 256h292\"\n      />\n    </svg>\n  );\n};\n\nconst NextIcon: React.FC = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n      <title>Arrow Forward</title>\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"45\"\n        d=\"M268 112l144 144-144 144M392 256H100\"\n      />\n    </svg>\n  );\n};\n\nconst CloseIcon: React.FC = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n      <title>Close</title>\n      <path d=\"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z\" />\n    </svg>\n  );\n};\n\nconst SearchIcon: React.FC = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n      <title>Search</title>\n      <path d=\"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z\" />\n    </svg>\n  );\n};\n\nconst Controls: React.FC<Props> = ({\n  handleCanvasToggle,\n  handleFilter,\n  activeIndex,\n  canvasLength,\n}) => {\n  const [toggleFilter, setToggleFilter] = useState<boolean>(false);\n  const [isNextDisabled, setIsNextDisabled] = useState<boolean>(false);\n  const [isPreviousDisabled, setIsPreviousDisabled] = useState<boolean>(false);\n\n  useEffect(() => {\n    activeIndex === 0\n      ? setIsPreviousDisabled(true)\n      : setIsPreviousDisabled(false);\n    activeIndex === canvasLength - 1\n      ? setIsNextDisabled(true)\n      : setIsNextDisabled(false);\n  }, [activeIndex]);\n\n  /**\n   * dismiss filtering if Escape key is pressed\n   */\n  useKeyPress(\"Escape\", () => {\n    setToggleFilter(false);\n    handleFilter(\"\");\n  });\n\n  /**\n   * reset filtering on manual toggle button press\n   */\n  const handleFilterToggle = () => {\n    setToggleFilter((prevToggleFilter) => !prevToggleFilter);\n    handleFilter(\"\");\n  };\n\n  /**\n   * handle value changes on Input\n   */\n  const handleFilterChange = (event: React.ChangeEvent<HTMLInputElement>) =>\n    handleFilter(event.target.value);\n\n  return (\n    <Wrapper isToggle={toggleFilter}>\n      <Form>\n        {toggleFilter && (\n          <Input autoFocus onChange={handleFilterChange} placeholder=\"Search\" />\n        )}\n        {!toggleFilter && (\n          <Direction>\n            <Button\n              onClick={() => handleCanvasToggle(-1)}\n              disabled={isPreviousDisabled}\n              type=\"button\"\n            >\n              <PreviousIcon />\n            </Button>\n            <span>\n              {activeIndex + 1} of {canvasLength}\n            </span>\n            <Button\n              onClick={() => handleCanvasToggle(1)}\n              disabled={isNextDisabled}\n              type=\"button\"\n            >\n              <NextIcon />\n            </Button>\n          </Direction>\n        )}\n        <Button onClick={handleFilterToggle} type=\"button\">\n          {toggleFilter ? <CloseIcon /> : <SearchIcon />}\n        </Button>\n      </Form>\n    </Wrapper>\n  );\n};\n\nexport default Controls;\n", "import { styled } from \"stitches\";\n\nconst Form = styled(\"div\", {\n  position: \"absolute\",\n  right: \"1rem\",\n  top: \"1rem\",\n  display: \"flex\",\n  justifyContent: \"flex-end\",\n  zIndex: \"1\",\n});\n\nconst Input = styled(\"input\", {\n  flexGrow: \"1\",\n  border: \"none\",\n  backgroundColor: \"$secondaryMuted\",\n  color: \"$primary\",\n  marginRight: \"1rem\",\n  height: \"2rem\",\n  padding: \"0 1rem\",\n  borderRadius: \"2rem\",\n  fontFamily: \"$sans\",\n  fontSize: \"1rem\",\n  lineHeight: \"1rem\",\n  boxShadow: \"inset 1px 1px 2px #0003\",\n\n  \"&::placeholder\": {\n    color: \"$primaryMuted\",\n  },\n});\n\nconst Button = styled(\"button\", {\n  display: \"flex\",\n  background: \"none\",\n  border: \"none\",\n  width: \"2rem !important\",\n  height: \"2rem !important\",\n  padding: \"0\",\n  margin: \"0\",\n  fontWeight: \"700\",\n  borderRadius: \"2rem\",\n  backgroundColor: \"$accent\",\n  color: \"$secondary\",\n  cursor: \"pointer\",\n  boxSizing: \"content-box !important\",\n  transition: \"$all\",\n\n  svg: {\n    height: \"60%\",\n    width: \"60%\",\n    padding: \"20%\",\n    fill: \"$secondary\",\n    stroke: \"$secondary\",\n    opacity: \"1\",\n    filter: \"drop-shadow(5px 5px 5px #000D)\",\n    boxSizing: \"inherit\",\n    transition: \"$all\",\n  },\n\n  \"&:disabled\": {\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\",\n    svg: { opacity: \"0.25\" },\n  },\n});\n\nconst Direction = styled(\"div\", {\n  display: \"flex\",\n  marginRight: \"0.618rem\",\n  backgroundColor: \"$accentAlt\",\n  borderRadius: \"2rem\",\n  boxShadow: \"5px 5px 5px #0003\",\n  color: \"$secondary\",\n  alignItems: \"center\",\n\n  \"> span\": {\n    display: \"flex\",\n    margin: \"0 0.5rem\",\n    fontSize: \"0.7222rem\",\n  },\n\n  [`& ${Button}`]: {\n    // boxShadow: \"none\",\n  },\n});\n\nconst Wrapper = styled(\"div\", {\n  display: \"flex\",\n  position: \"relative\",\n  zIndex: \"1\",\n  width: \"100%\",\n  padding: \"0\",\n  transition: \"$all\",\n\n  variants: {\n    isToggle: {\n      true: {\n        paddingTop: \"2.618rem\",\n\n        [`& ${Form}`]: {\n          width: \"calc(100% - 2rem)\",\n\n          \"@sm\": {\n            width: \"calc(100% - 2rem)\",\n          },\n        },\n      },\n    },\n  },\n});\n\nexport { Button, Direction, Form, Input, Wrapper };\n", "import { useEffect } from \"react\";\n/**\n * useKeyPress\n * @param {string} key - the name of the key to respond to, compared against event.key\n * @param {function} action - the action to perform on key press\n */\nconst useKeyPress = (key: string, action: () => void) => {\n  useEffect(() => {\n    function onKeyup(e: KeyboardEvent) {\n      if (e.key === key) action();\n    }\n    window.addEventListener(\"keyup\", onKeyup);\n    return () => window.removeEventListener(\"keyup\", onKeyup);\n  }, []);\n};\n\nexport default useKeyPress;\n", "import React, { useEffect, useState } from \"react\";\nimport { InternationalString } from \"@iiif/presentation-3\";\nimport { Content, List, Scroll, Trigger, Wrapper } from \"./Navigator.styled\";\nimport { LabeledResource } from \"hooks/use-iiif/getSupplementingResources\";\nimport { getLabel } from \"hooks/use-iiif\";\nimport Resource from \"./Resource\";\n\ninterface NavigatorProps {\n  activeCanvas: string;\n  defaultResource: string;\n  resources?: Array<LabeledResource>;\n}\n\nexport const Navigator: React.FC<NavigatorProps> = ({\n  activeCanvas,\n  defaultResource,\n  resources,\n}) => {\n  const [activeResource, setActiveResource] = useState<string>(defaultResource);\n\n  useEffect(() => {\n    setActiveResource(defaultResource);\n  }, [activeCanvas, resources]);\n\n  const handleValueChange = (value: string) => {\n    setActiveResource(value);\n  };\n\n  if (!resources) return <></>;\n\n  return (\n    <Wrapper\n      data-testid=\"navigator\"\n      defaultValue={defaultResource}\n      onValueChange={handleValueChange}\n      orientation=\"horizontal\"\n      value={activeResource}\n    >\n      <List aria-label=\"select chapter\" data-testid=\"navigator-list\">\n        {resources.map(({ id, label }) => (\n          <Trigger key={id} value={id as string}>\n            {getLabel(label as InternationalString, \"en\")}\n          </Trigger>\n        ))}\n      </List>\n      <Scroll>\n        {resources.map((resource) => {\n          return (\n            <Content key={resource.id} value={resource.id as string}>\n              <Resource resource={resource} />\n            </Content>\n          );\n        })}\n      </Scroll>\n    </Wrapper>\n  );\n};\n\nexport default Navigator;\n", "import * as Tabs from \"@radix-ui/react-tabs\";\nimport { styled } from \"stitches\";\n\nconst Wrapper = styled(Tabs.Root, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\",\n  height: \"100%\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  position: \"relative\",\n  zIndex: \"1\",\n  boxShadow: \"-5px -5px 5px #00000011\",\n\n  \"@sm\": {\n    marginTop: \"0.5rem\",\n    boxShadow: \"none\",\n  },\n\n  \"&:after\": {\n    position: \"absolute\",\n    bottom: 0,\n    content: \"\",\n    width: \"100%\",\n    height: \"1rem\",\n    backgroundImage: `linear-gradient(0deg, #FFFFFF 0%, #FFFFFF00 100%)`,\n    zIndex: 1,\n\n    \"@sm\": {\n      backgroundImage: \"none\",\n    },\n  },\n});\n\nconst List = styled(Tabs.List, {\n  display: \"flex\",\n  flexGrow: \"0\",\n  margin: \"0 1.618rem\",\n  borderBottom: \"4px solid $secondaryAlt\",\n  backgroundColor: \"$secondary\",\n\n  \"@sm\": {\n    margin: \"0 1rem\",\n  },\n});\n\nconst Trigger = styled(Tabs.Trigger, {\n  display: \"flex\",\n  position: \"relative\",\n  padding: \"0.5rem 1rem\",\n  background: \"none\",\n  backgroundColor: \"transparent\",\n  color: \"$primaryMuted\",\n  border: \"none\",\n  fontFamily: \"inherit\",\n  fontSize: \"1rem\",\n  marginRight: \"1rem\",\n  lineHeight: \"1rem\",\n  whiteSpace: \"nowrap\",\n  cursor: \"pointer\",\n  fontWeight: 700,\n  transition: \"$all\",\n\n  \"&::after\": {\n    width: \"0\",\n    height: \"4px\",\n    content: \"\",\n    backgroundColor: \"$primaryMuted\",\n    position: \"absolute\",\n    bottom: \"-4px\",\n    left: \"0\",\n    transition: \"$all\",\n  },\n\n  \"&:hover\": {\n    color: \"$primary\",\n  },\n\n  \"&[data-state='active']\": {\n    color: \"$accent\",\n\n    \"&::after\": {\n      width: \"100%\",\n      backgroundColor: \"$accent\",\n    },\n  },\n});\n\nconst Content = styled(Tabs.Content, {\n  display: \"flex\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  position: \"absolute\",\n  top: \"0\",\n  left: \"0\",\n  \"&[data-state='active']\": {\n    width: \"100%\",\n    height: \"calc(100% - 2rem)\",\n    padding: \"1rem 0\",\n  },\n});\n\nconst Scroll = styled(\"div\", {\n  position: \"relative\",\n  height: \"100%\",\n  width: \"100%\",\n  overflowY: \"scroll\",\n});\n\nexport { Content, List, Scroll, Trigger, Wrapper };\n", "import React, { useEffect } from \"react\";\nimport { getLabel } from \"hooks/use-iiif\";\nimport { InternationalString } from \"@iiif/presentation-3\";\nimport { Group } from \"./Cue.styled\";\nimport useWebVtt, {\n  NodeWebVttCue,\n  NodeWebVttCueNested,\n} from \"hooks/use-webvtt\";\nimport Menu from \"components/Navigator/Menu\";\n\n// @ts-ignore\nimport { parse } from \"node-webvtt\";\n\ninterface Resource {\n  resource: any;\n}\n\nconst Resource: React.FC<Resource> = ({ resource }) => {\n  const [cues, setCues] = React.useState<Array<NodeWebVttCueNested>>([]);\n  const { id, label } = resource;\n  const { createNestedCues, orderCuesByTime } = useWebVtt();\n\n  useEffect(() => {\n    fetch(id, {\n      headers: {\n        \"Content-Type\": \"text/plain\",\n        Accept: \"application/json\",\n      },\n    })\n      .then((response) => response.text())\n      .then((data) => {\n        const flatCues = parse(data).cues as unknown as Array<NodeWebVttCue>;\n        const orderedCues = orderCuesByTime(flatCues);\n        const nestedCues = createNestedCues(orderedCues);\n        setCues(nestedCues);\n      })\n      .catch((error) => console.error(id, error.toString()));\n  }, [id]);\n\n  return (\n    <Group\n      aria-label={`navigate ${getLabel(label as InternationalString, \"en\")}`}\n    >\n      <Menu items={cues} />\n    </Group>\n  );\n};\n\nexport default Resource;\n", "import * as RadioGroup from \"@radix-ui/react-radio-group\";\nimport { styled, keyframes } from \"stitches\";\n\nconst spin = keyframes({\n  from: { transform: \"rotate(360deg)\" },\n  to: { transform: \"rotate(0deg)\" },\n});\n\nexport const Group = styled(RadioGroup.Root, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\",\n});\n\nexport const Item = styled(RadioGroup.Item, {\n  position: \"relative\",\n  cursor: \"pointer\",\n  display: \"flex\",\n  width: \"100%\",\n  justifyContent: \"space-between\",\n  textAlign: \"left\",\n  margin: \"0\",\n  padding: \"0.5rem 1.618rem\",\n  fontFamily: \"inherit\",\n  lineHeight: \"1.25em\",\n  fontSize: \"1rem\",\n  color: \"$primaryMuted\",\n  border: \"none\",\n  background: \"none\",\n\n  \"@sm\": {\n    padding: \"0.5rem 1rem\",\n    fontSize: \"0.8333rem\",\n  },\n\n  \"&::before\": {\n    content: \"\",\n    width: \"12px\",\n    height: \"12px\",\n    borderRadius: \"12px\",\n    position: \"absolute\",\n    backgroundColor: \"$primaryMuted\",\n    opacity: \"0\",\n    left: \"8px\",\n    marginTop: \"3px\",\n    boxSizing: \"content-box\",\n\n    \"@sm\": {\n      content: \"unset\",\n    },\n  },\n\n  \"&::after\": {\n    content: \"\",\n    width: \"4px\",\n    height: \"6px\",\n    position: \"absolute\",\n    backgroundColor: \"$secondary\",\n    opacity: \"0\",\n    clipPath: \"polygon(100% 50%, 0 100%, 0 0)\",\n    left: \"13px\",\n    marginTop: \"6px\",\n    boxSizing: \"content-box\",\n\n    \"@sm\": {\n      content: \"unset\",\n    },\n  },\n\n  strong: {\n    marginLeft: \"1rem\",\n  },\n\n  \"&:hover\": {\n    color: \"$accent\",\n\n    \"&::before\": {\n      backgroundColor: \"$accent\",\n      opacity: \"1\",\n    },\n\n    \"&::after\": {\n      content: \"\",\n      width: \"4px\",\n      height: \"6px\",\n      position: \"absolute\",\n      backgroundColor: \"$secondary\",\n      clipPath: \"polygon(100% 50%, 0 100%, 0 0)\",\n      opacity: \"1\",\n    },\n  },\n\n  \"&[aria-checked='true']\": {\n    color: \"$primary\",\n    backgroundColor: \"$secondaryMuted\",\n    fontFamily: \"$sansBold\",\n\n    \"&::before\": {\n      content: \"\",\n      width: \"6px\",\n      height: \"6px\",\n      position: \"absolute\",\n      backgroundColor: \"transparent\",\n      border: \"3px solid $accentMuted\",\n      borderRadius: \"12px\",\n      left: \"8px\",\n      marginTop: \"4px\",\n      opacity: \"1\",\n      animation: \"1s linear infinite\",\n      animationName: spin,\n      boxSizing: \"content-box\",\n\n      \"@sm\": {\n        content: \"unset\",\n      },\n    },\n\n    \"&::after\": {\n      content: \"\",\n      width: \"6px\",\n      height: \"6px\",\n      position: \"absolute\",\n      backgroundColor: \"transparent\",\n      border: \"3px solid $accent\",\n      clipPath: \"polygon(100% 0, 100% 100%, 0 0)\",\n      borderRadius: \"12px\",\n      left: \"8px\",\n      marginTop: \"4px\",\n      opacity: \"1\",\n      animation: \"1.5s linear infinite\",\n      animationName: spin,\n      boxSizing: \"content-box\",\n\n      \"@sm\": {\n        content: \"unset\",\n      },\n    },\n  },\n});\n", "import { v4 as uuidv4 } from \"uuid\";\n\nexport interface NodeWebVttCue {\n  identifier?: string;\n  start: number;\n  end: number;\n  text: string;\n  styles?: string;\n}\nexport interface NodeWebVttCueNested extends NodeWebVttCue {\n  children?: Array<NodeWebVttCueNested>;\n}\n\nconst useWebVtt = () => {\n  function addIdentifiersToParsedCues(\n    cues: Array<NodeWebVttCue>,\n  ): Array<NodeWebVttCue> {\n    const newCues = cues.map((cue) => {\n      const identifier = cue.identifier || uuidv4();\n      return { ...cue, identifier };\n    });\n    return newCues;\n  }\n\n  function createNestedCues(flat: Array<NodeWebVttCue>): Array<NodeWebVttCue> {\n    // Add identifier values to any cues which don't have them\n    const idCues = addIdentifiersToParsedCues(flat);\n\n    function getNestedChildren(\n      arr: Array<NodeWebVttCueNested>,\n      parent: string | null | undefined,\n    ) {\n      const out: Array<NodeWebVttCueNested> = [];\n\n      arr.forEach((item) => {\n        // Grab parent cues if they exist\n        const currentItemParents = arr.filter((arrItem) => {\n          return (\n            item.start >= arrItem.start &&\n            item.end <= arrItem.end &&\n            item.identifier !== arrItem.identifier\n          );\n        });\n\n        // An item in the flat list could have multiple parents,\n        // so lets find the most specific parent.  Let's sort the parents\n        // by smallest window of time between \"start\" and \"end\"\n        // values.  Then we pick the first element, which could be \"undefined\"\n        // for root level cues.\n        const currentItemParent = currentItemParents.sort((a, b) => {\n          const aDuration = a.end - a.start;\n          const bDuration = b.end - b.start;\n          if (aDuration === bDuration) return 0;\n          return aDuration < bDuration ? -1 : 1;\n        })[0];\n\n        // Is the current item's parent same as target parent?\n        if (\n          (!currentItemParent && !parent) ||\n          currentItemParent?.identifier === parent\n        ) {\n          // Find children of the current item\n          const children = getNestedChildren(arr, item.identifier);\n\n          if (children.length) {\n            item.children = children;\n          }\n\n          out.push(item);\n        }\n      });\n\n      return out;\n    }\n\n    const nestedCues = getNestedChildren(idCues, null);\n    return nestedCues;\n  }\n\n  /**\n   * Is a cue a child of another cue\n   * @param cue Object\n   * @param cues Array\n   * @returns Boolean\n   */\n  function isChild(\n    cue: NodeWebVttCue,\n    cues: Array<NodeWebVttCue> = [],\n  ): boolean {\n    return cues.some(\n      (currentCue) =>\n        cue.start >= currentCue.start && cue.end <= currentCue.end,\n    );\n  }\n\n  /**\n   * Sort Cues by cue start time\n   * @param cues\n   * @returns Array\n   */\n  function orderCuesByTime(\n    cues: Array<NodeWebVttCue> = [],\n  ): Array<NodeWebVttCue> {\n    return cues.sort((cue1, cue2) => cue1.start - cue2.start);\n  }\n\n  return {\n    addIdentifiersToParsedCues,\n    createNestedCues,\n    isChild,\n    orderCuesByTime,\n  };\n};\n\nexport default useWebVtt;\n", "import React from \"react\";\nimport { NodeWebVttCueNested } from \"hooks/use-webvtt\";\nimport Cue from \"components/Navigator/Cue\";\nimport { MenuStyled } from \"components/Navigator/Menu.styled\";\n\ninterface MenuProps {\n  items: Array<NodeWebVttCueNested>;\n}\n\nconst Menu: React.FC<MenuProps> = ({ items }) => {\n  return (\n    <MenuStyled>\n      {items.map(({ text, start, end, children: cueChildren, identifier }) => {\n        return (\n          <li key={identifier}>\n            <Cue label={text} start={start} end={end} />\n            {cueChildren && <Menu items={cueChildren} />}\n          </li>\n        );\n      })}\n    </MenuStyled>\n  );\n};\n\nexport default Menu;\n", "import React from \"react\";\nimport { Item } from \"./Cue.styled\";\nimport { convertTime } from \"services/utils\";\nimport { CurrentTimeContext } from \"context/current-time-context\";\n\ninterface Props {\n  label: string;\n  start: number;\n  end: number;\n}\n\nconst Cue: React.FC<Props> = ({ label, start, end }) => {\n  const { currentTime, updateStartTime } = React.useContext(CurrentTimeContext);\n  const isActive: boolean = start <= currentTime && currentTime < end;\n\n  const handleClick = () => {\n    updateStartTime(start);\n  };\n\n  return (\n    <Item\n      aria-checked={isActive}\n      data-testid=\"navigator-cue\"\n      onClick={handleClick}\n      value={label}\n    >\n      {label}\n      <strong>{convertTime(start)}</strong>\n    </Item>\n  );\n};\n\nexport default Cue;\n", "import React from \"react\";\n\nexport type CurrentTimeContextShape = {\n  currentTime: number;\n  startTime: number;\n  updateStartTime: (t: number) => void;\n  updateCurrentTime: (t: number) => void;\n};\n\nconst defaultValue: CurrentTimeContextShape = {\n  currentTime: 0,\n  startTime: 0,\n  updateStartTime: () => {},\n  updateCurrentTime: () => {},\n};\nexport const CurrentTimeContext = React.createContext(defaultValue);\n\nexport const CurrentTimeProvider = ({\n  children,\n}: {\n  children: React.ReactNode;\n}) => {\n  const [currentTime, setCurrentTime] = React.useState(\n    defaultValue.currentTime,\n  );\n  const [startTime, setStartTime] = React.useState(0);\n  const updateStartTime = (t: number) => setStartTime(t);\n  const updateCurrentTime = (t: number) => setCurrentTime(t);\n\n  return (\n    <CurrentTimeContext.Provider\n      value={{ currentTime, startTime, updateStartTime, updateCurrentTime }}\n    >\n      {children}\n    </CurrentTimeContext.Provider>\n  );\n};\n", "import { styled } from \"stitches\";\nimport { Item } from \"components/Navigator/Cue.styled\";\n\nexport const MenuStyled = styled(\"ul\", {\n  listStyle: \"none\",\n  paddingLeft: \"1rem\",\n  position: \"relative\",\n\n  \"&&:first-child\": {\n    paddingLeft: \"0\",\n  },\n\n  \"& li ul\": {\n    [`& ${Item}`]: {\n      backgroundColor: \"unset\",\n\n      \"&::before\": {\n        content: \"none\",\n      },\n      \"&::after\": {\n        content: \"none\",\n      },\n    },\n  },\n\n  \"&:first-child\": {\n    margin: \"0 0 1.618rem\",\n  },\n});\n", "import React from \"react\";\nimport Hls from \"hls.js\";\nimport { PlayerWrapper } from \"./Player.styled\";\nimport { IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport { LabeledResource } from \"hooks/use-iiif/getSupplementingResources\";\nimport AudioVisualizer from \"./AudioVisualizer\";\nimport { CurrentTimeContext } from \"context/current-time-context\";\nimport { useViewerState } from \"context/viewer-context\";\nimport Track from \"./Track\";\nimport {\n  getAccompanyingCanvasImage,\n  getCanvasByCriteria,\n} from \"hooks/use-iiif\";\n\n// Set referrer header as a NU domain: ie. meadow.rdc-staging.library.northwestern.edu\n\ninterface PlayerProps {\n  painting: IIIFExternalWebResource;\n  resources: LabeledResource[];\n}\n\nconst Player: React.FC<PlayerProps> = ({ painting, resources }) => {\n  const playerRef = React.useRef(null);\n  const isAudio = painting?.format?.includes(\"audio/\");\n\n  const { startTime, updateCurrentTime } = React.useContext(CurrentTimeContext);\n\n  const viewerState: any = useViewerState();\n  const { activeCanvas, configOptions, vault } = viewerState;\n\n  /**\n   * Get active canvas full object\n   */\n  const activeCanvasObject = getCanvasByCriteria(\n    vault,\n    { id: activeCanvas, type: \"Canvas\" },\n    \"painting\",\n    [\"Image\"],\n  );\n\n  const posterImage = getAccompanyingCanvasImage(\n    activeCanvasObject.accompanyingCanvas,\n  );\n\n  /**\n   * HLS.js binding for .m3u8 files\n   * STAGING and PRODUCTION environments only\n   */\n  React.useEffect(() => {\n    /**\n     * Check that IIIF content resource ID exists and\n     * we have a reffed <video> for attaching HLS\n     */\n    if (!painting.id || !playerRef.current) return;\n\n    /**\n     * Eject HLS attachment if file extension from\n     * the IIIF content resource ID is not .m3u8\n     */\n    if (painting.id.split(\".\").pop() !== \"m3u8\") return;\n\n    // Bind hls.js package to our <video /> element and then load the media source\n    const hls = new Hls();\n    hls.attachMedia(playerRef.current);\n    hls.on(Hls.Events.MEDIA_ATTACHED, function () {\n      hls.loadSource(painting.id as string);\n    });\n\n    // Handle errors\n    hls.on(Hls.Events.ERROR, function (event, data) {\n      if (data.fatal) {\n        switch (data.type) {\n          case Hls.ErrorTypes.NETWORK_ERROR:\n            // try to recover network error\n            console.error(\n              `fatal ${event} network error encountered, try to recover`,\n            );\n            hls.startLoad();\n            break;\n          case Hls.ErrorTypes.MEDIA_ERROR:\n            console.error(\n              `fatal ${event} media error encountered, try to recover`,\n            );\n            hls.recoverMediaError();\n            break;\n          default:\n            // cannot recover\n            hls.destroy();\n            break;\n        }\n      }\n    });\n\n    return () => {\n      if (hls) {\n        hls.detachMedia();\n        hls.destroy();\n        updateCurrentTime(0);\n      }\n    };\n  }, [painting.id]);\n\n  React.useEffect(() => {\n    let video: any = playerRef.current;\n    if (video) video.currentTime = startTime;\n\n    if (startTime !== 0) video.play();\n  }, [startTime]);\n\n  const handlePlay = () => {\n    let video: any = playerRef.current;\n    if (video) {\n      video.ontimeupdate = (event: any) => {\n        updateCurrentTime(event.target.currentTime);\n      };\n    }\n  };\n\n  return (\n    <PlayerWrapper>\n      <video\n        id=\"clover-iiif-video\"\n        key={painting.id}\n        ref={playerRef}\n        controls\n        height={painting.height}\n        width={painting.width}\n        onPlay={handlePlay}\n        crossOrigin=\"anonymous\"\n        poster={posterImage}\n      >\n        <source src={painting.id} type={painting.format} />\n        {resources.length > 0 &&\n          resources.map((resource) => (\n            <Track\n              resource={resource}\n              ignoreCaptionLabels={configOptions.ignoreCaptionLabels}\n              key={resource.id}\n            />\n          ))}\n        Sorry, your browser doesn't support embedded videos.\n      </video>\n\n      {isAudio && <AudioVisualizer ref={playerRef} />}\n    </PlayerWrapper>\n  );\n};\n\nexport default Player;\n", "import { styled } from \"stitches\";\n\nexport const PlayerWrapper = styled(\"div\", {\n  position: \"relative\",\n  backgroundColor: \"$primaryAlt\",\n  display: \"flex\",\n  flexGrow: \"0\",\n  flexShrink: \"1\",\n  maxHeight: \"450px\",\n  zIndex: \"1\",\n\n  video: {\n    backgroundColor: \"transparent\",\n    display: \"flex\",\n    position: \"relative\",\n    objectFit: \"contain\",\n    width: \"100%\",\n    height: \"100%\",\n    zIndex: \"1\",\n  },\n});\n", "import React from \"react\";\nimport { AudioVisualizerWrapper } from \"./AudioVisualizer.styled\";\n\nconst AudioVisualizer = React.forwardRef((_props, ref: any) => {\n  const canvasRef = React.useRef<HTMLCanvasElement>(null);\n\n  React.useEffect(() => {\n    if (!ref) return;\n    // Add a callback fn to the `<video>` onplay event\n    ref.current.onplay = audioVisualizer;\n  }, [ref]);\n\n  function audioVisualizer() {\n    const video = ref.current;\n    const context = new AudioContext();\n    const src = context.createMediaElementSource(video);\n    let analyser = context.createAnalyser();\n\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    canvas.width = video.offsetWidth;\n    canvas.height = video.offsetHeight;\n    const ctx = canvas.getContext(\"2d\");\n\n    src.connect(analyser);\n    analyser.connect(context.destination);\n\n    analyser.fftSize = 256;\n\n    const bufferLength = analyser.frequencyBinCount;\n    const dataArray = new Uint8Array(bufferLength);\n\n    setInterval(function () {\n      renderFrame(\n        analyser,\n        ctx,\n        bufferLength,\n        dataArray,\n        canvas.width,\n        canvas.height,\n      );\n    }, 20);\n  }\n\n  function renderFrame(\n    analyser: any,\n    ctx: any,\n    bufferLength: number,\n    dataArray: Uint8Array,\n    width: number,\n    height: number,\n  ) {\n    let barWidth = (width / bufferLength) * 2.6;\n    let barHeight;\n    let x = 0;\n\n    analyser.getByteFrequencyData(dataArray);\n\n    ctx.fillStyle = \"#000000\";\n    ctx.fillRect(0, 0, width, height);\n\n    for (let i = 0; i < bufferLength; i++) {\n      barHeight = dataArray[i] * 2;\n      ctx.fillStyle = `rgba(${78}, 42, 132, 1)`;\n      ctx.fillRect(x, height - barHeight, barWidth, barHeight);\n\n      x += barWidth + 6;\n    }\n  }\n\n  return <AudioVisualizerWrapper ref={canvasRef} />;\n});\n\nexport default AudioVisualizer;\n", "import { styled } from \"stitches\";\n\nexport const AudioVisualizerWrapper = styled(\"canvas\", {\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n});\n", "import React from \"react\";\nimport { InternationalString } from \"@iiif/presentation-3\";\nimport { LabeledResource } from \"hooks/use-iiif/getSupplementingResources\";\nimport { getLabel } from \"hooks/use-iiif\";\n\nexport interface TrackProps {\n  resource: LabeledResource;\n  ignoreCaptionLabels: string[];\n}\n\nconst Track: React.FC<TrackProps> = ({ resource, ignoreCaptionLabels }) => {\n  const label = getLabel(resource.label as InternationalString, \"en\") as any;\n\n  const isIgnored = label.some((value: string) =>\n    ignoreCaptionLabels.includes(value),\n  );\n\n  if (isIgnored) return null;\n\n  return (\n    <track\n      key={resource.id}\n      src={resource.id as string}\n      label={label}\n      srcLang=\"en\"\n      data-testid=\"player-track\"\n    />\n  );\n};\n\nexport default Track;\n", "import React, { useEffect, useState } from \"react\";\nimport OpenSeadragon, { Viewer } from \"openseadragon\";\nimport { IIIFExternalWebResource, ImageService } from \"@iiif/presentation-3\";\nimport { Navigator, Viewport, Wrapper } from \"./ImageViewer.styled\";\nimport Controls from \"./Controls\";\nimport { getInfoResponse } from \"services/iiif\";\n\nconst ImageViewer: React.FC<IIIFExternalWebResource> = ({ service }) => {\n  const [openSeadragonInstance, setOpenSeadragonInstance] = useState<Viewer>();\n  const [imageService, setImageService] = useState<ImageService>();\n\n  /**\n   * Initiate OpenSeadragon\n   */\n  useEffect(() => {\n    initOpenSeadragon();\n    return () => {\n      openSeadragonInstance?.destroy();\n    };\n  }, []);\n\n  /**\n   * Set IIIF image service from given content resource\n   */\n  useEffect(() => {\n    if (Array.isArray(service))\n      setImageService(service[0] as any as ImageService);\n  }, [service]);\n\n  /**\n   * Loads tileSource of current canvas from IIIF image service\n   */\n  useEffect(() => {\n    if (imageService) {\n      let id: string | undefined;\n      \"@id\" in imageService\n        ? (id = imageService[\"@id\"])\n        : (id = imageService.id);\n\n      if (id)\n        getInfoResponse(id).then((tileSource) =>\n          openSeadragonInstance?.open(tileSource),\n        );\n    }\n  }, [openSeadragonInstance, imageService]);\n\n  /**\n   * Set OpenSeadragon instance\n   */\n  function initOpenSeadragon() {\n    const controls: object = {\n      homeButton: \"zoomReset\",\n      showFullPageControl: false,\n      zoomInButton: \"zoomIn\",\n      zoomOutButton: \"zoomOut\",\n    };\n\n    const navigator: object = {\n      showNavigator: true,\n      navigatorBorderColor: \"transparent\",\n      navigatorId: \"openseadragon-navigator\",\n    };\n\n    setOpenSeadragonInstance(\n      OpenSeadragon({\n        id: \"openseadragon-viewport\",\n        loadTilesWithAjax: true,\n        ...controls,\n        ...navigator,\n      }),\n    );\n  }\n\n  return (\n    <Wrapper data-testid=\"image-viewer\">\n      <Controls />\n      <Navigator id=\"openseadragon-navigator\" />\n      <Viewport id=\"openseadragon-viewport\" />\n    </Wrapper>\n  );\n};\n\nexport default ImageViewer;\n", "import { styled } from \"stitches\";\n\nconst Navigator = styled(\"div\", {\n  position: \"absolute !important\",\n  zIndex: \"1\",\n  top: \"1rem\",\n  left: \"1rem\",\n  width: \"161.8px\",\n  height: \"100px\",\n  backgroundColor: \"#000D\",\n  boxShadow: \"5px 5px 5px #0002\",\n  borderRadius: \"3px\",\n\n  \"#openseadragon-navigator-displayregion\": {\n    border: \" 3px solid $accent !important\",\n    boxShadow: \"0 0 3px #0006\",\n  },\n\n  \"@sm\": {\n    width: \"123px\",\n    height: \"76px\",\n  },\n});\n\nconst Viewport = styled(\"div\", {\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  zIndex: \"0\",\n});\n\nconst Wrapper = styled(\"div\", {\n  width: \"100%\",\n  height: \"450px\",\n  background: \"black\",\n  backgroundSize: \"contain\",\n  color: \"white\",\n  position: \"relative\",\n  zIndex: \"1\",\n  overflow: \"hidden\",\n});\n\nexport { Navigator, Viewport, Wrapper };\n", "import React from \"react\";\nimport Button from \"./Button\";\nimport { Wrapper } from \"./Controls.styled\";\n\nconst Controls: React.FC = () => {\n  const ZoomIn = () => {\n    return (\n      <path\n        strokeLinecap=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"45\"\n        d=\"M256 112v288M400 256H112\"\n      />\n    );\n  };\n\n  const ZoomOut = () => {\n    return (\n      <path\n        strokeLinecap=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"45\"\n        d=\"M400 256H112\"\n      />\n    );\n  };\n\n  const ZoomReset = () => {\n    return (\n      <>\n        <path\n          fill=\"none\"\n          strokeLinecap=\"round\"\n          strokeMiterlimit=\"10\"\n          strokeWidth=\"45\"\n          d=\"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128\"\n        />\n        <path d=\"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z\" />\n      </>\n    );\n  };\n\n  return (\n    <Wrapper data-testid=\"openseadragon-controls\" id=\"openseadragon-controls\">\n      <Button id=\"zoomIn\" label=\"zoom in\">\n        <ZoomIn />\n      </Button>\n      <Button id=\"zoomOut\" label=\"zoom in\">\n        <ZoomOut />\n      </Button>\n      <Button id=\"zoomReset\" label=\"reset zoom\">\n        <ZoomReset />\n      </Button>\n    </Wrapper>\n  );\n};\n\nexport default Controls;\n", "import React from \"react\";\nimport { Item } from \"./Button.styled\";\n\ninterface ButtonProps {\n  id: string;\n  label: string;\n  children: React.ReactChild;\n}\n\nconst Button: React.FC<ButtonProps> = ({ id, label, children }) => {\n  return (\n    <Item id={id} data-testid=\"openseadragon-button\">\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        aria-labelledby={`${id}-svg-title`}\n        data-testid=\"openseadragon-button-svg\"\n        focusable=\"false\"\n        viewBox=\"0 0 512 512\"\n        role=\"img\"\n      >\n        <title id={`${id}-svg-title`}>{label}</title>\n        {children}\n      </svg>\n    </Item>\n  );\n};\n\nexport default Button;\n", "import { styled } from \"@stitches/react\";\n\nconst Item = styled(\"button\", {\n  display: \"flex\",\n  height: \"2rem\",\n  width: \"2rem\",\n  borderRadius: \"2rem\",\n  padding: \"0\",\n  margin: \"0\",\n  fontFamily: \"inherit\",\n  background: \"none\",\n  border: \"none\",\n  color: \"white\",\n  cursor: \"pointer\",\n  marginLeft: \"0.618rem\",\n  backgroundColor: \"#000D\",\n  filter: \"drop-shadow(5px 5px 5px #0006)\",\n  transition: \"$all\",\n  boxSizing: \"content-box !important\",\n\n  svg: {\n    height: \"60%\",\n    width: \"60%\",\n    padding: \"20%\",\n    fill: \"$secondary\",\n    stroke: \"$secondary\",\n    filter: \"drop-shadow(5px 5px 5px #000D)\",\n    transition: \"$all\",\n    boxSizing: \"inherit\",\n  },\n\n  \"&:hover, &:focus\": {\n    backgroundColor: \"$accent\",\n  },\n\n  \"&#zoomReset\": {\n    \"&:hover, &:focus\": {\n      svg: {\n        rotate: \"45deg\",\n      },\n    },\n  },\n});\n\nexport { Item };\n", "import { styled } from \"@stitches/react\";\n\nconst Wrapper = styled(\"div\", {\n  position: \"absolute\",\n  zIndex: \"1\",\n  top: \"1rem\",\n  right: \"1rem\",\n});\n\nexport { Wrapper };\n", "export const getInfoResponse = (id: string) =>\n  fetch(`${id.replace(/\\/$/, \"\")}/info.json`)\n    .then((response) => response.json())\n    .then((json) => json)\n    .catch((error: any) => {\n      console.error(\n        `The IIIF tilesource ${id.replace(\n          /\\/$/,\n          \"\",\n        )}/info.json failed to load: ${error}`,\n      );\n    });\n", "import React from \"react\";\nimport {\n  ErrorFallbackStyled,\n  ErrorBody,\n  Headline,\n} from \"components/Viewer/ErrorFallback.styled\";\n\ninterface ErrorFallbackProps {\n  error: Error;\n}\n\nconst ErrorFallback: React.FC<ErrorFallbackProps> = ({ error }) => {\n  const { message } = error;\n\n  return (\n    <ErrorFallbackStyled role=\"alert\">\n      <Headline data-testid=\"headline\">Something went wrong</Headline>\n      {message && <ErrorBody>{`Error message: ${message}`} </ErrorBody>}\n    </ErrorFallbackStyled>\n  );\n};\n\nexport default ErrorFallback;\n", "import { styled } from \"stitches\";\n\nconst ErrorFallbackStyled = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n});\n\nconst Headline = styled(\"p\", {\n  fontFamily: \"$display\",\n  fontWeight: \"bold\",\n  fontSize: \"x-large\",\n});\n\nconst ErrorBody = styled(\"span\", {\n  fontSize: \"medium\",\n});\n\nexport { ErrorFallbackStyled, ErrorBody, Headline };\n"],
  "mappings": "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",
  "names": []
}
