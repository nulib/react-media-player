"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{7176:function(e,t,n){n.r(t),n.d(t,{default:function(){return t9}});var i=n(2676),o=n(310),a=n(3783),r=n(3567),l=JSON.parse('{"commonClose":"Close","commonNext":"Next","commonPrevious":"Previous","commonSearch":"Search","commonSearchPlaceholder":"Search...","commonShare":"Share","commonViewAll":"View All","copyFailure":"Failed","copySuccess":"Copied","informationPanelTabs":"Select","informationPanelTabsAbout":"About","informationPanelTabsAnnotations":"Annotations","informationPanelTabsSearch":"Search","informationPanelToggle":"More Information","shareCollectionJson":"View Collection","shareCollectionCopy":"Copy Collection URL","shareManifestJson":"View Manifest","shareManifestCopy":"Copy Manifest URL"}');let s="clover",d=Object.fromEntries(Object.entries({en:l,pt:{}}).map(e=>{let[t,n]=e;return[t,{["".concat(s)]:n}]}));a.ZP.use(o.Z).use(r.Db).init({defaultNS:s,fallbackLng:"en",ns:[s],resources:{...d}});var c=n(5271),u=n(2371),h=n(4260),m=n(8628),p=n(8946);let g=async(e,t)=>{let n=e.get({id:t,type:"Canvas"});if(!(null==n?void 0:n.annotations)||!n.annotations[0])return[];let i=e.get(n.annotations).filter(e=>!!e.items&&e),o=[];for(let t of i)if(t.items.length>0){let e=t.label||{none:["Annotations"]};o.push({...t,label:e})}else{let n={};try{n=await e.load(t.id)}catch(e){console.log(e)}if(n.items&&n.items.length>0){let e=n.label||{none:["Annotations"]};o.push({...n,label:e})}}return o},f=async(e,t,n,i)=>{let o;if(void 0==i||void 0==i.q)return{label:{none:[n]}};let a="".concat(t,"?q=").concat(i.q.trim());try{o=await e.load(a)}catch(e){return console.log("Could not load content search."),{}}return void 0==o.label&&(o.label={none:[n]}),o};var x=n(3261),v=n(7233),b=n(4543),j=n(3328);let y=(0,j.zo)("div",{position:"relative",zIndex:"0"}),w=(0,j.zo)("div",{display:"flex",flexDirection:"row",flexGrow:"1",overflow:"hidden","@sm":{flexDirection:"column"}}),C=(0,j.zo)("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),S=(0,j.zo)(m.xz,{display:"none",border:"none",padding:"0",transition:"$all",opacity:"1",background:"#6663",margin:"1rem 0",borderRadius:"6px","&[data-information-panel='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",fontSize:"0.8333em",justifyContent:"center",padding:"0.5rem",fontFamily:"inherit"}}}),k=(0,j.zo)(m.VY,{width:"100%",display:"flex"}),z=(0,j.zo)("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),$=(0,j.zo)("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased",'&[data-absolute-position="true"]':{position:"absolute",width:"100%",height:"100%",zIndex:"0"},"> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start",height:"100%",maxHeight:"100%","@sm":{["& ".concat(w)]:{flexGrow:"1"},["& ".concat(C)]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",["& ".concat(y)]:{display:"none"},["& ".concat(S)]:{margin:"1rem"},["& ".concat(k)]:{height:"100%"}}}});var I=n(831);let T=(0,j.zo)(I.fC,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),A=(0,j.zo)(I.aV,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid #6663","@sm":{margin:"0 1rem"}}),M=(0,j.zo)(I.xz,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}}),E=(0,j.zo)(I.VY,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}}),R=(0,j.zo)(e=>{let{handleScroll:t,children:n,className:o}=e;return(0,i.jsx)("div",{className:o,onScroll:t,children:n})},{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),L={position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none"},F=(0,j.zo)("button",{textAlign:"left","&:hover":{color:"$accent"}}),H=(0,j.zo)("div",{display:"flex",flexDirection:"column",width:"100%"}),P=(0,j.zo)("div",{...L}),D=(0,j.zo)("div",{"&:hover":{color:"$accent"}});var N=e=>{let{value:t,handleClick:n}=e;return(0,i.jsx)(F,{onClick:n,children:t})},V=e=>{let{value:t,handleClick:n}=e;return(0,i.jsx)(D,{dangerouslySetInnerHTML:{__html:t},onClick:n})},O=n(2950),B=()=>{function e(e){return e.map(e=>{let t=e.identifier||(0,O.Z)();return{...e,identifier:t}})}return{addIdentifiersToParsedCues:e,createNestedCues:function(t){let n=[],i=[];for(let a of e(t)){for(;i.length>0&&i[i.length-1].end<=a.start;)i.pop();if(i.length>0){var o;i[i.length-1].children||(i[i.length-1].children=[]),null===(o=i[i.length-1].children)||void 0===o||o.push(a),i.push(a)}else n.push(a),i.push(a)}return n},isChild:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.some(t=>e.start>=t.start&&e.end<=t.end)},orderCuesByTime:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((e,t)=>e.start-t.start)}}},G=n(308);let W=(0,j.F4)({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),_=(0,j.zo)(G.fC,{display:"flex",flexDirection:"column",width:"100%"}),q=(0,j.zo)(G.ck,{...L,"@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{backgroundColor:"#6663","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:W,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:W,boxSizing:"content-box","@sm":{content:"unset"}}}});var Z=n(206);let U=e=>{for(;e&&e!==document.body;){let t=window.getComputedStyle(e).overflowY;if("visible"!==t&&"hidden"!==t&&e.scrollHeight>e.clientHeight)return e;e=e.parentNode}return null};var J=e=>{var t,n;let{label:o,start:a,end:r}=e,l=(0,u.Cu)(),{configOptions:s,isAutoScrollEnabled:d,isUserScrolling:h}=(0,u.D1)(),m=null==s?void 0:null===(n=s.informationPanel)||void 0===n?void 0:null===(t=n.vtt)||void 0===t?void 0:t.autoScroll,[p,g]=(0,c.useState)(!1),f=(0,c.useRef)(null),x=document.getElementById("clover-iiif-video");return(0,c.useEffect)(()=>(null==x||x.addEventListener("timeupdate",()=>{let{currentTime:e}=x;g(a<=e&&e<r)}),()=>document.removeEventListener("timeupdate",()=>{})),[r,a,x]),(0,c.useEffect)(()=>{if(d&&p&&f.current&&!h){let n=f.current;if(n&&n instanceof HTMLElement){let i=U(n);if(i&&i instanceof HTMLElement){var e,t;let o;switch(null==m?void 0:null===(e=m.settings)||void 0===e?void 0:e.block){case"center":let a=i.getBoundingClientRect();o=n.offsetTop+n.offsetHeight-Math.floor((a.bottom-a.top)/2);break;case"end":o=n.offsetTop+n.offsetHeight-(i.clientHeight-n.clientHeight)+2;break;default:o=n.offsetTop-2}t=()=>{var e;return i.scrollTo({top:o,left:0,behavior:null==m?void 0:null===(e=m.settings)||void 0===e?void 0:e.behavior})},l({type:"updateAutoScrolling",isAutoScrolling:!0}),t(),setTimeout(()=>l({type:"updateAutoScrolling",isAutoScrolling:!1}),750)}}}},[m,p,h,d,l]),(0,i.jsxs)(q,{ref:f,"aria-checked":p,"data-testid":"information-panel-cue",onClick:()=>{x&&(x.pause(),x.currentTime=a,x.play())},value:o,children:[o,(0,i.jsx)("strong",{children:(0,Z.rJ)(a)})]})};let Y=(0,j.zo)("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{["& ".concat(q)]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),Q=e=>{let{items:t}=e;return(0,i.jsx)(Y,{children:t.map(e=>{let{text:t,start:n,end:o,children:a,identifier:r}=e;return(0,i.jsxs)("li",{children:[(0,i.jsx)(J,{label:t,start:n,end:o}),a&&(0,i.jsx)(Q,{items:a})]},r)})})},X=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";if(!e)return"";if(!e[t]){let t=Object.getOwnPropertyNames(e);if(t.length>0)return e[t[0]]}return e[t]};var K=n(3836),ee=e=>{let{label:t,vttUri:n}=e,[o,a]=c.useState([]),{createNestedCues:r,orderCuesByTime:l}=B(),[s,d]=c.useState();return(0,c.useEffect)(()=>{n&&fetch(n,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(e=>e.text()).then(e=>{a(r(l((0,K.parse)(e).cues)))}).catch(e=>{console.error(n,e.toString()),d(e)})},[n]),(0,i.jsxs)(_,{"data-testid":"annotation-item-vtt","aria-label":"".concat(X(t)),children:[s&&(0,i.jsxs)("div",{"data-testid":"error-message",children:["Network Error: ",s.toString()]}),(0,i.jsx)(Q,{items:o})]})},et=e=>{let{caption:t,handleClick:n,imageUri:o}=e;return(0,i.jsxs)(F,{onClick:n,children:[(0,i.jsx)("img",{src:o,alt:"A visual annotation for ".concat(t)}),(0,i.jsx)("span",{children:t})]})},en=e=>{var t,n;let{annotation:o}=e,{target:a}=o,{openSeadragonViewer:r,vault:l,activeCanvas:s,configOptions:d}=(0,u.D1)(),c=o.body.map(e=>l.get(e.id)),h=(null===(t=c.find(e=>e.format))||void 0===t?void 0:t.format)||"",m=(null===(n=c.find(e=>e.value))||void 0===n?void 0:n.value)||"",p=l.get({id:s,type:"Canvas"});function g(){var e;if(!a)return;let t=(null===(e=d.annotationOverlays)||void 0===e?void 0:e.zoomLevel)||1;(0,x.$H)(r,t,a,p)}return(0,i.jsx)(P,{children:function(){var e,t;switch(h){case"text/plain":return(0,i.jsx)(N,{value:m,handleClick:g});case"text/html":return(0,i.jsx)(V,{value:m,handleClick:g});case"text/vtt":return(0,i.jsx)(ee,{label:c[0].label,vttUri:c[0].id||""});case null===(e=h.match(/^image\//))||void 0===e?void 0:e.input:let n=(null===(t=c.find(e=>{var t;return!(null===(t=e.id)||void 0===t?void 0:t.includes("vault://"))}))||void 0===t?void 0:t.id)||"";return(0,i.jsx)(et,{caption:m,handleClick:g,imageUri:n});default:return(0,i.jsx)(N,{value:m,handleClick:g})}}()})},ei=e=>{var t;let{annotationPage:n}=e,{vault:o}=(0,u.D1)();if(!n||!n.items||(null===(t=n.items)||void 0===t?void 0:t.length)===0)return(0,i.jsx)(i.Fragment,{});let a=n.items.map(e=>o.get(e.id));return a?(0,i.jsx)(H,{"data-testid":"annotation-page",children:null==a?void 0:a.map(e=>(0,i.jsx)(en,{annotation:e},e.id))}):(0,i.jsx)(i.Fragment,{})};let eo=(0,j.zo)("button",{textAlign:"left","&:hover":{color:"$accent"}}),ea=(0,j.zo)("li",{margin:"0.25rem 0"}),er=(0,j.zo)("ol",{listStyleType:"auto",marginBottom:"1rem",listStylePosition:"inside"}),el=(0,j.zo)("div",{margin:"0.5rem 1.618rem"}),es=(0,j.zo)("div",{fontWeight:"bold"}),ed=(0,j.zo)("div",{marginBottom:"1rem"});var ec=e=>{let{value:t,handleClick:n,target:o,canvas:a}=e;return(0,i.jsx)(eo,{onClick:n,"data-target":o,"data-canvas":a,children:t})},eu=e=>{var t,n,o;let a,r,{annotation:l,activeContentSearchTarget:s,setActiveContentSearchTarget:d}=e,h=(0,u.Cu)(),{openSeadragonViewer:m,vault:p,contentSearchVault:g,activeCanvas:f,configOptions:v,OSDImageLoaded:b}=(0,u.D1)(),j=p.get({id:f,type:"Canvas"}),y=(null===(t=l.body.map(e=>g.get(e.id)).find(e=>e.value))||void 0===t?void 0:t.value)||"";if(l.target&&"string"==typeof l.target&&(a=l.target),a){let e=a.split("#xywh");e.length>1&&(r=e[0])}let w=(null===(o=v.contentSearch)||void 0===o?void 0:null===(n=o.overlays)||void 0===n?void 0:n.zoomLevel)||1;(0,c.useEffect)(()=>{b&&m&&l.target&&l.target==s&&(0,x.$H)(m,w,a,j)},[m,b]);let C=JSON.stringify(a);return(0,i.jsx)(ea,{children:(0,i.jsx)(ec,{target:C,canvas:r,value:y,handleClick:function(e){if(!m)return;let t=JSON.parse(e.target.dataset.target),n=e.target.dataset.canvas;f===n?(0,x.$H)(m,w,a,j):(h({type:"updateOSDImageLoaded",OSDImageLoaded:!1}),h({type:"updateActiveCanvas",canvasId:n}),d(t))}})})},eh=e=>{var t,n,o;let{annotationPage:a}=e,{contentSearchVault:r,configOptions:l}=(0,u.D1)(),[s,d]=(0,c.useState)(),h=null===(t=l.contentSearch)||void 0===t?void 0:t.searchResultsLimit,m=null===(n=l.localeText)||void 0===n?void 0:n.contentSearch;return a&&a.items&&(null===(o=a.items)||void 0===o?void 0:o.length)!==0?(0,i.jsx)(i.Fragment,{children:Object.entries(function(e){let t={};return e.items.forEach(e=>{let n=r.get(e.id),i="";if(n.label){let e=X(n.label);e&&(i=e[0])}void 0==t[i]&&(t[i]=[]),t[i].push(n)}),t}(a)).map((e,t)=>{let[n,o]=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)(es,{className:"content-search-results-title",children:n}),(0,i.jsx)(er,{className:"content-search-results",children:(h?o.slice(0,h):o).map((e,t)=>(0,i.jsx)(eu,{annotation:e,activeContentSearchTarget:s,setActiveContentSearchTarget:d},t))}),function(e){if(h){let t=e.length-h;if(t>0)return(0,i.jsxs)(ed,{children:[t," ",null==m?void 0:m.moreResults]})}}(o)]},t)})}):(0,i.jsx)("p",{children:null==m?void 0:m.noSearchResults})},em=n(3850);let ep=(0,j.zo)("div",{".content-search-form":{display:"flex",marginBottom:"1rem"},input:{padding:".25rem",marginRight:"1rem"}}),eg=(0,j.zo)("button",{display:"flex",background:"none",border:"none",width:"2rem",height:"2rem",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}});var ef=e=>{var t;let{searchServiceUrl:n,setContentSearchResource:o,setLoading:a}=e,[r,l]=(0,c.useState)(),{contentSearchVault:s,openSeadragonViewer:d,configOptions:h}=(0,u.D1)(),m=null===(t=h.localeText)||void 0===t?void 0:t.contentSearch;async function p(e){e.preventDefault();let t=null==m?void 0:m.tabLabel;if(d&&n){if(!r||""===r.trim()){o({label:{none:[t]}});return}a(!0),f(s,n,t,{q:r}).then(e=>{o(e),a(!1)})}}return(0,i.jsx)(ep,{children:(0,i.jsxs)(em.fC,{onSubmit:p,className:"content-search-form",children:[(0,i.jsx)(em.gN,{className:"FormField",name:"searchTerms",onChange:e=>{e.preventDefault(),l(e.target.value)},children:(0,i.jsx)(em.oT,{placeholder:null==m?void 0:m.formPlaceholder})}),(0,i.jsx)(em.k4,{asChild:!0,children:(0,i.jsx)(eg,{type:"submit",children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,i.jsx)("title",{children:"Search"}),(0,i.jsx)("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})]})})})]})})},ex=e=>{let{searchServiceUrl:t,setContentSearchResource:n,activeCanvas:o,annotationPage:a}=e,[r,l]=(0,c.useState)(!1);return(0,i.jsxs)(el,{children:[(0,i.jsx)(ef,{searchServiceUrl:t,setContentSearchResource:n,activeCanvas:o,setLoading:l}),!r&&(0,i.jsx)(eh,{annotationPage:a}),r&&(0,i.jsx)("span",{children:"Loading..."})]})};let ev=(0,j.zo)("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),eb=(0,j.zo)("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"});var ej=n(3408),ey=e=>{let{homepage:t}=e;return(null==t?void 0:t.length)===0?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"manifest-property-title",children:"Homepage"}),(0,i.jsx)(ej.bw,{homepage:t})]})},ew=e=>{let{id:t,htmlLabel:n,parent:o="manifest"}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"manifest-property-title",children:n}),(0,i.jsx)("a",{href:t,target:"_blank",id:"iiif-".concat(o,"-id"),children:t})]})},eC=e=>{let{metadata:t,parent:n="manifest"}=e;return t?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ej.SF,{metadata:t,id:"iiif-".concat(n,"-metadata")})}):(0,i.jsx)(i.Fragment,{})},eS=e=>{let{rendering:t}=e;return(null==t?void 0:t.length)===0?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"manifest-property-title",children:"Alternate formats"}),(0,i.jsx)(ej.Oy,{rendering:t})]})},ek=e=>{let{requiredStatement:t,parent:n="manifest"}=e;return t?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ej.bT,{requiredStatement:t,id:"iiif-".concat(n,"-required-statement")})}):(0,i.jsx)(i.Fragment,{})},ez=e=>{let{rights:t}=e;return t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"manifest-property-title",children:"Rights"}),(0,i.jsx)("a",{href:t,target:"_blank",children:t})]}):(0,i.jsx)(i.Fragment,{})},e$=e=>{let{seeAlso:t}=e;return(null==t?void 0:t.length)===0?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"manifest-property-title",children:"See Also"}),(0,i.jsx)(ej.QZ,{seeAlso:t})]})},eI=e=>{let{summary:t,parent:n="manifest"}=e;return t?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ej.ER,{summary:t,as:"p",id:"iiif-".concat(n,"-summary")})}):(0,i.jsx)(i.Fragment,{})},eT=e=>{let{label:t,thumbnail:n}=e;return(null==n?void 0:n.length)===0?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ej.pl,{altAsLabel:t||{none:["resource"]},thumbnail:n,style:{backgroundColor:"#6663",objectFit:"cover"}})})},eA=()=>{let{activeManifest:e,vault:t}=(0,u.D1)(),[n,o]=(0,c.useState)(),[a,r]=(0,c.useState)([]),[l,s]=(0,c.useState)([]),[d,h]=(0,c.useState)([]),[m,p]=(0,c.useState)([]);return((0,c.useEffect)(()=>{var n,i,a,l;let d=t.get(e);o(d),(null===(n=d.homepage)||void 0===n?void 0:n.length)>0&&r(t.get(d.homepage)),(null===(i=d.seeAlso)||void 0===i?void 0:i.length)>0&&s(t.get(d.seeAlso)),(null===(a=d.rendering)||void 0===a?void 0:a.length)>0&&h(t.get(d.rendering)),(null===(l=d.thumbnail)||void 0===l?void 0:l.length)>0&&p(t.get(d.thumbnail))},[e,t]),n)?(0,i.jsx)(eb,{children:(0,i.jsxs)(ev,{children:[(0,i.jsx)(eT,{thumbnail:m,label:n.label}),(0,i.jsx)(eI,{summary:n.summary}),(0,i.jsx)(eC,{metadata:n.metadata}),(0,i.jsx)(ek,{requiredStatement:n.requiredStatement}),(0,i.jsx)(ez,{rights:n.rights}),(0,i.jsx)(ey,{homepage:a}),(0,i.jsx)(e$,{seeAlso:l}),(0,i.jsx)(eS,{rendering:d}),(0,i.jsx)(ew,{id:n.id,htmlLabel:"IIIF Manifest"})]})}):(0,i.jsx)(i.Fragment,{})},eM=e=>{let{activeCanvas:t,annotationResources:n,searchServiceUrl:o,setContentSearchResource:a,contentSearchResource:l}=e,{t:s}=(0,r.$G)(),d=(0,u.Cu)(),{isAutoScrolling:h,isUserScrolling:m,vault:p,configOptions:g,plugins:f}=(0,u.D1)(),{informationPanel:x}=g,[j,y]=(0,c.useState)(),w=null==x?void 0:x.renderAbout,C=null==x?void 0:x.renderAnnotation,S=p.get({id:t,type:"Canvas"}),k=null==x?void 0:x.renderContentSearch,{pluginsWithInfoPanel:z}=function(e){let t=[];return e.forEach(e=>{var n;(null===(n=e.informationPanel)||void 0===n?void 0:n.component)&&t.push(e)}),{pluginsWithInfoPanel:t}}(f);return(0,c.useEffect)(()=>{if(!j){if(null==x?void 0:x.defaultTab){let e=["manifest-about","manifest-content-search"];S.annotations.length>0&&S.annotations.forEach(t=>e.push(t.id)),e.includes(null==x?void 0:x.defaultTab)?y(x.defaultTab):y("manifest-about")}else w?y("manifest-about"):k?y("manifest-content-search"):n&&(null==n?void 0:n.length)>0?y(n[0].id):f.length>0&&y(f[0].id)}},[null==x?void 0:x.defaultTab,t,j,w,k,n,l,null==S?void 0:S.annotations,f]),(0,i.jsxs)(T,{"data-testid":"information-panel",defaultValue:j,onValueChange:e=>{y(e)},orientation:"horizontal",value:j,className:"clover-viewer-information-panel",children:[(0,i.jsxs)(A,{"aria-label":s("informationPanelTabs"),"data-testid":"information-panel-list",children:[w&&(0,i.jsx)(M,{value:"manifest-about",children:s("informationPanelTabsAbout")}),k&&l&&(0,i.jsx)(M,{value:"manifest-content-search",children:(0,i.jsx)(ej.__,{label:l.label})}),C&&n&&n.map((e,t)=>(0,i.jsx)(M,{value:e.id,children:(0,i.jsx)(ej.__,{label:e.label})},t)),z&&z.map((e,t)=>{var n;return(0,i.jsx)(M,{value:e.id,children:(0,i.jsx)(ej.__,{label:null===(n=e.informationPanel)||void 0===n?void 0:n.label})},t)})]}),(0,i.jsxs)(R,{handleScroll:function(){if(!h){clearTimeout(m);let e=setTimeout(()=>{d({type:"updateUserScrolling",isUserScrolling:void 0})},1500);d({type:"updateUserScrolling",isUserScrolling:e})}},children:[w&&(0,i.jsx)(E,{value:"manifest-about",children:(0,i.jsx)(eA,{})}),k&&l&&(0,i.jsx)(E,{value:"manifest-content-search",children:(0,i.jsx)(ex,{searchServiceUrl:o,setContentSearchResource:a,activeCanvas:t,annotationPage:l})}),C&&n&&n.map(e=>(0,i.jsx)(E,{value:e.id,children:(0,i.jsx)(ei,{annotationPage:e})},e.id)),z&&z.map((e,t)=>(function(e,t){var n,o;let a=null==e?void 0:null===(n=e.informationPanel)||void 0===n?void 0:n.component;return void 0===a?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(E,{value:e.id,children:(0,i.jsx)(v.SV,{FallbackComponent:b.Z,children:(0,i.jsx)(a,{...null==e?void 0:null===(o=e.informationPanel)||void 0===o?void 0:o.componentProps,canvas:S,useViewerDispatch:u.Cu,useViewerState:u.D1})})},t)})(e,t))]})]})},eE=n(445);let eR=(e,t,n,i)=>{let o=[];if(t.canvas&&t.canvas.thumbnail.length>0){let n=e.get(t.canvas.thumbnail[0]);o.push(n)}if(t.annotations[0]){if(t.annotations[0].thumbnail&&t.annotations[0].thumbnail.length>0){let n=e.get(t.annotations[0].thumbnail[0]);o.push(n)}if(!t.annotations[0].body)return;let n=t.annotations[0].body;"Image"===n.type&&o.push(n)}if(0!==o.length)return{id:o[0].id,format:o[0].format,type:o[0].type,width:n,height:i}},eL=(0,j.zo)("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),eF=(0,j.zo)("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),eH=(0,j.zo)("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),eP=(0,j.zo)("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),eD=(0,j.zo)("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",["& ".concat(eL)]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}});var eN=(e,t)=>{(0,c.useEffect)(()=>{function n(n){n.key===e&&t()}return window.addEventListener("keyup",n),()=>window.removeEventListener("keyup",n)},[])};let eV=e=>{let{title:t}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,i.jsx)("title",{children:t}),(0,i.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})]})},eO=e=>{let{title:t}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,i.jsx)("title",{children:t}),(0,i.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})]})},eB=e=>{let{title:t}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,i.jsx)("title",{children:t}),(0,i.jsx)("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})]})},eG=e=>{let{title:t}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,i.jsx)("title",{children:t}),(0,i.jsx)("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})]})};var eW=e=>{let{handleCanvasToggle:t,handleFilter:n,activeIndex:o,canvasLength:a}=e,[l,s]=(0,c.useState)(!1),[d,u]=(0,c.useState)(!1),[h,m]=(0,c.useState)(!1),{t:p}=(0,r.$G)();return(0,c.useEffect)(()=>{0===o?m(!0):m(!1),o===a-1?u(!0):u(!1)},[o,a]),eN("Escape",()=>{s(!1),n("")}),(0,i.jsx)(eD,{isToggle:l,children:(0,i.jsxs)(eL,{children:[l&&(0,i.jsx)(eF,{autoFocus:!0,onChange:e=>n(e.target.value),placeholder:p("commonSearchPlaceholder")}),!l&&(0,i.jsxs)(eP,{children:[(0,i.jsx)(eH,{onClick:()=>t(-1),disabled:h,type:"button",children:(0,i.jsx)(eV,{title:p("commonPrevious")})}),(0,i.jsxs)("span",{children:[o+1," of ",a]}),(0,i.jsx)(eH,{onClick:()=>t(1),disabled:d,type:"button",children:(0,i.jsx)(eO,{title:p("commonNext")})})]}),(0,i.jsx)(eH,{onClick:()=>{s(e=>!e),n("")},type:"button",children:l?(0,i.jsx)(eB,{title:p("commonClose")}):(0,i.jsx)(eG,{title:p("commonSearch")})})]})})};let e_=(0,j.zo)(G.fC,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"}),eq=(0,j.zo)("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),eZ=e=>(0,i.jsx)(eq,{...e,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:e.children});eZ.Title=e=>{let{children:t}=e;return(0,i.jsx)("title",{children:t})},eZ.Add=()=>(0,i.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),eZ.Audio=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),(0,i.jsx)("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),(0,i.jsx)("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})]}),eZ.Close=()=>(0,i.jsx)("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),eZ.Download=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M336 176h40a40 40 0 0140 40v208a40 40 0 01-40 40H136a40 40 0 01-40-40V216a40 40 0 0140-40h40",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),(0,i.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 272l80 80 80-80M256 48v288"})]}),eZ.Image=()=>(0,i.jsx)("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),eZ.Video=()=>(0,i.jsx)("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"});var eU=n(3067);let eJ=(0,j.F4)({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),eY=(0,j.F4)({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),eQ=(0,j.zo)(eU.Eh,{fill:"$secondaryAlt"}),eX=(0,j.zo)(eU.x8,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),eK=(0,j.zo)(eU.VY,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:eY},'&[data-side="bottom"]':{animationName:eJ},'&[data-align="end"]':{["& ".concat(eQ)]:{margin:"0 0.7rem"}}}),e0=(0,j.zo)(eU.xz,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),e1=(0,j.zo)(eU.fC,{boxSizing:"content-box"}),e2=e=>{let{children:t}=e;return(0,i.jsx)(e1,{children:t})};e2.Trigger=e=>(0,i.jsx)(e0,{...e,children:e.children}),e2.Content=e=>(0,i.jsxs)(eK,{...e,children:[(0,i.jsx)(eQ,{}),(0,i.jsx)(eX,{children:(0,i.jsx)(eZ,{isSmall:!0,children:(0,i.jsx)(eZ.Close,{})})}),e.children]});let e4=(0,j.zo)("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},["".concat(eq)]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),e3=(0,j.zo)("span",{display:"flex"}),e5=(0,j.zo)("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),e6=(0,j.zo)("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),e8=(0,j.zo)(G.ck,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},["& ".concat(e3)]:{position:"absolute",right:"0",bottom:"0",["& ".concat(e4)]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},["& ".concat(e3)]:{["& ".concat(e4)]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}}),e7=e=>{let{type:t}=e;switch(t){case"Sound":return(0,i.jsx)(eZ.Audio,{});case"Image":default:return(0,i.jsx)(eZ.Image,{});case"Video":return(0,i.jsx)(eZ.Video,{})}};var e9=e=>{let{canvas:t,canvasIndex:n,isActive:o,thumbnail:a,type:r,handleChange:l}=e;return(0,i.jsx)(e8,{"aria-checked":o,"data-testid":"media-thumbnail","data-canvas":n,onClick:()=>l(t.id),value:t.id,children:(0,i.jsxs)("figure",{children:[(0,i.jsxs)("div",{children:[(null==a?void 0:a.id)&&(0,i.jsx)("img",{src:a.id,alt:(null==t?void 0:t.label)?X(t.label):""}),(0,i.jsx)(e3,{children:(0,i.jsxs)(e4,{isIcon:!0,"data-testid":"thumbnail-tag",children:[(0,i.jsx)(e5,{}),(0,i.jsx)(eZ,{"aria-label":r,children:(0,i.jsx)(e7,{type:r})}),["Video","Sound"].includes(r)&&(0,i.jsx)(e6,{children:(0,Z.rJ)(t.duration)})]})})]}),(null==t?void 0:t.label)&&(0,i.jsx)("figcaption",{"data-testid":"fig-caption",children:(0,i.jsx)(ej.__,{label:t.label})})]})})};let te=e=>e.body?e.body.type:"Image";var tt=e=>{let{items:t}=e,{t:n}=(0,r.$G)(),o=(0,u.Cu)(),{activeCanvas:a,vault:l}=(0,u.D1)(),[s,d]=(0,c.useState)(""),[h,m]=(0,c.useState)([]),[p,g]=(0,c.useState)(0),f=c.useRef(null),x=e=>{a!==e&&o({type:"updateActiveCanvas",canvasId:e})};return(0,c.useEffect)(()=>{if(!h.length){let e=["Image","Sound","Video"];m(t.map(t=>(0,eE.g)(l,t,"painting",e)).filter(e=>e.annotations.length>0))}},[t,h.length,l]),(0,c.useEffect)(()=>{h.forEach((e,t)=>{(null==e?void 0:e.canvas)&&e.canvas.id===a&&g(t)})},[a,h]),(0,c.useEffect)(()=>{let e=document.querySelector('[data-canvas="'.concat(p,'"]'));if(e instanceof HTMLElement&&f.current){let t=e.offsetLeft-f.current.offsetWidth/2+e.offsetWidth/2;f.current.scrollTo({left:t,behavior:"smooth"})}},[p]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eW,{handleFilter:e=>d(e),handleCanvasToggle:e=>{let t=h[p+e];(null==t?void 0:t.canvas)&&x(t.canvas.id)},activeIndex:p,canvasLength:h.length}),(0,i.jsx)(e_,{"aria-label":n("media.selectItem"),"data-testid":"media",ref:f,children:h.filter(e=>{var t;if(null===(t=e.canvas)||void 0===t?void 0:t.label){let t=X(e.canvas.label);if(Array.isArray(t))return t[0].toLowerCase().includes(s.toLowerCase())}}).map((e,t)=>{var n,o;return(0,i.jsx)(e9,{canvas:e.canvas,canvasIndex:t,handleChange:x,isActive:a===(null==e?void 0:null===(n=e.canvas)||void 0===n?void 0:n.id),thumbnail:eR(l,e,200,200),type:te(e.annotations[0])},null==e?void 0:null===(o=e.canvas)||void 0===o?void 0:o.id)})})]})};let tn=(0,j.zo)("button",{position:"absolute",background:"none",border:"none",cursor:"zoom-in",margin:"0",padding:"0",width:"100%",height:"100%",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}});var ti=n(3602);let to=(0,j.zo)(ti.c,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),ta=(0,j.zo)("div",{position:"relative",display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",gap:"1rem",zIndex:"0",overflow:"hidden","&:hover":{["".concat(to)]:{backgroundColor:"$accent"},["".concat(tn)]:{backgroundColor:"#6662"}}}),tr=(0,j.zo)("div",{width:"100%",height:"100%"});var tl=n(763);let ts=(0,j.zo)("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),td=(0,j.zo)(tl.xz,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",cursor:"pointer",transition:"$all",border:"1px solid #6663",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem",width:"100%","@sm":{fontSize:"1rem"}}),tc=(0,j.zo)(tl.VY,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),tu=(0,j.zo)(tl.ck,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),th=(0,j.zo)(tl.__,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),tm=(0,j.zo)(tl.fC,{position:"relative",zIndex:"5",width:"100%"});var tp=e=>{let{direction:t,title:n}=e;return(0,i.jsxs)(ts,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img",children:[(0,i.jsx)("title",{children:n}),"up"===t&&(0,i.jsx)(()=>(0,i.jsx)("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),{}),"down"===t&&(0,i.jsx)(()=>(0,i.jsx)("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"}),{})]})},tg=e=>{let{children:t,label:n,maxHeight:o,onValueChange:a,value:r}=e;return(0,i.jsxs)(tm,{onValueChange:a,value:r,children:[(0,i.jsxs)(td,{"data-testid":"select-button",children:[(0,i.jsx)(tl.ki,{"data-testid":"select-button-value"}),(0,i.jsx)(tl.GV,{children:(0,i.jsx)(tp,{direction:"down",title:"select"})})]}),(0,i.jsx)(tl.ue,{children:(0,i.jsxs)(tc,{css:{maxHeight:"".concat(o," !important")},"data-testid":"select-content",children:[(0,i.jsx)(tl.Pn,{children:(0,i.jsx)(tp,{direction:"up",title:"scroll up for more"})}),(0,i.jsx)(tl.Q_,{children:(0,i.jsxs)(tl.DI,{children:[n&&(0,i.jsx)(th,{children:(0,i.jsx)(ej.__,{"data-testid":"select-label",label:n})}),t]})}),(0,i.jsx)(tl.Jk,{children:(0,i.jsx)(tp,{direction:"down",title:"scroll down for more"})})]})})]})},tf=e=>(0,i.jsxs)(tu,{...e,children:[e.thumbnail&&(0,i.jsx)(ej.pl,{thumbnail:e.thumbnail}),(0,i.jsx)(tl.S_,{children:(0,i.jsx)(ej.__,{label:e.label})}),(0,i.jsx)(tl.o6,{})]}),tx=n(3413),tv=e=>{let{isMedia:t,label:n,placeholderCanvas:o,setIsInteractive:a}=e,{vault:r}=(0,u.D1)(),l=(0,p.G)(r,o),s=l?l[0]:void 0,d=n?X(n):["placeholder image"];return(0,i.jsx)(tn,{onClick:()=>a(!0),isMedia:t,className:"clover-viewer-placeholder",children:(0,i.jsx)("img",{src:(null==s?void 0:s.id)||"",alt:d.join(),height:null==s?void 0:s.height,width:null==s?void 0:s.width})})},tb=n(3565);let tj=(0,j.zo)("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),ty=c.forwardRef((e,t)=>{let n=c.useRef(null),o=(0,c.useCallback)(()=>{var e,i;if((null===(e=t.current)||void 0===e?void 0:e.currentTime)&&(null===(i=t.current)||void 0===i?void 0:i.currentTime)>0)return;let o=t.current;if(!o)return;let a=new AudioContext,r=a.createMediaElementSource(o),l=a.createAnalyser(),s=n.current;if(!s)return;s.width=o.offsetWidth,s.height=o.offsetHeight;let d=s.getContext("2d");r.connect(l),l.connect(a.destination),l.fftSize=256;let c=l.frequencyBinCount,u=new Uint8Array(c);setInterval(function(){!function(e,t,n,i,o,a){let r;let l=o/n*2.6,s=0;e.getByteFrequencyData(i),t.fillStyle="#000000",t.fillRect(0,0,o,a);for(let e=0;e<n;e++)r=2*i[e],t.fillStyle="rgba(".concat(78,", 42, 132, 1)"),t.fillRect(s,a-r,l,r),s+=l+6}(l,d,c,u,s.width,s.height)},20)},[t]);return c.useEffect(()=>{t&&t.current&&(t.current.onplay=o)},[o,t]),(0,i.jsx)(tj,{ref:n,role:"presentation"})}),tw=(0,j.zo)("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",height:"100%",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}});var tC=e=>{let{resource:t,ignoreCaptionLabels:n}=e,o=X(t.label,"en");return Array.isArray(o)&&o.some(e=>n.includes(e))?null:(0,i.jsx)("track",{src:t.id,label:Array.isArray(o)?o[0]:o,srcLang:"en","data-testid":"player-track"},t.id)};let tS=["application/vnd.apple.mpegurl","vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];var tk=e=>{let{allSources:t,annotationResources:n,painting:o}=e,[a,r]=c.useState(0),[l,s]=c.useState(),d=c.useRef(null),h=(null==o?void 0:o.type)==="Sound",{activeCanvas:m,configOptions:g,vault:f}=(0,u.D1)();return(0,c.useEffect)(()=>{if(!o.id||!d.current)return;if(null==d?void 0:d.current){let e=d.current;e.src=o.id,e.load()}if("m3u8"!==o.id.split(".").pop()&&o.format&&!tS.includes(o.format))return;let e=new tb.ZP({xhrSetup:function(e,t){e.withCredentials=!!g.withCredentials}});return e.attachMedia(d.current),e.on(tb.ZP.Events.MEDIA_ATTACHED,function(){e.loadSource(o.id)}),e.on(tb.ZP.Events.ERROR,function(t,n){if(n.fatal)switch(n.type){case tb.ZP.ErrorTypes.NETWORK_ERROR:console.error("fatal ".concat(t," network error encountered, try to recover")),e.startLoad();break;case tb.ZP.ErrorTypes.MEDIA_ERROR:console.error("fatal ".concat(t," media error encountered, try to recover")),e.recoverMediaError();break;default:e.destroy()}}),()=>{if(e&&d.current){let t=d.current;e.detachMedia(),e.destroy(),t.currentTime=0}}},[g.withCredentials,o.id]),(0,c.useEffect)(()=>{var e,t,n,i;let o=f.get(m),r=(null===(e=o.accompanyingCanvas)||void 0===e?void 0:e.id)?(0,p.G)(f,null===(t=o.accompanyingCanvas)||void 0===t?void 0:t.id):null,l=(null===(n=o.placeholderCanvas)||void 0===n?void 0:n.id)?(0,p.G)(f,null===(i=o.placeholderCanvas)||void 0===i?void 0:i.id):null;r&&l?0===a?s(l[0].id):s(r[0].id):(r&&s(r[0].id),l&&s(l[0].id))},[m,a,f]),(0,c.useEffect)(()=>{if(null==d?void 0:d.current){let e=d.current;return null==e||e.addEventListener("timeupdate",()=>r(e.currentTime)),()=>document.removeEventListener("timeupdate",()=>{})}},[]),(0,i.jsxs)(tw,{css:{backgroundColor:g.canvasBackgroundColor,maxHeight:g.canvasHeight,position:"relative"},"data-testid":"player-wrapper",className:"clover-viewer-player-wrapper",children:[(0,i.jsxs)("video",{id:"clover-iiif-video",ref:d,controls:!0,height:o.height,width:o.width,crossOrigin:"anonymous",poster:l,style:{maxHeight:g.canvasHeight,position:"relative",zIndex:"1"},children:[t.map(e=>(0,i.jsx)("source",{src:e.id,type:e.format},e.id)),(null==n?void 0:n.length)>0&&n.map(e=>{let t=[];return e.items.forEach(e=>{f.get(e.id).body.forEach(e=>{let n=f.get(e.id);t.push(n)})}),t.map(e=>(0,i.jsx)(tC,{resource:e,ignoreCaptionLabels:g.ignoreCaptionLabels||[]},e.id))}),"Sorry, your browser doesn't support embedded videos."]},o.id),h&&(0,i.jsx)(ty,{ref:d})]})};let tz=()=>(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img",children:[(0,i.jsx)("title",{id:"close-svg-title",children:"close"}),(0,i.jsx)("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})]}),t$=e=>{let{isMedia:t}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img",children:[(0,i.jsx)("title",{id:"open-svg-title",children:"open"}),t?(0,i.jsx)("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),(0,i.jsx)("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"})]})]})};var tI=e=>{let{handleToggle:t,isInteractive:n,isMedia:o}=e;return(0,i.jsx)(to,{onClick:t,isInteractive:n,isMedia:o,"data-testid":"placeholder-toggle",children:n?(0,i.jsx)(tz,{}):(0,i.jsx)(t$,{isMedia:o})})},tT=e=>{var t,n,o,a,r;let{activeCanvas:l,annotationResources:s,isMedia:d,painting:h}=e,[m,p]=c.useState(0),[g,f]=c.useState(!1),{configOptions:v,customDisplays:b,openSeadragonViewer:j,vault:y,viewerId:w}=(0,u.D1)(),C=(0,u.Cu)(),S=y.get(l),k=null==S?void 0:null===(t=S.placeholderCanvas)||void 0===t?void 0:t.id,z=!!k,$=(null==h?void 0:h.length)>1,I=k&&!g&&!d,T="".concat(w,"-").concat((0,Z.un)(l+m)),A=b.find(e=>{let t=!1,{canvasId:n,paintingFormat:i}=e.target;if(Array.isArray(n)&&n.length>0&&(t=n.includes(l)),Array.isArray(i)&&i.length>0){var o;let e=(null===(o=h[m])||void 0===o?void 0:o.format)||"";t=!!(e&&i.includes(e))}return t}),M=[];null===(o=s[0])||void 0===o||null===(n=o.items)||void 0===n||n.forEach(e=>{let t=y.get(e.id);M.push(t)}),(0,c.useEffect)(()=>{var e;M&&j&&(null===(e=v.annotationOverlays)||void 0===e?void 0:e.renderOverlays)&&((0,x.dH)(j,"annotation-overlay"),(0,x.zG)(j,S,v.annotationOverlays,M,"annotation-overlay"))},[S,M,j,v]);let E=null==A?void 0:null===(a=A.display)||void 0===a?void 0:a.component;return(0,i.jsxs)(ta,{className:"clover-viewer-painting",children:[(0,i.jsxs)(tr,{style:{backgroundColor:v.canvasBackgroundColor,height:"auto"===v.canvasHeight?"100%":v.canvasHeight},children:[k&&!d&&(0,i.jsx)(tI,{handleToggle:()=>f(!g),isInteractive:g,isMedia:d}),I&&!d&&(0,i.jsx)(tv,{isMedia:d,label:null==S?void 0:S.label,placeholderCanvas:k,setIsInteractive:f}),!I&&!A&&(d?(0,i.jsx)(tk,{allSources:h,painting:h[m],annotationResources:s}):h&&(0,i.jsx)(tx.default,{_cloverViewerHasPlaceholder:z,body:h[m],instanceId:T,openSeadragonCallback:e=>{e&&(null==j?void 0:j.id)!=="openseadragon-".concat(T)&&C({type:"updateOpenSeadragonViewer",openSeadragonViewer:e})},openSeadragonConfig:v.openSeadragon},T)),!I&&E&&(0,i.jsx)(E,{id:l,annotationBody:h[m],...null==A?void 0:A.display.componentProps})]}),$&&(0,i.jsx)(tg,{value:null===(r=h[m])||void 0===r?void 0:r.id,onValueChange:e=>{p(h.findIndex(t=>t.id===e))},maxHeight:"200px",children:null==h?void 0:h.map(e=>(0,i.jsx)(tf,{value:null==e?void 0:e.id,label:null==e?void 0:e.label},null==e?void 0:e.id))})]})},tA=e=>{let{activeCanvas:t,annotationResources:n,searchServiceUrl:o,setContentSearchResource:a,contentSearchResource:l,isAudioVideo:s,items:d,painting:c}=e,{t:h}=(0,r.$G)(),{isInformationOpen:m,configOptions:p}=(0,u.D1)(),{informationPanel:g}=p,f=(null==g?void 0:g.renderAbout)&&m,x=(null==g?void 0:g.renderAnnotation)&&n.length>0&&!g.open;return(0,i.jsxs)(w,{className:"clover-viewer-content","data-testid":"clover-viewer-content",children:[(0,i.jsxs)(C,{children:[(0,i.jsx)(tT,{activeCanvas:t,annotationResources:n,isMedia:s,painting:c}),f&&(0,i.jsx)(S,{children:(0,i.jsx)("span",{children:h("informationPanelToggle")})}),d.length>1&&(0,i.jsx)(y,{className:"clover-viewer-media-wrapper",children:(0,i.jsx)(tt,{items:d,activeItem:0})})]}),(f||x)&&(0,i.jsx)(z,{children:(0,i.jsx)(k,{children:(0,i.jsx)(eM,{activeCanvas:t,annotationResources:n,searchServiceUrl:o,setContentSearchResource:a,contentSearchResource:l})})})]})};let tM=(0,j.zo)(e2.Trigger,{width:"30px",padding:"5px"}),tE=(0,j.zo)(e2.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),tR=(0,j.zo)("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),tL=(0,j.zo)("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",["> ".concat(tm)]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}}),tF=(0,j.zo)("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"});var tH=()=>{var e;let t=(0,u.Cu)(),{activeManifest:n,collection:o,configOptions:a,vault:r}=(0,u.D1)(),l=null==a?void 0:a.canvasHeight;return(0,i.jsx)("div",{style:{margin:"0.75rem"},children:(0,i.jsx)(tg,{label:o.label,maxHeight:l,value:n,onValueChange:e=>{t({type:"updateActiveManifest",manifestId:e}),t({type:"updateViewerId",viewerId:(0,O.Z)()})},children:null==o?void 0:null===(e=o.items)||void 0===e?void 0:e.map(e=>(0,i.jsx)(tf,{value:e.id,thumbnail:(null==e?void 0:e.thumbnail)?r.get(null==e?void 0:e.thumbnail):void 0,label:e.label},e.id))})})};let tP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500,{t:n}=(0,r.$G)(),[i,o]=(0,c.useState)(""),a=(0,c.useCallback)(()=>{navigator.clipboard.writeText(e).then(()=>o(n("copySuccess")),()=>o(n("copyFailure")))},[e]);return(0,c.useEffect)(()=>{if(!i)return;let e=setTimeout(()=>o(n("copyFailure")),t);return()=>clearTimeout(e)},[i]),[i,a]},tD=(0,j.zo)("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",lineHeight:"1em"}),tN=e=>{let{status:t}=e;return t?(0,i.jsx)(tD,{"data-copy-status":t,children:t}):null};var tV=e=>{let{textPrompt:t,textToCopy:n}=e,[o,a]=tP(n);return(0,i.jsxs)("button",{onClick:a,children:[t," ",(0,i.jsx)(tN,{status:o})]})},tO=e=>{let{title:t}=e,n="#ed1d33",o="#2873ab";return(0,i.jsxs)("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1",children:[(0,i.jsx)("title",{children:t}),(0,i.jsx)("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)",children:(0,i.jsxs)("g",{transform:"scale(0.1)",children:[(0,i.jsx)("path",{style:{fill:o},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),(0,i.jsx)("path",{style:{fill:o},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),(0,i.jsx)("path",{style:{fill:n},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),(0,i.jsx)("path",{style:{fill:n},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),(0,i.jsx)("path",{style:{fill:o},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),(0,i.jsx)("path",{style:{fill:o},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),(0,i.jsx)("path",{style:{fill:n},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"})]})})]})},tB=n(4433);let tG=(0,j.zo)(tB.fC,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),tW=(0,j.zo)(tB.bU,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),t_=(0,j.zo)("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"}),tq=(0,j.zo)("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"});var tZ=()=>{var e;let{configOptions:t}=(0,u.D1)(),n=(0,u.Cu)(),{t:o}=(0,r.$G)(),[a,l]=(0,c.useState)(null==t?void 0:null===(e=t.informationPanel)||void 0===e?void 0:e.open);return(0,c.useEffect)(()=>{n({type:"updateInformationOpen",isInformationOpen:a})},[a,n]),(0,i.jsxs)(tq,{children:[(0,i.jsx)(t_,{htmlFor:"information-toggle",css:a?{opacity:"1"}:{},children:o("informationPanelToggle")}),(0,i.jsx)(tG,{checked:a,onCheckedChange:()=>l(!a),id:"information-toggle","aria-label":o("informationPanelToggle"),name:"toggled?",children:(0,i.jsx)(tW,{})})]})};let tU=(0,j.zo)(e2.Trigger,{width:"30px",padding:"5px",marginBottom:"auto"}),tJ=(0,j.zo)(tE,{h3:{color:"$primaryAlt",fontSize:"$2",fontWeight:"700",margin:"$2 0"},button:{},"& ul li":{marginBottom:"$1"}});var tY=n(4067);function tQ(e,t){let n=[];if(!e)return n;for(let i of e)if(i.id){let e=t.get(i.id);e&&n.push(e)}return n}function tX(e,t){return e.map(e=>{let{format:n,id:i,label:o}=e;return{format:n,id:function(e){let{vault:t}=(0,u.D1)();try{let n=e&&t.get(e);if(!n)throw Error("Vault entity ".concat(e," not found."));return(null==n?void 0:n["@id"])||(null==n?void 0:n.id)}catch(t){return console.error(t),e}}(i),label:(0,tY.M)(o)||t}})}var tK=()=>{let{allPages:e,individualPages:t}=function(){let e=function(){let{activeCanvas:e,activeManifest:t,vault:n}=(0,u.D1)(),[i,o]=(0,c.useState)({root:[],canvas:[]});return(0,c.useEffect)(()=>{let i=n.get(t),a=n.get(e),r=null==i?void 0:i.rendering,l=null==a?void 0:a.rendering;o({root:tQ(r,n),canvas:tQ(l,n)})},[e,t,n]),{...i}}();return{allPages:tX((null==e?void 0:e.root)||[],"Root Rendering Label"),individualPages:tX((null==e?void 0:e.canvas)||[],"Canvas Rendering Label")}}(),n=e.length>0||t.length>0,o=e=>{window.open(e,"_blank")};return n?(0,i.jsxs)(e2,{children:[(0,i.jsx)(tU,{"data-testid":"download-button",children:(0,i.jsx)(eZ,{children:(0,i.jsx)(eZ.Download,{})})}),(0,i.jsxs)(tJ,{"data-testid":"download-content",children:[t.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{children:"Individual Pages"}),(0,i.jsx)("ul",{children:t.map(e=>{let{format:t,id:n,label:a}=e;return(0,i.jsx)("li",{children:(0,i.jsxs)("button",{onClick:()=>o(n),children:[a," (",t,")"]})},a)})})]}),e.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{children:"All Pages"}),(0,i.jsx)("ul",{children:e.map(e=>{let{format:t,id:n,label:a}=e;return(0,i.jsx)("li",{children:(0,i.jsxs)("button",{onClick:()=>o(n),children:[a," (",t,")"]})},a)})})]})]})]}):null};let t0=e=>{let t=()=>!!window.matchMedia&&window.matchMedia(e).matches,[n,i]=(0,c.useState)(t);return(0,c.useEffect)(()=>{let e=()=>i(t);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),n};var t1=e=>{let{manifestId:t,manifestLabel:n}=e,{collection:o,configOptions:a}=(0,u.D1)(),{informationPanel:l,showDownload:s,showIIIFBadge:d,showTitle:c}=a,h=s||d||(null==l?void 0:l.renderToggle),m=t0(j.BC.sm),{t:p}=(0,r.$G)();return(0,i.jsxs)(tL,{className:"clover-viewer-header",children:[(null==o?void 0:o.items)?(0,i.jsx)(tH,{}):(0,i.jsx)(tR,{className:c?"":"visually-hidden",children:c&&(0,i.jsx)(ej.__,{label:n,className:"label"})}),h&&(0,i.jsxs)(tF,{children:[s&&(0,i.jsx)(tK,{}),d&&(0,i.jsxs)(e2,{children:[(0,i.jsx)(tM,{children:(0,i.jsx)(tO,{title:p("commonShare")})}),(0,i.jsxs)(tE,{children:[(null==o?void 0:o.items)&&(0,i.jsx)("button",{onClick:e=>{e.preventDefault(),window.open(o.id,"_blank")},children:p("shareCollectionJson")}),(0,i.jsx)("button",{onClick:e=>{e.preventDefault(),window.open(t,"_blank")},children:p("shareManifestJson")})," ",(null==o?void 0:o.items)&&(0,i.jsx)(tV,{textPrompt:p("shareCollectionCopy"),textToCopy:o.id}),(0,i.jsx)(tV,{textPrompt:p("shareManifestCopy"),textToCopy:t})]})]}),(null==l?void 0:l.renderToggle)&&!m&&(0,i.jsx)(tZ,{})]})]})};let t2=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,n]=(0,c.useState)(e);return(0,c.useLayoutEffect)(()=>{if(!t)return;let e=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=e}},[t]),(0,c.useEffect)(()=>{t!==e&&n(e)},[e]),[t,n]};var t4=e=>{var t;let{manifest:n,theme:o,iiifContentSearchQuery:a}=e,r=(0,u.D1)(),l=(0,u.Cu)(),{activeCanvas:s,isInformationOpen:d,vault:h,contentSearchVault:y,configOptions:w,openSeadragonViewer:C}=r,S=(null==w?void 0:w.canvasHeight)&&["100%","auto"].includes(null==w?void 0:w.canvasHeight),[k,z]=(0,c.useState)(!1),[I,T]=(0,c.useState)(!1),[A,M]=(0,c.useState)([]),[E,R]=(0,c.useState)([]),[L,F]=(0,c.useState)(),[H,P]=t2(!1),D=t0(j.BC.sm),[N,V]=(0,c.useState)(),O=(0,c.useCallback)(e=>{l({type:"updateInformationOpen",isInformationOpen:e})},[l]);(0,c.useEffect)(()=>{var e;(null==w?void 0:null===(e=w.informationPanel)||void 0===e?void 0:e.open)&&O(!D)},[D,null==w?void 0:null===(t=w.informationPanel)||void 0===t?void 0:t.open,O]),(0,c.useEffect)(()=>{if(!D){P(!1);return}P(d)},[d,D,P]),(0,c.useEffect)(()=>{let e=(0,p.G)(h,s);e&&(T(["Sound","Video"].indexOf(e[0].type)>-1),M(e)),g(h,s).then(e=>{e.length>0&&l({type:"updateInformationOpen",isInformationOpen:!0}),R(e),z(0!==e.length)})},[s,E.length,h,l]);let B=n.service.some(e=>"SearchService2"===e.type);return(0,c.useEffect)(()=>{if(B){let e=n.service.find(e=>"SearchService2"===e.type);e&&V(e.id)}},[n,B]),(0,c.useEffect)(()=>{var e,t,n;N&&(null===(e=w.informationPanel)||void 0===e?void 0:e.renderContentSearch)!==!1&&f(y,N,null===(n=w.localeText)||void 0===n?void 0:null===(t=n.contentSearch)||void 0===t?void 0:t.tabLabel,a).then(e=>{F(e)})},[N]),(0,c.useEffect)(()=>{if(!C||!L)return;let e=h.get({id:s,type:"Canvas"});(0,x.dH)(C,"content-search-overlay"),(0,x.LW)(y,L,C,e,w)},[C,L]),(0,i.jsx)(v.SV,{FallbackComponent:b.Z,children:(0,i.jsx)($,{className:"".concat(o," clover-viewer"),css:{background:null==w?void 0:w.background},"data-body-locked":H,"data-absolute-position":S,"data-information-panel":k,"data-information-panel-open":d,children:(0,i.jsxs)(m.fC,{open:d,onOpenChange:O,children:[(0,i.jsx)(t1,{manifestLabel:n.label,manifestId:n.id}),(0,i.jsx)(tA,{activeCanvas:s,painting:A,annotationResources:E,searchServiceUrl:N,setContentSearchResource:F,contentSearchResource:L,items:n.items,isAudioVideo:I})]})})})},t3=n(1028);let t5={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function t6(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{ok:!1,status:e.status,statusText:e.statusText,headers:e.getAllResponseHeaders(),data:t||e.statusText,json:()=>JSON.parse(t||e.statusText)}}var t8=n(3094);let t7=e=>{let{canvasIdCallback:t,customTheme:n,iiifContent:o,options:a,iiifContentSearchQuery:r}=e,l=(0,u.Cu)(),{activeCanvas:s,activeManifest:d,isLoaded:h,vault:m}=(0,u.D1)(),[p,g]=(0,c.useState)(),[f,x]=(0,c.useState)(),v={};return(n&&(v=(0,t3.jG)("custom",n)),(0,c.useEffect)(()=>{t&&t(s)},[s,t]),(0,c.useEffect)(()=>{d&&m.loadManifest(d).then(e=>{x(e),l({type:"updateActiveCanvas",canvasId:(0,t8.FO)(o,e)})}).catch(e=>{console.error("Manifest failed to load: ".concat(e))}).finally(()=>{l({type:"updateIsLoaded",isLoaded:!0})})},[o,d,l,m]),(0,c.useEffect)(()=>{l({type:"updateConfigOptions",configOptions:a});let e=(0,t8.Vu)(o);m.load(e).then(e=>{g(e)}).catch(e=>{console.error("The IIIF resource ".concat(o," failed to load: ").concat(e))})},[l,o,a,m]),(0,c.useEffect)(()=>{if((null==p?void 0:p.type)==="Collection"){l({type:"updateCollection",collection:p});let e=(0,t8.Mx)(o,p);e&&l({type:"updateActiveManifest",manifestId:e})}else(null==p?void 0:p.type)==="Manifest"&&l({type:"updateActiveManifest",manifestId:p.id})},[l,o,p]),h)?f&&f.items?0===f.items.length?(console.log("The IIIF manifest ".concat(o," does not contain canvases.")),(0,i.jsx)(i.Fragment,{})):(0,i.jsx)(t4,{manifest:f,theme:v,iiifContentSearchQuery:r},f.id):(console.log("The IIIF manifest ".concat(o," failed to load.")),(0,i.jsx)(i.Fragment,{})):(0,i.jsx)(i.Fragment,{children:"Loading"})};var t9=e=>{var t,n,o;let{canvasIdCallback:a=()=>{},customDisplays:r=[],plugins:l=[],customTheme:s,iiifContent:d,id:c,manifestId:m,options:p,iiifContentSearchQuery:g}=e,f=d;c&&(f=c),m&&(f=m);let x=(0,u.as)(null==p?void 0:null===(n=p.informationPanel)||void 0===n?void 0:null===(t=n.vtt)||void 0===t?void 0:t.autoScroll);return(0,i.jsx)(u.MY,{initialState:{...u.W2,customDisplays:r,plugins:l,isAutoScrollEnabled:x.enabled,isInformationOpen:!!(null==p?void 0:null===(o=p.informationPanel)||void 0===o?void 0:o.open),vault:new h.j({customFetcher:e=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t5,n=t.headers||t5.headers;return new Promise((i,o)=>{let a=new XMLHttpRequest;a.open("get",e),a.withCredentials=t.withCredentials,n&&Object.keys(n).forEach(e=>a.setRequestHeader(e,n[e])),a.onload=()=>{i({ok:a.status>=200&&a.status<300,status:a.status,statusText:a.statusText,headers:a.getAllResponseHeaders(),data:a.responseText,json:()=>JSON.parse(a.responseText)})},a.onerror=()=>{o(t6(a,"Failed to make request."))},a.ontimeout=()=>{o(t6(a,"Request took longer than expected."))},a.send()})})(e,{withCredentials:null==p?void 0:p.withCredentials,headers:null==p?void 0:p.requestHeaders}).then(e=>JSON.parse(e.data))})},children:(0,i.jsx)(t7,{iiifContent:f,canvasIdCallback:a,customTheme:s,options:p,iiifContentSearchQuery:g})})}},445:function(e,t,n){n.d(t,{g:function(){return i}});let i=(e,t,n,i)=>{let o={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(o.canvas=e.get(t),o.canvas){var a,r;o.annotationPage=e.get(o.canvas.items[0]),o.accompanyingCanvas=(null===(a=o.canvas)||void 0===a?void 0:a.accompanyingCanvas)?e.get(null===(r=o.canvas)||void 0===r?void 0:r.accompanyingCanvas):void 0}if(o.annotationPage){let a=e.get(o.annotationPage.items).map(t=>({body:e.get(t.body[0].id),motivation:t.motivation,type:"Annotation"})),r=[];a.forEach(t=>{"Choice"===t.body.type?t.body.items.forEach(n=>r.push({...t,id:n.id,body:e.get(n.id)})):r.push(t)}),o.annotations=r.filter(o=>{if(o){if(!o.body||!o.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",o);return}let a=o.body;Array.isArray(a)&&(a=a[0]);let r=e.get(a.id);if(r)switch(n){case"painting":return o.target===t.id&&o.motivation&&"painting"===o.motivation[0]&&i.includes(r.type)&&(o.body=r),!!o;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})}return o}},8946:function(e,t,n){n.d(t,{G:function(){return o}});var i=n(445);let o=(e,t)=>{let n=(0,i.g)(e,{id:t,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==n.annotations.length&&n.annotations&&n.annotations)return n.annotations.map(e=>null==e?void 0:e.body)}}}]);