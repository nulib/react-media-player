"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[985],{5985:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var a=n(1527),i=n(959);let o={annotations:[],manifest:void 0,searchString:void 0,options:{offset:0},vault:new(n(3832)).j};function r(e,t){switch(t.type){case"updateAnnotations":return{...e,annotations:t.payload};case"updateSearchString":return{...e,searchString:t.payload};default:return e}}let l=(0,i.createContext)({dispatch:()=>null,state:o}),d=e=>{let{children:t,manifest:n}=e,d={...o.options,...e.options},[s,c]=(0,i.useReducer)(r,o);return(0,a.jsx)(l.Provider,{value:{state:{...s,manifest:n,options:d},dispatch:c},children:t})};var s=n(9040),c=n(5455);let u=(0,c.zo)("div",{display:"flex",flexDirection:"column",justifyContent:"space-between"}),p=(0,c.zo)("aside",{margin:"0",padding:"0",position:"relative",zIndex:2,flexGrow:"1",flexShrink:"0",["& ".concat(u)]:{position:"absolute",width:"50%",top:0},"&.anchor":{["& ".concat(u)]:{position:"fixed",width:"50%"}}}),x=(0,c.zo)("header",{display:"flex",justifyContent:"space-between",fontSize:"1",flexGrow:"1",flexShrink:"0",marginBottom:"1.618rem",strong:{fontWeight:"400",fontSize:"1.33rem"}}),v=(0,c.zo)("section",{margin:"0",gap:"1rem"});var f=e=>{let{label:t}=e;return(0,a.jsx)(x,{children:(0,a.jsx)("strong",{children:(0,a.jsx)(s.__,{label:t})})})};let m=(0,c.zo)("article",{transition:"all 0.382s ease-in-out",display:"flex",flexDirection:"row",flexWrap:"nowrap",gap:"2.618rem"}),h=(0,c.zo)("div",{transition:"$all",width:"50%",opacity:0,transform:"translateX(2.618rem)",zIndex:-1}),g=(0,c.zo)("div",{width:"50%",display:"flex",flexDirection:"column",justifyContent:"flex-start"}),b=(0,c.zo)("hr",{margin:"0",borderColor:"transparent",height:"1.618rem",position:"relative",zIndex:0,display:"flex",justifyContent:"flex-end",marginTop:"2.618rem","&::before":{content:"attr(aria-label)",position:"absolute",right:"1.618rem",bottom:"0",zIndex:1,display:"flex",fontSize:"0.7222rem",fontWeight:"400",lineHeight:"1rem",background:"inherit",opacity:.7},"&::after":{content:"",width:"100%",position:"absolute",zIndex:0,height:"1px",background:"#6662"}}),y=(0,c.zo)("div",{position:"relative",zIndex:"1",display:"flex",flexDirection:"column",gap:"2.618rem","&[data-figures-visible='true']":{["& ".concat(h)]:{opacity:1,zIndex:0,transform:"translateX(0)"}}});var j=e=>{let{canvas:t,canvasInfo:{current:n,total:i}}=e;return(0,a.jsxs)("figcaption",{children:[(0,a.jsxs)("em",{children:[n," / ",i]}),(null==t?void 0:t.label)&&(0,a.jsx)(s.__,{label:null==t?void 0:t.label}),(null==t?void 0:t.summary)&&(0,a.jsx)(s.ER,{summary:null==t?void 0:t.summary,as:"p"})]})},w=n(5129);let z=(0,c.zo)("div",{width:"100%",height:"400px",background:"#6662",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"});var C=e=>{let{body:t,label:n}=e;return(0,a.jsx)(z,{"data-testid":"scroll-figure-image",children:(0,a.jsx)(w.default,{body:t,openSeadragonConfig:{showNavigator:!1,showHomeControl:!1},...n&&{label:n}})})};let E=(0,c.zo)("figure",{figcaption:{display:"flex",flexDirection:"column",margin:"1.618rem 0 0",opacity:.9,em:{fontSize:"0.9em",fontStyle:"normal",opacity:.7}}});var S=n(4707),k=e=>{let{canvas:t,canvasInfo:n}=e,{state:o}=(0,i.useContext)(l),{vault:r}=o,d=(0,S.G)(r,t.id);return d?(0,a.jsxs)(E,{children:[null==d?void 0:d.map(e=>(0,a.jsx)(C,{body:e,label:null==t?void 0:t.label},null==e?void 0:e.id)),(0,a.jsx)(j,{canvas:t,canvasInfo:n})]}):null};let I="255, 197, 32",L=(0,c.zo)("div",{paddingTop:"1.618rem","span.highlight":{position:"relative",fontWeight:"bold","&::before":{top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",borderRadius:"3px",border:"1px solid rgba(".concat(I,", 0.2)"),borderBottom:"1px solid rgba(".concat(I,", 0.618)"),boxShadow:"1px 1px 1px #6661"},"&::after":{left:"0",top:"0",position:"absolute",display:"inline",content:"",width:"calc(100% + 4px)",height:"calc(100% + 2px) ",marginLeft:"-2px",marginTop:"-1px",borderRadius:"3px",backgroundColor:"rgba(".concat(I,", 0.2)"),zIndex:-1}}});var P=e=>{let{body:t}=e,[n,o]=(0,i.useState)(""),{state:r}=(0,i.useContext)(l),{searchString:d}=r;return((0,i.useEffect)(()=>{let e=null==t?void 0:t.value;if((null==t?void 0:t.format)==="text/plain"&&(e=null==e?void 0:e.replace(/\n/g,"<br />")),d){let t=RegExp(d,"gi");e=null==e?void 0:e.replace(t,e=>'<span class="highlight">'.concat(e,"</span>"))}o(e)},[t,d]),n)?(0,a.jsx)(L,{dangerouslySetInnerHTML:{__html:n},"data-body-id":t.id,"data-testid":"scroll-item-body",id:t.id}):null},$=i.memo(e=>{var t;let{hasItemBreak:n,isLastItem:o,item:r,itemCount:d,itemNumber:c}=e,{state:u}=i.useContext(l),{annotations:p,vault:x}=u,v=null==x?void 0:x.get(r),f=null==p?void 0:null===(t=p.filter(e=>e.target===r.id))||void 0===t?void 0:t.map(e=>{var t;return null==e?void 0:null===(t=e.body)||void 0===t?void 0:t.map((e,t)=>(0,a.jsx)(P,{body:e},t))}),y={current:c,total:d};return(0,a.jsxs)(m,{"data-page-break":n,"data-page-number":c,"data-last-item":o,children:[(0,a.jsx)(h,{children:v&&(0,a.jsx)(k,{canvas:v,canvasInfo:y})}),(0,a.jsxs)(g,{children:[(null==v?void 0:v.label)&&(0,a.jsxs)("strong",{children:[(0,a.jsx)(s.__,{label:null==v?void 0:v.label})," ","(".concat(y.current," / ").concat(y.total,")")]}),(0,a.jsx)("div",{children:f||(0,a.jsx)("p",{children:"[Blank]"})}),n&&(0,a.jsx)(b,{"aria-label":"Page Break"})]})]})}),D=n(1390);let _="255, 197, 32",B=(0,c.zo)("span",{fontWeight:"700"}),R=(0,c.zo)("div",{display:"flex",gap:"0.25rem"}),W=(0,c.zo)("div",{display:"flex",flexDirection:"column",gap:"0.5rem",button:{backgroundColor:"#6660",opacity:"0.7",transition:"$all",padding:"0.5rem 0.618rem",fontSize:"0.9rem",lineHeight:"1.1rem",textAlign:"left",borderRadius:"6px",border:"1px solid #6662",borderBottomWidth:"2px",display:"flex",flexDirection:"column",gap:"0.25rem","&:hover":{opacity:"1",boxShadow:"5px 5px 13px #6662"},"&[data-result=true]":{backgroundColor:"rgba(".concat(_,", 0.2)"),borderColor:"rgba(".concat(_,", 0.2)"),borderBottomColor:"rgba(".concat(_,", 0.382)"),opacity:"1","&:hover":{backgroundColor:"rgba(".concat(_,", 0.382)")}}}}),A=(0,c.zo)("input",{margin:"0",padding:"0 1rem 0 2rem",background:"none",zIndex:"2",height:"2rem",marginLeft:"1rem",marginTop:"1rem",justifyContent:"center",display:"flex",alignItems:"center",fontSize:"1rem",borderRadius:"2rem",fontFamily:"inherit",backgroundColor:"$primary",border:"none",color:"$secondary",cursor:"text",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important",flexGrow:"0",width:"100%","&:placeholder":{color:"inherit"}}),T=(0,c.zo)("span",{position:"absolute",zIndex:"3",width:"2rem",height:"2rem",padding:"8px",marginTop:"1rem",marginLeft:"1rem",color:"$secondary",fill:"$secondary",stroke:"$secondary",transition:"$all",cursor:"text"}),G=(0,c.zo)("button",{opacity:"1",display:"flex",alignItems:"center",borderRadius:"2rem",width:"2rem",height:"2rem",alignSelf:"center",marginTop:"1rem",gap:"0.35rem",backgroundColor:"$accent",fill:"$secondary",flexShrink:"0",svg:{padding:"6px",color:"inherit",fill:"inherit"},'&[aria-disabled="true"]':{opacity:"0",display:"none"}}),H=(0,c.zo)("form",{display:"flex",justifyContent:"space-between",gap:"1rem",width:"100%",variants:{isPanelExpanded:{true:{["".concat(T)]:{marginLeft:"0"},["& ".concat(A)]:{marginLeft:"0",backgroundColor:"$primary",width:"auto",flexGrow:"1"}},false:{}}}}),M=(0,c.zo)("div",{}),N={charset:"latin:extra, arabic:extra, cyrillic:extra, cjk:extra",optimize:!0,tokenize:"full",resolution:9,document:{id:"id",index:"content"}};var F=e=>{let{isPanelExpanded:t}=e,{state:n}=(0,i.useContext)(l),{annotations:o,searchString:r=""}=n,d=new D.Z.Document(N),s=[];function c(e){return e.map(e=>null==o?void 0:o.filter(t=>t.body.find(t=>t.id===e)).map(t=>{let n=t.body.findIndex(t=>t.id===e);return{...t,body:t.body[n]}}).shift())}null==o||o.forEach(e=>{var t;null==e||null===(t=e.body)||void 0===t||t.forEach(e=>{var t;let n=null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.replace(/\n/g,"");s.push(null==e?void 0:e.id),d.add({id:null==e?void 0:e.id,content:n})})});let u=null==d?void 0:d.search(r).reduce((e,t)=>[...new Set([...e,...t.result])],[]),p={found:c(u),notFound:c(s.filter(e=>!u.includes(e)))},x=e=>{var t,n;e&&(null===(n=document)||void 0===n||null===(t=n.getElementById(e))||void 0===t||t.scrollIntoView({behavior:"smooth"}))};return(0,a.jsx)(M,{children:(0,a.jsxs)(W,{children:[p.found.map(e=>(0,a.jsxs)("button",{"data-result":"true",disabled:!t,onClick:()=>x(e.body.id),children:[(0,a.jsxs)(R,{children:[(0,a.jsx)(B,{children:e.motivation}),(0,a.jsx)("span",{children:e.body.language})]}),(0,a.jsxs)("span",{children:[e.body.value.slice(0,150),"..."]})]},e.id)),p.notFound.map(e=>(0,a.jsxs)("button",{"data-result":"false",disabled:!t,onClick:()=>x(e.body.id),children:[(0,a.jsxs)(R,{children:[(0,a.jsx)(B,{children:e.motivation}),(0,a.jsx)("span",{children:e.body.language})]}),(0,a.jsxs)("span",{children:[e.body.value.slice(0,150),"..."]})]},e.id))]})})};let X=()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,a.jsx)("title",{children:"Search"}),(0,a.jsx)("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})]}),V=()=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,a.jsx)("title",{children:"Close"}),(0,a.jsx)("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})]});var Z=e=>{let{togglePanel:t,isPanelExpanded:n}=e,{dispatch:o,state:r}=(0,i.useContext)(l),{searchString:d}=r,s=(0,i.useRef)(null),c=()=>s.current===document.activeElement&&t(!0),u=()=>{var e;null===(e=s.current)||void 0===e||e.blur(),p(),t(!1),o({payload:"",type:"updateSearchString"})},p=()=>{s.current&&(s.current.value="")},x=e=>{"Escape"===e.key&&(e.preventDefault(),u())};return(0,i.useEffect)(()=>{var e;return null===(e=document)||void 0===e||e.addEventListener("keydown",x),()=>{var e;null===(e=document)||void 0===e||e.removeEventListener("keydown",x)}},[]),(0,i.useEffect)(()=>{if(null==s?void 0:s.current)return s.current.addEventListener("focus",c),s.current.addEventListener("blur",c),()=>{s.current&&(s.current.removeEventListener("focus",c),s.current.removeEventListener("blur",c))}},[]),(0,a.jsxs)(H,{id:"scroll-search",autoComplete:"off",isPanelExpanded:n,children:[(0,a.jsx)(T,{onClick:()=>{var e;return null==s?void 0:null===(e=s.current)||void 0===e?void 0:e.focus()},children:(0,a.jsx)(X,{})}),(0,a.jsx)(A,{ref:s,name:"clover-search",type:"text",placeholder:"Search...",defaultValue:d,onChange:e=>{var t;o({payload:null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value,type:"updateSearchString"})}}),(0,a.jsx)(G,{"aria-disabled":!n,"aria-label":"Close search panel",onClick:e=>{e.preventDefault(),u()},disabled:!n,children:(0,a.jsx)(V,{})})]})};let q=(0,c.zo)("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maxWidth:"100%",marginTop:"1rem",transition:"$all",variants:{isPanelExpanded:{true:{zIndex:1,opacity:1,transform:"translateX(0)"},false:{zIndex:-1,opacity:0,transform:"translateX(-2.618rem)",transitionDelay:"0",transition:"none"}}}}),J=e=>{let[t,n]=(0,i.useState)({top:0,left:0});return(0,i.useEffect)(()=>{let t=()=>{if(e.current){let t=e.current.getBoundingClientRect();n({top:t.top,left:t.left})}};return window.addEventListener("scroll",t),window.addEventListener("resize",t),t(),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[e]),t};var K=e=>{var t;let{isPanelExpanded:n,handlePanel:o}=e,r=(0,i.useRef)(null),{state:d}=(0,i.useContext)(l),{options:s}=d,{offset:c}=s,{top:x}=J(r),v=!!x&&x<c,f=null==r?void 0:null===(t=r.current)||void 0===t?void 0:t.offsetWidth,m=f?.5*f:f;return(0,a.jsx)(p,{ref:r,className:v?"anchor":"","data-testid":"scroll-panel",children:(0,a.jsxs)(u,{style:{top:v?c:0,width:"calc(".concat(m,"px - 1.318rem)"),maxWidth:n?"100%":"".concat(m?m-315:180,"px"),minWidth:"130px"},children:[(0,a.jsx)(Z,{togglePanel:o,isPanelExpanded:n}),(0,a.jsx)(q,{"data-testid":"scroll-panel-results","data-panel-expanded":n,isPanelExpanded:n,children:(0,a.jsx)(F,{isPanelExpanded:n})})]})})},O=e=>{let{items:t}=e,[n,o]=(0,i.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{isPanelExpanded:n,handlePanel:e=>o(e)}),(0,a.jsx)(y,{"data-figures-visible":!n,children:t.map((e,n)=>{let i=n+1,o=i===t.length;return(0,a.jsx)($,{item:e,hasItemBreak:i<t.length,isLastItem:o,itemCount:t.length,itemNumber:i},e.id)})})]})},Q=(e,t)=>{let[n,a]=(0,i.useState)([]);return(0,i.useEffect)(()=>{if(!t)return;let n=[];null==e||e.forEach(e=>{var a;let i=t.get(e);null==i||null===(a=i.annotations)||void 0===a||a.forEach(e=>{var a;let i=t.get(e);null==i||null===(a=i.items)||void 0===a||a.forEach(e=>{let a=t.get(e);if(a){var i;n.push({...a,body:null==a?void 0:null===(i=a.body)||void 0===i?void 0:i.map(e=>t.get(e))})}})})}),a(n.reduce((e,t)=>(e.some(e=>e.id===t.id)||e.push(t),e),[]))},[e,t]),n};let U=e=>{let{iiifContent:t}=e,[n,o]=(0,i.useState)(),{state:r,dispatch:d}=(0,i.useContext)(l),{vault:s}=r,c=Q(null==n?void 0:n.items,s);return((0,i.useEffect)(()=>{s&&s.load(t).then(e=>e&&o(e)).catch(e=>console.error("Manifest ".concat(t," failed to load: ").concat(e)))},[t,s]),(0,i.useEffect)(()=>{d({type:"updateAnnotations",payload:c})},[c,d]),n)?(0,a.jsxs)(v,{children:[n.label&&(0,a.jsx)(f,{label:n.label}),n.items&&(0,a.jsx)(O,{items:n.items})]}):null};var Y=e=>{let{iiifContent:t,options:n}=e;return(0,a.jsx)(d,{options:n,children:(0,a.jsx)(U,{iiifContent:t})})}},8640:function(e,t,n){n.d(t,{g:function(){return a}});let a=(e,t,n,a)=>{let i={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]};if(i.canvas=e.get(t),i.canvas){var o,r;i.annotationPage=e.get(i.canvas.items[0]),i.accompanyingCanvas=(null===(o=i.canvas)||void 0===o?void 0:o.accompanyingCanvas)?e.get(null===(r=i.canvas)||void 0===r?void 0:r.accompanyingCanvas):void 0}if(i.annotationPage){let o=e.get(i.annotationPage.items).map(t=>({body:e.get(t.body[0].id),motivation:t.motivation,type:"Annotation"})),r=[];o.forEach(t=>{"Choice"===t.body.type?t.body.items.forEach(n=>r.push({...t,id:n.id,body:e.get(n.id)})):r.push(t)}),i.annotations=r.filter(i=>{if(i){if(!i.body||!i.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",i);return}let o=i.body;Array.isArray(o)&&(o=o[0]);let r=e.get(o.id);if(r)switch(n){case"painting":return i.target===t.id&&i.motivation&&"painting"===i.motivation[0]&&a.includes(r.type)&&(i.body=r),!!i;case"supplementing":return;default:throw Error("Invalid annotation motivation.")}}})}return i}},4707:function(e,t,n){n.d(t,{G:function(){return i}});var a=n(8640);let i=(e,t)=>{let n=(0,a.g)(e,{id:t,type:"Canvas"},"painting",["Image","Sound","Video"]);if(0!==n.annotations.length&&n.annotations&&n.annotations)return n.annotations.map(e=>null==e?void 0:e.body)}}}]);